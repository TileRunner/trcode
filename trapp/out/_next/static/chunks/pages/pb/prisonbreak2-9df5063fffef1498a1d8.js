_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"2Skw":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/prisonbreak2",function(){return n("UOmD")}])},KQm4:function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return r}))},UOmD:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var s=n("nKUr"),r=n("KQm4"),c=n("q1tI"),i=n("YFqc"),a=n.n(i);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var d=function(){function e(t,n){o(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return u(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),b=function(){function e(t,n){var s=this;o(this,e),this.customSocket=null,this.socketUrl=t,this.reconnectTimer=new d((function(){s.disconnect(),s.connect()}),this.reconnectAfterMs),this.messageFunction=n}return u(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(t){console.log("connected to "+e.socketUrl)},this.customSocket.onclose=function(t){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){this.customSocket.send(JSON.stringify(e))}}]),e}(),j=["0-0","0-7","0-14","7-0","7-14","14-0","14-7","14-14"],f=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"];function h(){var e=Object(c.useState)(!0),t=e[0],n=e[1],i=Object(c.useState)(""),o=i[0],l=i[1],u=Object(c.useState)(""),d=u[0],j=u[1],f=Object(c.useState)([]),h=f[0],p=f[1],O=Object(c.useState)(0),g=(O[0],O[1]),v=Object(c.useState)(new b("wss://tilerunner.herokuapp.com",(function(e){g((function(e){return e+1})),p((function(t){return[].concat(Object(r.a)(t),[e.data])}))}))),y=v[0];v[1];return Object(c.useEffect)((function(){return y.connect()}),[]),t||""===d?Object(s.jsxs)("div",{className:"container-fluid",children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-10 pbtitle",children:["Prison Break Lobby",Object(s.jsx)("span",{className:"material-icons",children:"run_circle"})]}),Object(s.jsx)("div",{className:"col-2 pbhomelink",children:Object(s.jsx)(a.a,{href:"../../",children:Object(s.jsx)("a",{children:Object(s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-11 offset-1",children:Object(s.jsx)("h2",{children:'Prisoners: enter a game id and click "Start Game". Tell the Guards the id.'})})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-11 offset-1",children:Object(s.jsx)("h2",{children:'Guards: get the game id from the Prisoners. Enter the game id and click "Join Game".'})})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-11 offset-1",children:Object(s.jsxs)("h2",{children:["Game id:",Object(s.jsx)("input",{name:"gameid",value:o,onChange:function(e){l(e.target.value)}}),Object(s.jsx)("label",{children:"\xa0"}),Object(s.jsx)("button",{id:"startgame",onClick:function(){o.length>0&&(j("P"),n(!1))},children:"Start Game"}),Object(s.jsx)("label",{children:"\xa0"}),Object(s.jsx)("button",{id:"joingame",onClick:function(){o.length>0&&(j("G"),n(!1))},children:"Join Game"})]})})})]}):Object(s.jsx)(m,{prisonersOrGuards:d,gameid:o,wsmsgs:h,client:y,removeMessage:function(e){var t=h.indexOf(e),n=Object(r.a)(h);n.splice(t,1),p(n)}})}var p=function(e){var t="P"===e.squareusedby?"pbSquareUsedByPrisoners":"pbSquareUsedByGuards",n="."!==e.c?t:e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"r"===e.rcd[2]?"pbSquareRightArrow":e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"d"===e.rcd[2]?"pbSquareDownArrow":7===e.ri&&7===e.ci?"pbSquareCenterSquare":0!==e.ri&&7!==e.ri&&14!==e.ri||0!==e.ci&&7!==e.ci&&14!==e.ci?e.ri%2===e.ci%2?"pbSquare1":"pbSquare2":"pbSquareEscapeHatch",r="."!==e.c?e.c:"pbSquareRightArrow"===n?"\u27a1":"pbSquareDownArrow"===n?"\u2b07":"pbSquareCenterSquare"===n?Object(s.jsx)("i",{className:"material-icons",children:"stars"}):"pbSquareEscapeHatch"===n?"\ua415":(e.ri,e.ci,".");return"pbSquareEscapeHatch"===n?Object(s.jsx)("button",{className:n,onClick:e.onClick,children:Object(s.jsx)("span",{className:"material-icons",children:"run_circle"})}):Object(s.jsx)("button",{className:n,onClick:e.onClick,children:r})},O=function(e){var t=e.onClick,n=e.squares,r=e.usedby,c=e.rcd,i=function(e){return Object(s.jsx)("tr",{className:"pbRow",children:n[e].map((function(n,i){return function(e,n,r,i){return Object(s.jsx)("td",{className:"pbSquare",children:Object(s.jsx)(p,{c:r,ci:n,ri:e,squareusedby:i,rcd:c,onClick:function(){return t(e,n)}})},"Square".concat(e,"-").concat(n))}(e,i,n,r[e][i])}))},"BoardRow".concat(e))};return Object(s.jsx)("table",{className:"pbBoard",children:Object(s.jsx)("tbody",{children:n.map((function(e,t){return i(t)}))})})},m=function(e){var t=e.prisonersOrGuards,n=e.gameid,i=e.wsmsgs,o=e.client,l=e.removeMessage,u=Object(c.useState)([].concat(f)),d=u[0],b=u[1],h=Object(c.useState)([]),p=h[0],m=h[1],v=Object(c.useState)([]),y=v[0],x=v[1],k=Object(c.useState)(Array(15).fill(Array(15).fill("."))),w=k[0],q=k[1],C=Object(c.useState)(Array(15).fill(Array(15).fill(""))),T=C[0],P=C[1],G=Object(c.useState)(-1),E=G[0],A=G[1],M=Object(c.useState)("P"),R=M[0],I=M[1],_=Object(c.useState)([]),F=_[0],J=_[1],U=Object(c.useState)(0),B=U[0],L=U[1],D=Object(c.useState)([-1,-1,""]),H=D[0],K=D[1],Y=Object(c.useState)({squares:Object(r.a)(w),usedby:Object(r.a)(T),ptiles:Object(r.a)(p),gtiles:Object(r.a)(y)}),z=Y[0],V=Y[1];Object(c.useEffect)((function(){if("P"===t){for(var e=Object(r.a)(p),s=Object(r.a)(y),c=Object(r.a)(d);e.length<7;){var i=Math.floor(Math.random()*c.length);e.push(c[i]),c.splice(i,1),i=Math.floor(Math.random()*c.length),s.push(c[i]),c.splice(i,1)}e.sort(),s.sort(),x(s),m(e),b(c),V({squares:Object(r.a)(w),usedby:Object(r.a)(T),ptiles:Object(r.a)(e),gtiles:Object(r.a)(s)})}else try{console.log("Sending ggd"),o.send(JSON.stringify({gameid:n,type:"pb",func:"ggd"}))}catch(a){}}),[]),Object(c.useEffect)((function(){var e=i[0];e&&function(e){var s=JSON.parse(e);s.gameid===n&&"pb"===s.type&&("requestgamedata"===s.func&&s.requestor!==t&&o.send(JSON.stringify({gameid:n,type:"pb",func:"providegamedata",sender:t,tiles:d,squares:w,ptiles:p,gtiles:y,usedby:T,whoseturn:R,selection:E,currentcoords:F,snapshot:z,rescues:B})),"providegamedata"===s.func&&s.sender!==t&&(b(s.tiles),q(s.squares),m(s.ptiles),x(s.gtiles),P(s.usedby),I(s.whoseturn),A(s.selection),J(s.currentcoords),V(s.snapshot),L(s.rescues)),"ggd"===s.func&&"P"===t&&o.send(JSON.stringify({gameid:n,type:"pb",func:"sgd",tiles:d,squares:w,ptiles:p,gtiles:y,usedby:T,whoseturn:R,selection:E,currentcoords:F,snapshot:z,rescues:B})),"sgd"===s.func&&"G"===t&&(b(s.tiles),q(s.squares),m(s.ptiles),x(s.gtiles),P(s.usedby),I(s.whoseturn),A(s.selection),J(s.currentcoords),V(s.snapshot),L(s.rescues)),"ept"===s.func&&(I("G"),A(-1),K(-1,-1,""),J([]),q(s.squares),P(s.usedby),m(s.ptiles),b(s.tiles),L(s.rescues),V({squares:Object(r.a)(s.squares),usedby:Object(r.a)(s.usedby),ptiles:Object(r.a)(s.ptiles),gtiles:Object(r.a)(y)})),"egt"===s.func&&(I("P"),A(-1),K(-1,-1,""),J([]),q(s.squares),P(s.usedby),x(s.gtiles),b(s.tiles),V({squares:Object(r.a)(s.squares),usedby:Object(r.a)(s.usedby),ptiles:Object(r.a)(p),gtiles:Object(r.a)(s.gtiles)})));l(e)}(e)}),[i]);var W=function(e,t,n,s){var c=Object(r.a)(w),i=Object(r.a)(T),a=Object(r.a)(p),o=Object(r.a)(y),l=Object(r.a)(w[e]),u=w[e][t],d=Object(r.a)(F),b=String(e)+"-"+String(t),j=F.indexOf(b);if(-1===n&&(n=E,s=H),n>-1&&"."===u){l[t]="P"===R?a[n]:o[n],c[e]=Object(r.a)(l),"P"===R?a.splice(n,1):o.splice(n,1);var f=Object(r.a)(i[e]);return f[t]=R,i[e]=Object(r.a)(f),"P"===R&&n===a.length&&(n-=1),"G"===R&&n===o.length&&(n-=1),A(n),q(c),P(i),m(a),x(o),J([].concat(Object(r.a)(F),[b])),void K(s)}if(j>-1){"P"===R?a.push(u):o.push(u);var h=Object(r.a)(c[e]);h[t]=".",c[e]=Object(r.a)(h);var O=Object(r.a)(i[e]);return O[t]="",i[e]=Object(r.a)(O),A("P"===R?a.length-1:o.length-1),d.splice(j,1),q(c),P(i),m(a),x(o),J(d),void K(-1,-1,"")}if("."!==w[e][t]);else{var g=H[0]!==e||H[1]!==t?"r":"r"===H[2]?"d":"d"===H[2]?"":"r";K(s=[e,t,g])}},Q=function(){if(Z()){for(var e=B,t=0;t<F.length;t++)j.indexOf(F[t])>-1&&(e+=1);for(var s=Object(r.a)(p),c=Object(r.a)(d);s.length<7&&c.length>0;){var i=Math.floor(Math.random()*c.length);s.push(c[i]),c.splice(i,1)}s.sort(),I("G"),A(-1),J([]),m(s),b(c),L(e),V({squares:Object(r.a)(w),usedby:Object(r.a)(T),ptiles:Object(r.a)(s),gtiles:Object(r.a)(y)}),o.send(JSON.stringify({gameid:n,type:"pb",func:"ept",squares:w,usedby:T,ptiles:s,tiles:c,rescues:e}))}},X=function(){if(Z()){for(var e=Object(r.a)(y),t=Object(r.a)(d);e.length<7&&t.length>0;){var s=Math.floor(Math.random()*t.length);e.push(t[s]),t.splice(s,1)}e.sort();var c=Object(r.a)(w),i=Object(r.a)(T),a=Object(r.a)(p),l=Object(r.a)(y);I("P"),A(-1),J([]),x(e),b(t),V({squares:c,usedby:i,ptiles:a,gtiles:l}),o.send(JSON.stringify({gameid:n,type:"pb",func:"egt",squares:w,usedby:T,gtiles:e,tiles:t}))}};function Z(){if("."===w[7][7])return window.alert("First play must hit center square"),!1;for(var e=15,t=-1,n=15,s=-1,r=0;r<15;++r)for(var c=0;c<15;++c)if("."!==w[r][c]){if(!(r>0&&"."!==w[r-1][c])&&!(c>0&&"."!==w[r][c-1])&&!(r<14&&"."!==w[r+1][c])&&!(c<14&&"."!==w[r][c+1]))return window.alert("Each played tile must be part of a word"),!1;"."===z.squares[r][c]&&(r<e&&(e=r),r>t&&(t=r),c<n&&(n=c),c>s&&(s=c))}if(15===e)return window.alert("You didn't play any tiles"),!1;if(e!==t&&n!==s)return window.alert("Tiles played must be in a straight line"),!1;var i=!1,a=!1;for(r=e;r<=t;++r)for(c=n;c<=s;++c){if("."===w[r][c])return window.alert("There is a gap in your word"),!1;"."!==z.squares[r][c]&&(i=!0),e===t&&r>0&&"."!==w[r-1][c]&&(a=!0),e===t&&r<14&&"."!==w[r+1][c]&&(a=!0),n===s&&c>0&&"."!==w[r][c-1]&&(a=!0),n===s&&c<14&&"."!==w[r][c+1]&&(a=!0)}return e===t&&n>0&&"."!==z.squares[e][n-1]&&(i=!0),e===t&&s<14&&"."!==z.squares[e][s+1]&&(i=!0),n===s&&e>0&&"."!==z.squares[e-1][n]&&(i=!0),n===s&&t<14&&"."!==z.squares[t+1][n]&&(i=!0),!(!i&&!a&&"."!==z.squares[7][7])||(window.alert("Words must be connected"),!1)}var $=function(){q(Object(r.a)(z.squares)),P(Object(r.a)(z.usedby)),m(Object(r.a)(z.ptiles)),x(Object(r.a)(z.gtiles)),A(-1),J([])};return Object(s.jsxs)("div",{className:"container-fluid prisonbreak",onKeyDownCapture:function(e){if(e.preventDefault(),t===R)if("Enter"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var n=e.key.toUpperCase(),s="P"===R?p:y,c=s.indexOf(n);if(-1===c&&(c=s.indexOf("?")),c>-1){var i=H[0],a=H[1],o=H[2];if(i>-1&&a>-1&&""!==o){if("r"===o){for(var l=-1,u=a+1;u<15&&-1===l;u++)"."===w[i][u]&&(l=u);return void W(i,a,c,-1===l?[-1,-1,""]:[i,l,"r"])}if("d"===o){for(var d=-1,b=i+1;b<15&&-1===d;b++)"."===w[b][a]&&(d=b);return void W(i,a,c,-1===d?[-1,-1,""]:[d,a,"d"])}}}}else if("Backspace"===e.key&&F.length>0){var j=F[F.length-1],f=Object(r.a)(F),h=Object(r.a)(p),O=Object(r.a)(y),g=Object(r.a)(T),v=Object(r.a)(w),k=[-1,-1,""],N=E;f.splice(F.length-1,1);var S=parseInt(j.split("-")[0]),C=parseInt(j.split("-")[1]),G=w[S][C];"P"===R?(h.push(G),N=h.length-1):(O.push(G),N=O.length-1),g[S][C]="",v[S][C]=".";var M=H[2];""!==M&&(k=[S,C,M],1===F.length&&(N=-1)),J(f),x(O),m(h),q(v),P(g),K(k),A(N)}}else"P"===R?Q():X()},children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-1 gameid",children:["Game id: ",n]}),Object(s.jsxs)("div",{className:"col-10 pbtitle",children:["Prison Break",Object(s.jsx)("span",{className:"material-icons",children:"run_circle"})]}),Object(s.jsxs)("div",{className:"col-1 pbhomelink",children:[Object(s.jsx)("button",{id:"requestGameData","data-toggle":"tooltip",title:"Sync with opponent",onClick:function(){o.send(JSON.stringify({gameid:n,type:"pb",func:"requestgamedata",requestor:t}))},children:Object(s.jsx)("i",{className:"material-icons",children:"sync"})}),Object(s.jsx)(a.a,{href:"../../",children:Object(s.jsx)("a",{children:Object(s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-2 pbPrisoners",children:Object(s.jsx)(N,{ptiles:p,whoseturn:R,selection:E,onClick:function(e){return t=e,void("P"===R?A(t):alert("It is not your turn"));var t},onClickFinishTurn:function(){return Q()},onClickTileRecall:function(){return $()},onClickTileExchange:function(){return function(){if(d.length<7)window.alert("Need 7 in the bag to exchange");else{for(var e=[],t=Object(r.a)(d);e.length<7&&t.length>0;){var s=Math.floor(Math.random()*t.length);e.push(t[s]),t.splice(s,1)}e.sort(),(t=[].concat(Object(r.a)(t),Object(r.a)(z.ptiles))).sort(),console.log("Exchange ptiles"),console.log(z.ptiles),console.log(p),console.log(e),console.log(d),console.log(t),q(Object(r.a)(z.squares)),P(Object(r.a)(z.usedby)),I("G"),A(-1),J([]),m(e),b(t),V({squares:Object(r.a)(z.squares),usedby:Object(r.a)(z.usedby),ptiles:[].concat(e),gtiles:Object(r.a)(y)}),o.send(JSON.stringify({gameid:n,type:"pb",func:"ept",squares:z.squares,usedby:z.usedby,ptiles:e,tiles:t,rescues:B}))}}()},onClickPassPlay:function(){return $(),I("G"),void o.send(JSON.stringify({gameid:n,type:"pb",func:"ept",squares:z.squares,usedby:z.usedby,ptiles:z.ptiles,tiles:d,rescues:B}))},rescues:B,prisonersOrGuards:t})}),Object(s.jsx)("div",{className:"col-6",align:"center",children:t===R?Object(s.jsx)(O,{squares:w,usedby:T,rcd:H,onClick:function(e,t){return W(e,t,-1,null)}}):Object(s.jsx)(O,{squares:w,usedby:T,rcd:H,onClick:function(){}})}),Object(s.jsx)("div",{className:"col-2 pbGuards",children:Object(s.jsx)(S,{gtiles:y,whoseturn:R,selection:E,onClick:function(e){return t=e,void("G"===R?A(t):alert("It is not your turn"));var t},onClickFinishTurn:function(){return X()},onClickTileRecall:function(){return $()},onClickTileExchange:function(){return function(){if(d.length<7)window.alert("Need 7 in the bag to exchange");else{for(var e=[],t=Object(r.a)(d);e.length<7&&t.length>0;){var s=Math.floor(Math.random()*t.length);e.push(t[s]),t.splice(s,1)}e.sort(),(t=[].concat(Object(r.a)(t),Object(r.a)(z.gtiles))).sort(),q(Object(r.a)(z.squares)),P(Object(r.a)(z.usedby)),I("P"),A(-1),J([]),x(e),b(t),V({squares:Object(r.a)(z.squares),usedby:Object(r.a)(z.usedby),ptiles:Object(r.a)(p),gtiles:[].concat(e)}),o.send(JSON.stringify({gameid:n,type:"pb",func:"egt",squares:z.squares,usedby:z.usedby,gtiles:e,tiles:t}))}}()},onClickPassPlay:function(){return $(),I("P"),void o.send(JSON.stringify({gameid:n,type:"pb",func:"egt",squares:z.squares,usedby:z.usedby,gtiles:z.gtiles,tiles:d}))},prisonersOrGuards:t})}),Object(s.jsx)("div",{className:"col-2",children:Object(s.jsx)(g,{tiles:d,othertiles:"P"===t?y:p})})]})]})},g=function(e){var t=[].concat(Object(r.a)(e.tiles),Object(r.a)(e.othertiles));return t.sort(),"?"===t[0]&&(t.splice(0,1),t.push("?")),"?"===t[0]&&(t.splice(0,1),t.push("?")),Object(s.jsxs)("div",{className:"pbTilepool",children:[Object(s.jsx)("h3",{children:"TILES"}),t.map((function(e,n){return Object(s.jsxs)("span",{children:[n>0&&e!==t[n-1]?Object(s.jsx)("div",{className:"pbTilepoolDivider"}):Object(s.jsx)(s.Fragment,{}),Object(s.jsx)("span",{className:"pbTilepoolTile",children:e})]},"tile".concat(n))}))]})},v=function(e){return Object(s.jsx)("span",{className:e.tileclass,onClick:e.onClick,children:e.tilevalue})},y=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"check"}),"Finish Turn"]})})},x=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"undo"}),"Recall Tiles"]})})},k=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"cached"}),"Swap Tiles"]})})},w=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"not_interested"}),"Pass Turn"]})})},N=function(e){var t;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"playerTitle",children:["PRISONERS",Object(s.jsx)("i",{className:"material-icons",children:"run_circle run_circle run_circle"})]}),Object(s.jsx)("p",{className:"pbTilerack",children:e.ptiles.map((function(t,n){return r="P"===e.whoseturn&&e.selection===n?"pbTileOnRackSelectedP":"pbTileOnRackP",c=n,i="P"===e.prisonersOrGuards?t:"*","P"===e.prisonersOrGuards?Object(s.jsx)(v,{tileclass:r,tilevalue:i,onClick:function(){return e.onClick(c)}},r+String(c)):Object(s.jsx)(v,{tileclass:r,tilevalue:i,onClick:function(){return window.alert("No peeking!")}},r+String(c));var r,c,i}))}),"P"===e.whoseturn&&"P"===e.prisonersOrGuards?Object(s.jsx)("p",{children:Object(s.jsx)(y,{onClick:function(){return e.onClickFinishTurn()}})}):Object(s.jsx)(s.Fragment,{}),"P"===e.whoseturn&&"P"===e.prisonersOrGuards?Object(s.jsx)("p",{children:Object(s.jsx)(x,{onClick:function(){return e.onClickTileRecall()}})}):Object(s.jsx)(s.Fragment,{}),"P"===e.whoseturn&&"P"===e.prisonersOrGuards?Object(s.jsx)("p",{children:Object(s.jsx)(k,{onClick:function(){return e.onClickTileExchange()}})}):Object(s.jsx)(s.Fragment,{}),"P"===e.whoseturn&&"P"===e.prisonersOrGuards?Object(s.jsx)("p",{children:Object(s.jsx)(w,{onClick:function(){return e.onClickPassPlay()}})}):Object(s.jsx)(s.Fragment,{}),Object(s.jsxs)("p",{children:["Rescues made: ",e.rescues,Object(s.jsx)("br",{}),(t=e.rescues,Array(t).fill("nonsense").map((function(e,t){return Object(s.jsx)("span",{children:Object(s.jsx)("img",{src:"/breakfree.png",alt:"I'm free! I'm free!",width:"100",height:"100"})},e+String(t))})))]})]})},S=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"playerTitle",children:["GUARDS",Object(s.jsx)("i",{className:"material-icons",children:"security security security"})]}),Object(s.jsx)("p",{className:"pbTilerack",children:e.gtiles.map((function(t,n){return r="G"===e.whoseturn&&e.selection===n?"pbTileOnRackSelectedG":"pbTileOnRackG",c=n,i="G"===e.prisonersOrGuards?t:"*","G"===e.prisonersOrGuards?Object(s.jsx)(v,{tileclass:r,tilevalue:i,onClick:function(){return e.onClick(c)}},r+String(c)):Object(s.jsx)(v,{tileclass:r,tilevalue:i,onClick:function(){return window.alert("No peeking!")}},r+String(c));var r,c,i}))}),"G"===e.whoseturn&&"G"===e.prisonersOrGuards?Object(s.jsx)(y,{onClick:function(){return e.onClickFinishTurn()}}):Object(s.jsx)(s.Fragment,{}),"G"===e.whoseturn&&"G"===e.prisonersOrGuards?Object(s.jsx)(x,{onClick:function(){return e.onClickTileRecall()}}):Object(s.jsx)(s.Fragment,{}),"G"===e.whoseturn&&"G"===e.prisonersOrGuards?Object(s.jsx)(k,{onClick:function(){return e.onClickTileExchange()}}):Object(s.jsx)(s.Fragment,{}),"G"===e.whoseturn&&"G"===e.prisonersOrGuards?Object(s.jsx)(w,{onClick:function(){return e.onClickPassPlay()}}):Object(s.jsx)(s.Fragment,{})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var s=n("J4zp"),r=n("284h");t.__esModule=!0,t.default=void 0;var c=r(n("q1tI")),i=n("elyg"),a=n("nOHt"),o=n("vNVm"),l={};function u(e,t,n,s){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,n,s).catch((function(e){0}));var r=s&&"undefined"!==typeof s.locale?s.locale:e&&e.locale;l[t+"%"+n+(r?"%"+r:"")]=!0}}var d=function(e){var t=!1!==e.prefetch,n=(0,a.useRouter)(),r=n&&n.pathname||"/",d=c.default.useMemo((function(){var t=(0,i.resolveHref)(r,e.href,!0),n=s(t,2),c=n[0],a=n[1];return{href:c,as:e.as?(0,i.resolveHref)(r,e.as):a||c}}),[r,e.href,e.as]),b=d.href,j=d.as,f=e.children,h=e.replace,p=e.shallow,O=e.scroll,m=e.locale;"string"===typeof f&&(f=c.default.createElement("a",null,f));var g=c.Children.only(f),v=g&&"object"===typeof g&&g.ref,y=(0,o.useIntersection)({rootMargin:"200px"}),x=s(y,2),k=x[0],w=x[1],N=c.default.useCallback((function(e){k(e),v&&("function"===typeof v?v(e):"object"===typeof v&&(v.current=e))}),[v,k]);(0,c.useEffect)((function(){var e=w&&t&&(0,i.isLocalURL)(b),s="undefined"!==typeof m?m:n&&n.locale,r=l[b+"%"+j+(s?"%"+s:"")];e&&!r&&u(n,b,j,{locale:s})}),[j,b,w,m,t,n]);var S={ref:N,onClick:function(e){g.props&&"function"===typeof g.props.onClick&&g.props.onClick(e),e.defaultPrevented||function(e,t,n,s,r,c,a,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==a&&(a=s.indexOf("#")<0),t[r?"replace":"push"](n,s,{shallow:c,locale:o,scroll:a}).then((function(e){e&&a&&document.body.focus()})))}(e,n,b,j,h,p,O,m)},onMouseEnter:function(e){(0,i.isLocalURL)(b)&&(g.props&&"function"===typeof g.props.onMouseEnter&&g.props.onMouseEnter(e),u(n,b,j,{priority:!0}))}};if(e.passHref||"a"===g.type&&!("href"in g.props)){var q="undefined"!==typeof m?m:n&&n.locale,C=(0,i.getDomainLocale)(j,q,n&&n.locales,n&&n.domainLocales);S.href=C||(0,i.addBasePath)((0,i.addLocale)(j,q,n&&n.defaultLocale))}return c.default.cloneElement(g,S)};t.default=d},vNVm:function(e,t,n){"use strict";var s=n("J4zp"),r=n("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!a,r=(0,c.useRef)(),l=(0,c.useState)(!1),u=s(l,2),d=u[0],b=u[1],j=(0,c.useCallback)((function(e){r.current&&(r.current(),r.current=void 0),n||d||e&&e.tagName&&(r.current=function(e,t,n){var s=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var s=new Map,r=new IntersectionObserver((function(e){e.forEach((function(e){var t=s.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:r,elements:s}),n}(n),r=s.id,c=s.observer,i=s.elements;return i.set(e,t),c.observe(e),function(){i.delete(e),c.unobserve(e),0===i.size&&(c.disconnect(),o.delete(r))}}(e,(function(e){return e&&b(e)}),{rootMargin:t}))}),[n,t,d]);return(0,c.useEffect)((function(){a||d||(0,i.default)((function(){return b(!0)}))}),[d]),[j,d]};var c=n("q1tI"),i=r(n("0G5g")),a="undefined"!==typeof IntersectionObserver;var o=new Map}},[["2Skw",0,2,1,3]]]);