_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{KQm4:function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return c}))},NOQH:function(e,t,n){"use strict";n.r(t);var s=n("nKUr"),c=(n("q1tI"),function(e){var t="pbTileOnRack "+(e.selection===e.tileindex?"Selected ":"Unselected ")+("Q"===e.tilevalue?"u ":"")+e.prisonersOrGuards,n=e.tileindex;return Object(s.jsx)("div",{className:t,onClick:function(t){return e.onClick(t)},children:Object(s.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},n)}),a=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"check"}),"\xa0Finish Turn"]})})},r=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"undo"}),"\xa0Recall Tiles"]})})},i=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"cached"}),"\xa0Swap Tiles"]})})},o=function(e){return Object(s.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonText",children:[Object(s.jsx)("i",{className:"material-icons",children:"not_interested"}),"\xa0Pass Turn"]})})},l=function(e){return Object(s.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonSevereText",children:[Object(s.jsx)("i",{className:"material-icons",children:"report_problem"}),"\xa0Allow Undo Turn",e.alreadyAllowed?Object(s.jsx)("span",{className:"pbActionButtonSevereText2",children:"Allow undo is now enabled"}):Object(s.jsx)("span",{className:"pbActionButtonSevereText2",children:"Click to let opponent undo"})]})})},d=function(e){return Object(s.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:Object(s.jsxs)("span",{className:"pbActionButtonSevereText",children:[Object(s.jsx)("i",{className:"material-icons",children:"delete_forever"}),"\xa0Undo My Turn",Object(s.jsx)("span",{className:"pbActionButtonSevereText2",children:"Opponent has allowed undo"})]})})};function u(e){return Object(s.jsxs)("div",{className:"pbActionButtonDiv",children:[Object(s.jsx)("p",{children:Object(s.jsx)(a,{onClick:function(){return e.onClickFinishTurn()}})}),Object(s.jsx)("p",{children:Object(s.jsx)(r,{onClick:function(){return e.onClickTileRecall()}})}),Object(s.jsx)("p",{children:Object(s.jsx)(i,{onClick:function(){return e.onClickTileExchange()}})}),Object(s.jsx)("p",{children:Object(s.jsx)(o,{onClick:function(){return e.onClickPassPlay()}})})]})}function b(e){return Object(s.jsx)("div",{className:"pbActionButtonDiv",children:Object(s.jsx)("p",{children:Object(s.jsx)(l,{onClick:function(){return e.onClickAllowUndo()},alreadyAllowed:e.allowRewind})})})}function j(e){return Object(s.jsx)("div",{className:"pbActionButtonDiv",children:Object(s.jsx)("p",{children:Object(s.jsx)(d,{onClick:function(){return e.onClickUndoLastPlay()}})})})}t.default=function(e){var t="P"===e.prisonersOrGuards?"run_circle":"security",n="P"===e.prisonersOrGuards?"PRISONERS":"GUARDS";return Object(s.jsxs)("div",{className:"pbPlayerInnerSection",children:[Object(s.jsxs)("div",{className:"pbPlayerTitle",children:[Object(s.jsx)("i",{className:"material-icons",children:t}),"\xa0",n,"\xa0",Object(s.jsx)("i",{className:"material-icons",children:t})]}),Object(s.jsx)("div",{className:"pbTilerack",children:e.racktiles.map((function(t,n){return Object(s.jsx)(c,{whoseturn:e.whoseturn,prisonersOrGuards:e.prisonersOrGuards,selection:e.selection,tileindex:n,tilevalue:t,onClick:function(){return e.onClick(n)}})}))}),e.whoseturn===e.prisonersOrGuards?u(e):e.prisonersOrGuards!==e.prisonersOrGuards&&e.moves.length>0&&e.allowRewind&&e.moves[e.moves.length-1].by===e.prisonersOrGuards?j(e):Object(s.jsx)(s.Fragment,{}),e.moves.length>0&&e.moves[e.moves.length-1].by!==e.prisonersOrGuards?b(e):Object(s.jsx)(s.Fragment,{})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var s=n("J4zp"),c=n("284h");t.__esModule=!0,t.default=void 0;var a=c(n("q1tI")),r=n("elyg"),i=n("nOHt"),o=n("vNVm"),l={};function d(e,t,n,s){if(e&&(0,r.isLocalURL)(t)){e.prefetch(t,n,s).catch((function(e){0}));var c=s&&"undefined"!==typeof s.locale?s.locale:e&&e.locale;l[t+"%"+n+(c?"%"+c:"")]=!0}}var u=function(e){var t=!1!==e.prefetch,n=(0,i.useRouter)(),c=n&&n.pathname||"/",u=a.default.useMemo((function(){var t=(0,r.resolveHref)(c,e.href,!0),n=s(t,2),a=n[0],i=n[1];return{href:a,as:e.as?(0,r.resolveHref)(c,e.as):i||a}}),[c,e.href,e.as]),b=u.href,j=u.as,m=e.children,h=e.replace,O=e.shallow,p=e.scroll,f=e.locale;"string"===typeof m&&(m=a.default.createElement("a",null,m));var v=a.Children.only(m),g=v&&"object"===typeof v&&v.ref,x=(0,o.useIntersection)({rootMargin:"200px"}),w=s(x,2),y=w[0],k=w[1],N=a.default.useCallback((function(e){y(e),g&&("function"===typeof g?g(e):"object"===typeof g&&(g.current=e))}),[g,y]);(0,a.useEffect)((function(){var e=k&&t&&(0,r.isLocalURL)(b),s="undefined"!==typeof f?f:n&&n.locale,c=l[b+"%"+j+(s?"%"+s:"")];e&&!c&&d(n,b,j,{locale:s})}),[j,b,k,f,t,n]);var S={ref:N,onClick:function(e){v.props&&"function"===typeof v.props.onClick&&v.props.onClick(e),e.defaultPrevented||function(e,t,n,s,c,a,i,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,r.isLocalURL)(n))&&(e.preventDefault(),null==i&&(i=s.indexOf("#")<0),t[c?"replace":"push"](n,s,{shallow:a,locale:o,scroll:i}).then((function(e){e&&i&&document.body.focus()})))}(e,n,b,j,h,O,p,f)},onMouseEnter:function(e){(0,r.isLocalURL)(b)&&(v.props&&"function"===typeof v.props.onMouseEnter&&v.props.onMouseEnter(e),d(n,b,j,{priority:!0}))}};if(e.passHref||"a"===v.type&&!("href"in v.props)){var C="undefined"!==typeof f?f:n&&n.locale,P=(0,r.getDomainLocale)(j,C,n&&n.locales,n&&n.domainLocales);S.href=P||(0,r.addBasePath)((0,r.addLocale)(j,C,n&&n.defaultLocale))}return a.default.cloneElement(v,S)};t.default=u},dsDM:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/prisonbreak",function(){return n("fLLM")}])},fLLM:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var s=n("nKUr"),c=n("KQm4"),a=n("q1tI"),r=n("YFqc"),i=n.n(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var u=function(){function e(t,n){o(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return d(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),b=function(){function e(t,n){var s=this;o(this,e),this.customSocket=null,this.socketUrl=t,this.reconnectTimer=new u((function(){s.disconnect(),s.connect()}),this.reconnectAfterMs),this.messageFunction=n}return d(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(t){console.log("connected to "+e.socketUrl),e.send(JSON.stringify({type:"announce",func:"announce"}))},this.customSocket.onclose=function(t){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){this.customSocket.send(JSON.stringify(e))}}]),e}(),j=n("NOQH"),m="w3-button w3-border w3-blue w3-hover-black w3-round",h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],O=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],p=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],f=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],v=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],g=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],x=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],w=".",y="",k="";function N(){var e=Object(a.useState)(!1),t=e[0],n=e[1],c=Object(a.useState)(""),r=c[0],i=c[1],o=Object(a.useState)(""),l=o[0],d=o[1],u=Object(a.useState)(""),j=u[0],m=u[1],h=Object(a.useState)(""),O=h[0],p=h[1],f=Object(a.useState)(4),v=f[0],g=f[1],x=Object(a.useState)(new b("wss://tilerunner.herokuapp.com",(function(e){p(e.data)})))[0];return Object(a.useEffect)((function(){return x.connect()}),[]),""===j?Object(s.jsx)(S,{setIsrejoin:n,wsmessage:O,gameid:r,setGameid:i,nickname:l,setNickname:d,setPrisonersOrGuards:m,racksize:v,setRacksize:g}):Object(s.jsx)(T,{isrejoin:t,prisonersOrGuards:j,gameid:r,nickname:l,wsmessage:O,client:x,racksize:v})}var S=function(e){var t=e.setIsrejoin,n=e.wsmessage,r=e.gameid,o=e.setGameid,l=e.nickname,d=e.setNickname,u=e.setPrisonersOrGuards,b=e.racksize,j=e.setRacksize,h=Object(a.useState)([]),O=h[0],p=h[1];function f(e){for(var t=0;t<O.length;++t)if(O[t].gameid===e)return t;return-1}function v(e){return 0===l.length||"Game over"===e.gamestatus?0:e.playingP?e.nicknameP===l?3:0:1}function g(e){return 0===l.length||"Game over"===e.gamestatus?0:e.playingG?e.nicknameG===l?3:0:2}function x(e){j(e)}return Object(a.useEffect)((function(){""!==n&&function(e){try{var t=JSON.parse(e),n=t.gameid,s=t.nickname,a=t.whoseturn,r=t.racksize;if(n&&n.length>0&&r&&a&&a.length>0){var i=!1,o=t.sender,l=Object(c.a)(O),d=f(n),u="P"===o||d>-1&&O[d].playingP,b="G"===o||d>-1&&O[d].playingG,j=r,m="Unknown";"X"===a?m="Game over":"P"===a?m="Prisoners turn":"G"===a&&(m="Guards turn");var h={gameid:n,nicknameP:"P"===o?s:d>-1?O[d].nicknameP:"",nicknameG:"G"===o?s:d>-1?O[d].nicknameG:"",gamestatus:m,playingP:u,playingG:b,racksize:j};if(d<0)i=!0,l=[].concat(Object(c.a)(l),[h]);else{var v=O[d];v.nicknameP===h.nicknameP&&v.nicknameG===h.nicknameG&&v.gamestatus===h.gamestatus&&v.playingP===h.playingP&&v.playingG===h.playingG&&v.racksize===h.racksize||(i=!0,l[d]=h)}i&&p(l)}}catch(g){window.alert("Error processing lobby message")}}(n)}),[n]),Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[Object(s.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Prison Break Lobby"}),Object(s.jsx)("div",{className:"w3-bar-item w3-right",children:Object(s.jsx)(i.a,{href:"../../",children:Object(s.jsx)("a",{children:Object(s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(s.jsx)("div",{className:"w3-container",children:Object(s.jsxs)("div",{className:"w3-bar",children:[Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{children:Object(s.jsx)("b",{children:"Nickname:"})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:l,onChange:function(e){d(e.target.value)}})})]})}),Object(s.jsx)("div",{className:"w3-container",children:Object(s.jsxs)("div",{className:"w3-bar",children:[Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{children:Object(s.jsxs)("span",{className:"pbPlayerTitle",children:["PRISONERS",Object(s.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{children:Object(s.jsx)("b",{children:"Game ID:"})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:r,onChange:function(e){o(e.target.value)}})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{children:Object(s.jsx)("b",{children:"Rack Size:"})})}),Object(s.jsxs)("div",{className:"w3-bar-item",children:[Object(s.jsx)("button",{id:"selectracksize4",className:4===b?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),Object(s.jsx)("button",{id:"selectracksize5",className:5===b?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),Object(s.jsx)("button",{id:"selectracksize6",className:6===b?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),Object(s.jsx)("button",{id:"selectracksize7",className:7===b?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"}),Object(s.jsxs)("span",{className:"pbLobbyCellBlockInfo",children:[b," letter racks, ",2*b+1," x ",2*b+1," board."]})]}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("button",{id:"startgame",className:m,onClick:function(){0===l.length?window.alert("Please enter nickname before starting a game"):r.length>0?!function(e){var t=f(e);return!(t<0)&&O[t].playingP}(r)?u("P"):window.alert("Prisoners already playing that game"):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),Object(s.jsx)("div",{className:"w3-container",children:Object(s.jsxs)("div",{className:"w3-bar",children:[Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{children:Object(s.jsxs)("span",{className:"pbPlayerTitle",children:["GUARDS",Object(s.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("span",{className:"myCommonFont",children:Object(s.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),Object(s.jsx)("div",{className:"w3-container",children:Object(s.jsxs)("div",{className:"w3-bar",children:[Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h1",{children:Object(s.jsx)("i",{className:"material-icons w3-right",children:"report_problem"})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h3",{className:"myCommonFont",children:'If you lost connection, find and click the "Reconnect" button for your game id.'})})]})}),Object(s.jsx)("div",{className:"w3-container",children:Object(s.jsxs)("div",{className:"w3-bar",children:[Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsx)("h2",{className:"myCommonFont",children:Object(s.jsx)("b",{children:"Game list:"})})}),Object(s.jsx)("div",{className:"w3-bar-item",children:Object(s.jsxs)("table",{className:"w3-table-all w3-card-4",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[Object(s.jsx)("th",{className:"w3-border-right",children:"Game ID"}),Object(s.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),Object(s.jsx)("th",{className:"w3-border-right",children:"Guards"}),Object(s.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),Object(s.jsx)("th",{children:"Game Status"})]})}),Object(s.jsx)("tbody",{children:O.map((function(e,n){return Object(s.jsxs)("tr",{className:"myCommonFont w3-hover-green",children:[Object(s.jsx)("td",{className:"w3-border-right",children:Object(s.jsx)("b",{children:e.gameid})}),0===v(e)?Object(s.jsx)("td",{id:"PrisonersNoAction".concat(n),className:"w3-border-right",children:"No action available"}):3===v(e)?Object(s.jsx)("td",{id:"PrisonersRejoin".concat(n),className:"w3-border-right",children:Object(s.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){t(!0),o(e.gameid),u("P"),j(e.racksize)},children:"Reconnect"})}):Object(s.jsx)("td",{id:"PrisonersStart".concat(n),className:"w3-border-right",children:Object(s.jsx)("button",{className:m,onClick:function(){o(e.gameid),u("P")},children:"Start Game"})}),0===g(e)?Object(s.jsx)("td",{id:"GuardsNoAction".concat(n),className:"w3-border-right",children:"No action available"}):3===g(e)?Object(s.jsx)("td",{id:"GuardsRejoin".concat(n),className:"w3-border-right",children:Object(s.jsx)("button",{className:m,onClick:function(){t(!0),o(e.gameid),u("G"),j(e.racksize)},children:"Reconnect"})}):Object(s.jsx)("td",{id:"GuardsJoin".concat(n),className:"w3-border-right",children:Object(s.jsx)("button",{className:m,onClick:function(){o(e.gameid),u("G"),j(e.racksize)},children:"Join Game"})}),Object(s.jsx)("td",{id:"RackSize".concat(n),className:"w3-center w3-border-right",children:e.racksize}),Object(s.jsx)("td",{id:"GameStatus".concat(n),children:e.gamestatus})]},"OtherGame".concat(n))}))})]})})]})}),Object(s.jsx)("div",{className:"w3-container w3-teal",children:Object(s.jsx)("h1",{children:"Have fun!"})})]})},C=function(e){var t=2*e.racksize,n=e.racksize,c=e.c!==w?"pbSquareInner PlayerTile":e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"r"===e.rcd[2]?"pbSquareInner RightArrow":e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"d"===e.rcd[2]?"pbSquareInner DownArrow":e.ri===n&&e.ci===n?"pbSquareInner CenterSquare":0!==e.ri&&e.ri!==n&&e.ri!==t||0!==e.ci&&e.ci!==n&&e.ci!==t?e.ri%2===e.ci%2?"pbSquareInner style1":"pbSquareInner style2":"pbSquareInner EscapeHatch",a=e.c!==w?e.c:c.indexOf("RightArrow")>-1?"\u27a1":c.indexOf("DownArrow")>-1?"\u2b07":c.indexOf("CenterSquare")>-1?Object(s.jsx)("i",{className:"material-icons",children:"stars"}):".";return c.indexOf("EscapeHatch")>-1?Object(s.jsx)("button",{className:c,onClick:e.onClick,children:Object(s.jsx)("span",{className:"material-icons",children:"run_circle"})}):e.c===w?Object(s.jsx)("button",{className:c,onClick:e.onClick,children:a}):Object(s.jsx)("button",{className:c,onClick:e.onClick,children:Object(s.jsx)("div",{className:"pbSquareTileText ".concat(e.squareusedby+("Q"===e.c?" u":"")),children:a})})},P=function(e){var t=e.onClick,n=e.squares,c=e.usedby,a=e.rcd,r=e.racksize,i=function(e){return Object(s.jsxs)("tr",{className:"pbRow",children:[Object(s.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderLeft",children:O[e]}),n[e].map((function(n,i){return function(e,n,c,i){return Object(s.jsx)("td",{className:"pbSquareOuter",children:Object(s.jsx)(C,{c:c,ci:n,ri:e,squareusedby:i,rcd:a,onClick:function(){return t(e,n)},racksize:r})},"Square".concat(e,"-").concat(n))}(e,i,n,c[e][i])})),Object(s.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderRight",children:O[e]})]},"BoardRow".concat(e))};return Object(s.jsx)("table",{className:"pbBoard",children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{className:"pbBoardColumnHeaderRow",children:[Object(s.jsx)("td",{className:"pbBoardHeaderTopLeft",children:"\xa0"}),n.map((function(e,t){return Object(s.jsx)("td",{className:"pbBoardColumnHeader",children:h[t]},"TopColumnHeader".concat(t))})),Object(s.jsx)("td",{className:"pbBoardHeaderTopRight",children:"\xa0"})]}),n.map((function(e,t){return i(t)})),Object(s.jsxs)("tr",{className:"pbBoardColumnHeaderRow",id:"BoardHeaderBottom",children:[Object(s.jsx)("td",{className:"pbBoardHeaderBottomLeft",children:"\xa0"}),n.map((function(e,t){return Object(s.jsx)("td",{className:"pbBoardColumnHeader",children:h[t]},"BottomColumnHeader".concat(t))})),Object(s.jsx)("td",{className:"pbBoardHeaderBottomRight",children:"\xa0"})]})]})})},T=function(e){var t=e.isrejoin,n=e.prisonersOrGuards,r=e.gameid,o=e.nickname,l=e.wsmessage,d=e.client,u=e.racksize,b=u,m=2*u,N=6===u?g:7===u?x:5===u?v:f,S=Array(m+1).fill(Array(m+1).fill(w)),C=Array(m+1).fill(Array(m+1).fill(y)),T=Object(a.useState)(Object(c.a)(N)),q=T[0],B=T[1],M=Object(a.useState)([]),z=M[0],L=M[1],F=Object(a.useState)([]),H=F[0],D=F[1],J=Object(a.useState)(Object(c.a)(S)),U=J[0],_=J[1],X=Object(a.useState)(Object(c.a)(C)),K=X[0],Q=X[1],Y=Object(a.useState)(-1),W=Y[0],V=Y[1],Z=Object(a.useState)("P"),$=Z[0],ee=Z[1],te=Object(a.useState)([]),ne=te[0],se=te[1],ce=Object(a.useState)(0),ae=ce[0],re=ce[1],ie=Object(a.useState)([-1,-1,k]),oe=ie[0],le=ie[1],de=Object(a.useState)(!1),ue=de[0],be=de[1],je=Object(a.useState)([]),me=je[0],he=je[1],Oe=Object(a.useState)({squares:Object(c.a)(S),usedby:Object(c.a)(C),ptiles:[],gtiles:[]}),pe=Oe[0],fe=Oe[1],ve=Object(a.useState)(0),ge=ve[0],xe=ve[1],we=Object(a.useState)(!1),ye=we[0],ke=we[1],Ne=Object(a.useState)(""),Se=Ne[0],Ce=Ne[1],Pe=Object(a.useState)([]),Te=Pe[0],Ae=Pe[1];function Ie(){V(-1),ke(!1),le(-1,-1,k),se([])}Object(a.useEffect)((function(){var e=ge+1;e>=p.length&&(e=0),xe(e);var t=setInterval((function(){n!==$&&"X"!==$&&(console.log("Interval: prisonersOrGuards="+n+" whoseturn="+$+" at "+Date().toLocaleString()),De())}),2e4);return function(){return clearInterval(t)}}),[$]),Object(a.useEffect)((function(){if(t||"P"!==n)try{d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"requestgamedata",sender:n}))}catch(l){}else{for(var e=[],s=[],a=Object(c.a)(N);e.length<u;){var i=Math.floor(Math.random()*a.length);e.push(a[i]),a.splice(i,1),i=Math.floor(Math.random()*a.length),s.push(a[i]),a.splice(i,1)}e.sort(),s.sort(),D(s),L(e),B(a),fe({squares:Object(c.a)(S),usedby:Object(c.a)(C),ptiles:[].concat(e),gtiles:[].concat(s)}),d.send(JSON.stringify({type:"pb",func:"hello",sender:n,gameid:r,nickname:o,whoseturn:$,racksize:u}))}}),[]),Object(a.useEffect)((function(){""!==l&&function(e){var t=JSON.parse(e);if("announce"===t.type)d.send(JSON.stringify({type:"pb",func:"hello",sender:n,gameid:r,nickname:o,whoseturn:$,racksize:u}));else if(t.gameid===r&&"pb"===t.type&&(t.sender!=n&&""===Se&&t.nickname&&t.nickname.length>0&&Ce(t.nickname),"requestgamedata"===t.func&&t.sender!==n&&d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"providegamedata",sender:n,tiles:q,squares:U,ptiles:z,gtiles:H,usedby:K,whoseturn:$,snapshot:pe,passed:ue,moves:me,rescues:ae,racksize:u,allowRewind:ye})),"providegamedata"===t.func&&t.sender!==n&&$!==n&&"X"!==$&&(B(t.tiles),_(t.squares),L(t.ptiles),D(t.gtiles),Q(t.usedby),ee(t.whoseturn),fe(t.snapshot),be(t.passed),he(t.moves),re(t.rescues),ke(t.allowRewind)),"ept"===t.func&&"G"===n&&(Ie(),ee(t.whoseturn),_(t.squares),Q(t.usedby),L(t.ptiles),B(t.tiles),be(t.passed),he(t.moves),re(t.rescues),fe({squares:Object(c.a)(t.squares),usedby:Object(c.a)(t.usedby),ptiles:Object(c.a)(t.ptiles),gtiles:Object(c.a)(H)})),"egt"===t.func&&"P"===n&&(Ie(),ee(t.whoseturn),_(t.squares),Q(t.usedby),D(t.gtiles),B(t.tiles),be(t.passed),he(t.moves),fe({squares:Object(c.a)(t.squares),usedby:Object(c.a)(t.usedby),ptiles:Object(c.a)(z),gtiles:Object(c.a)(t.gtiles)})),"undoturn"===t.func&&t.sender!==n&&(Ie(),B(t.tiles),L(t.ptiles),D(t.gtiles),_(t.squares),Q(t.usedby),ee(t.whoseturn),re(t.rescues),be(t.passed),he(t.moves),fe(t.snapshot)),"allowundo"===t.func&&t.sender!==n&&ke(!0),"chat"===t.func&&t.sender!=n)){var s=[].concat(Object(c.a)(Te),[{from:t.nickname,msg:t.sendmsg}]);Ae(s)}}(l)}),[l]),Object(a.useEffect)((function(){R("ScrollableMoves")}),[me]),Object(a.useEffect)((function(){R("ScrollableChat")}),[Te]);var Ge=function(e,t,n,s){var a=Object(c.a)(U),r=Object(c.a)(K),i=Object(c.a)(z),o=Object(c.a)(H),l=Object(c.a)(U[e]),d=U[e][t],u=Object(c.a)(ne),b=String(e)+"-"+String(t),j=ne.indexOf(b);if(-1===n&&(n=W,s=oe),n>-1&&d===w){l[t]="P"===$?i[n]:o[n],a[e]=Object(c.a)(l),"P"===$?i.splice(n,1):o.splice(n,1);var m=Object(c.a)(r[e]);return m[t]=$,r[e]=Object(c.a)(m),"P"===$&&n===i.length&&(n-=1),"G"===$&&n===o.length&&(n-=1),V(n),_(a),Q(r),L(i),D(o),se([].concat(Object(c.a)(ne),[b])),void le(s)}if(j>-1){"P"===$?i.push(d):o.push(d);var h=Object(c.a)(a[e]);h[t]=w,a[e]=Object(c.a)(h);var O=Object(c.a)(r[e]);return O[t]=y,r[e]=Object(c.a)(O),V("P"===$?i.length-1:o.length-1),u.splice(j,1),_(a),Q(r),L(i),D(o),se(u),void le(-1,-1,k)}if(U[e][t]!==w);else{var p=oe[0]!==e||oe[1]!==t?"r":"r"===oe[2]?"d":"d"===oe[2]?k:"r";le(s=[e,t,p])}},Ee=function(e){V(W===e?-1:e)},Re=function(){if(Be()){for(var e=ze(),t=ae,s=["0-0","0-"+b,"0-"+m,b+"-0",b+"-"+m,m+"-0",m+"-"+b,m+"-"+m],a=0;a<ne.length;a++)s.indexOf(ne[a])>-1&&(t+=1);for(var i=Object(c.a)(z),l=Object(c.a)(q);i.length<u&&l.length>0;){var j=Math.floor(Math.random()*l.length);i.push(l[j]),l.splice(j,1)}i.sort();var h=i.length>0?"G":"X";K[0][0]!==y&&K[0][b]!==y&&K[0][m]!==y&&K[b][0]!==y&&K[b][m]!==y&&K[m][0]!==y&&K[m][b]!==y&&K[m][m]!==y&&(h="X");var O=Me(),p={by:"P",type:"PLAY",rewindInfo:e,mainword:O.mainword,extrawords:O.extrawords,pos:O.pos},f=[].concat(Object(c.a)(me),[p]);Ie(),ee(h),L(i),B(l),be(!1),he(f),re(t),fe({squares:Object(c.a)(U),usedby:Object(c.a)(K),ptiles:Object(c.a)(i),gtiles:Object(c.a)(H)}),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"ept",sender:n,squares:U,usedby:K,ptiles:i,tiles:l,whoseturn:h,racksize:u,passed:!1,moves:f,rescues:t}))}},qe=function(){if(Be()){for(var e=ze(),t=Object(c.a)(H),s=Object(c.a)(q);t.length<u&&s.length>0;){var a=Math.floor(Math.random()*s.length);t.push(s[a]),s.splice(a,1)}t.sort();var i=Object(c.a)(U),l=Object(c.a)(K),j=Object(c.a)(z),h=Object(c.a)(H),O=t.length>0?"P":"X";K[0][0]!==y&&K[0][b]!==y&&K[0][m]!==y&&K[b][0]!==y&&K[b][m]!==y&&K[m][0]!==y&&K[m][b]!==y&&K[m][m]!==y&&(O="X");var p=Me(),f={by:"G",type:"PLAY",rewindInfo:e,mainword:p.mainword,extrawords:p.extrawords,pos:p.pos},v=[].concat(Object(c.a)(me),[f]);Ie(),ee(O),D(t),B(s),be(!1),he(v),fe({squares:i,usedby:l,ptiles:j,gtiles:h}),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"egt",sender:n,squares:U,usedby:K,gtiles:t,tiles:s,passed:!1,moves:v,whoseturn:O,racksize:u}))}};function Be(){if(U[b][b]===w)return window.alert("First play must hit center square"),!1;for(var e=m+1,t=m+1,n=e,s=-1,c=t,a=-1,r=0;r<e;++r)for(var i=0;i<t;++i)if(U[r][i]!==w){if(!(r>0&&U[r-1][i]!==w)&&!(i>0&&U[r][i-1]!==w)&&!(r<m&&U[r+1][i]!==w)&&!(i<m&&U[r][i+1]!==w))return window.alert("Each played tile must be part of a word"),!1;pe.squares[r][i]===w&&(r<n&&(n=r),r>s&&(s=r),i<c&&(c=i),i>a&&(a=i))}if(n===e)return window.alert("You didn't play any tiles"),!1;if(n!==s&&c!==a)return window.alert("Tiles played must be in a straight line"),!1;var o=!1,l=!1;for(r=n;r<=s;++r)for(i=c;i<=a;++i){if(U[r][i]===w)return window.alert("There is a gap in your word"),!1;pe.squares[r][i]!==w&&(o=!0),n===s&&r>0&&U[r-1][i]!==w&&(l=!0),n===s&&r<m&&U[r+1][i]!==w&&(l=!0),c===a&&i>0&&U[r][i-1]!==w&&(l=!0),c===a&&i<m&&U[r][i+1]!==w&&(l=!0)}return n===s&&c>0&&pe.squares[n][c-1]!==w&&(o=!0),n===s&&a<m&&pe.squares[n][a+1]!==w&&(o=!0),c===a&&n>0&&pe.squares[n-1][c]!==w&&(o=!0),c===a&&s<m&&pe.squares[s+1][c]!==w&&(o=!0),!(!o&&!l&&pe.squares[b][b]!==w)||(window.alert("Words must be connected"),!1)}function Me(){for(var e="",t=[],n="",s=m+1,a=-1,r=m+1,i=-1,o=ne.length,l=0;l<o;++l){var d=parseInt(ne[l].split("-")[0]),u=parseInt(ne[l].split("-")[1]);d<s&&(s=d),d>a&&(a=d),u<r&&(r=u),u>i&&(i=u)}if(s<a||1===o){for(var b=r,j=s;j>0&&U[j-1][b]!==w;)j-=1;for(var p=a;p<m&&U[p+1][b]!==w;)p+=1;n=h[b]+O[j];for(var f=j;f<=p;++f){e+=U[f][b];var v=f+"-"+b;if(ne.indexOf(v)>-1){for(var g=b;g>0&&U[f][g-1]!==w;)g-=1;for(var x=b;x<m&&U[f][x+1]!==w;)x+=1;if(g<x){for(var y="",k=g;k<=x;++k)y+=U[f][k];t=[].concat(Object(c.a)(t),[y])}}}}if(e.length<2){for(var N=s,S=r;S>0&&U[N][S-1]!==w;)S-=1;for(var C=i;C<m&&U[N][C+1]!==w;)C+=1;n=O[N]+h[S],e="",t=[];for(var P=S;P<=C;++P){e+=U[N][P];var T=N+"-"+P;if(ne.indexOf(T)>-1){for(var A=N;A>0&&U[A-1][P]!==w;)A-=1;for(var I=N;I<m&&U[I+1][P]!==w;)I+=1;if(A<I){for(var G="",E=A;E<=I;++E)G+=U[E][P];t=[].concat(Object(c.a)(t),[G])}}}}return{mainword:e,extrawords:t,pos:n}}function ze(){return{squares:Object(c.a)(pe.squares),usedby:Object(c.a)(pe.usedby),rack:"G"===$?Object(c.a)(pe.gtiles):Object(c.a)(pe.ptiles),tiles:Object(c.a)(q),rescues:ae,passed:ue}}function Le(){ye||(ke(!0),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"allowundo",racksize:u,sender:n})))}function Fe(){var e=me.length,t=me[me.length-1],s=Object(c.a)(t.rewindInfo.squares),a=Object(c.a)(t.rewindInfo.usedby),i=Object(c.a)(t.rewindInfo.tiles),l="P"===t.by?Object(c.a)(t.rewindInfo.rack):Object(c.a)(z),b="G"===t.by?Object(c.a)(t.rewindInfo.rack):Object(c.a)(H),j=t.rewindInfo.rescues,m=t.by,h=Object(c.a)(me);h.splice(e-1,1);var O={squares:Object(c.a)(s),usedby:Object(c.a)(a),gtiles:Object(c.a)(b),ptiles:Object(c.a)(l)},p=t.passed;Ie(),B(i),L(l),D(b),_(s),Q(a),ee(m),re(j),be(p),he(h),fe(O),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"undoturn",racksize:u,sender:n,tiles:i,ptiles:l,gtiles:b,squares:s,usedby:a,whoseturn:m,rescues:j,passed:p,moves:h,snapshot:O}))}var He=function(){_(Object(c.a)(pe.squares)),Q(Object(c.a)(pe.usedby)),L(Object(c.a)(pe.ptiles)),D(Object(c.a)(pe.gtiles)),V(-1),se([]),le([-1,-1,k])},De=function(){d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",sender:n,whoseturn:$,racksize:u,func:"requestgamedata"}))};return Object(s.jsxs)("div",{className:"prisonbreak",children:[Object(s.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[Object(s.jsx)("div",{className:"w3-display-middle",children:Object(s.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),Object(s.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",r]}),Object(s.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ","P"===n?o:Se]}),Object(s.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:Object(s.jsx)(i.a,{href:"../../",children:Object(s.jsx)("a",{children:Object(s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})}),Object(s.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ","P"===n?Se:o]})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[Object(s.jsx)(A,{tiles:q,othertiles:"P"===n?H:z}),Object(s.jsx)(I,{moves:me})]}),Object(s.jsx)("div",{className:"col pbPlayerOuterSection",children:"P"===n?Object(s.jsx)(j.default,{racktiles:z,whoseturn:$,selection:W,onClick:function(e){return Ee(e)},onClickFinishTurn:function(){return Re()},onClickTileRecall:function(){return He()},onClickTileExchange:function(){return function(){if(q.length<u)window.alert("Need "+u+" tiles in the bag to exchange");else{for(var e=ze(),t=[],s=Object(c.a)(q);t.length<u&&s.length>0;){var a=Math.floor(Math.random()*s.length);t.push(s[a]),s.splice(a,1)}t.sort(),(s=[].concat(Object(c.a)(s),Object(c.a)(pe.ptiles))).sort();var i={by:"P",type:"SWAP",rewindInfo:e},l=[].concat(Object(c.a)(me),[i]);Ie(),_(Object(c.a)(pe.squares)),Q(Object(c.a)(pe.usedby)),ee("G"),L(t),B(s),be(!1),he(l),fe({squares:Object(c.a)(pe.squares),usedby:Object(c.a)(pe.usedby),ptiles:[].concat(t),gtiles:Object(c.a)(H)}),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"ept",sender:n,whoseturn:"G",racksize:u,squares:pe.squares,usedby:pe.usedby,ptiles:t,tiles:s,passed:!1,moves:l,rescues:ae}))}}()},onClickPassPlay:function(){return function(){var e=ze(),t=ue?"X":"G",s={by:"P",type:"PASS",rewindInfo:e},a=[].concat(Object(c.a)(me),[s]);He(),Ie(),ee(t),be(!0),he(a),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"ept",sender:n,squares:pe.squares,usedby:pe.usedby,ptiles:pe.ptiles,tiles:q,whoseturn:t,racksize:u,passed:!0,moves:a,rescues:ae}))}()},onClickUndoLastPlay:function(){return Fe()},onClickAllowUndo:function(){return Le()},prisonersOrGuards:n,moves:me,allowRewind:ye}):Object(s.jsx)(j.default,{racktiles:H,whoseturn:$,selection:W,onClick:function(e){return Ee(e)},onClickFinishTurn:function(){return qe()},onClickTileRecall:function(){return He()},onClickTileExchange:function(){return function(){if(q.length<u)window.alert("Need "+u+" tiles in the bag to exchange");else{for(var e=ze(),t=[],s=Object(c.a)(q);t.length<u&&s.length>0;){var a=Math.floor(Math.random()*s.length);t.push(s[a]),s.splice(a,1)}t.sort(),(s=[].concat(Object(c.a)(s),Object(c.a)(pe.gtiles))).sort();var i={by:"G",type:"SWAP",rewindInfo:e},l=[].concat(Object(c.a)(me),[i]);Ie(),_(Object(c.a)(pe.squares)),Q(Object(c.a)(pe.usedby)),ee("P"),D(t),B(s),be(!1),he(l),fe({squares:Object(c.a)(pe.squares),usedby:Object(c.a)(pe.usedby),ptiles:Object(c.a)(z),gtiles:[].concat(t)}),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"egt",sender:n,whoseturn:"P",racksize:u,squares:pe.squares,usedby:pe.usedby,gtiles:t,tiles:s,passed:!1,moves:l}))}}()},onClickPassPlay:function(){return function(){var e=ze(),t=ue?"X":"P",s={by:"G",type:"PASS",rewindInfo:e},a=[].concat(Object(c.a)(me),[s]);He(),Ie(),ee(t),be(!0),he(a),d.send(JSON.stringify({gameid:r,nickname:o,type:"pb",func:"egt",sender:n,squares:pe.squares,usedby:pe.usedby,gtiles:pe.gtiles,tiles:q,whoseturn:t,racksize:u,passed:!0,moves:a}))}()},onClickUndoLastPlay:function(){return Fe()},onClickAllowUndo:function(){return Le()},prisonersOrGuards:n,moves:me,allowRewind:ye})}),Object(s.jsx)("div",{className:"col",children:n===$?Object(s.jsx)("div",{className:"row",onKeyDownCapture:function(e){if(e.preventDefault(),n===$)if("Enter"!==e.key)if("Escape"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var t=e.key.toUpperCase(),s="P"===$?z:H,a=s.indexOf(t);if(-1===a&&(a=s.indexOf("?")),a>-1){var r=oe[0],i=oe[1],o=oe[2];if(r>-1&&i>-1&&o!==k){if("r"===o){for(var l=-1,d=i+1;d<m+1&&-1===l;d++)U[r][d]===w&&(l=d);return Ge(r,i,a,-1===l?[-1,-1,k]:[r,l,"r"]),void V(-1)}if("d"===o){for(var b=-1,j=2*u+1,h=r+1;h<j&&-1===b;h++)U[h][i]===w&&(b=h);return Ge(r,i,a,-1===b?[-1,-1,k]:[b,i,"d"]),void V(-1)}}}}else if("Backspace"===e.key&&ne.length>0){var O=ne[ne.length-1],p=Object(c.a)(ne),f=Object(c.a)(z),v=Object(c.a)(H),g=Object(c.a)(K),x=Object(c.a)(U),N=[-1,-1,k],S=W;p.splice(ne.length-1,1);var C=parseInt(O.split("-")[0]),P=parseInt(O.split("-")[1]),T=U[C][P];"P"===$?(f.push(T),S=f.length-1):(v.push(T),S=v.length-1),g[C][P]=y,x[C][P]=w;var A=oe[2];A!==k&&(N=[C,P,A],1===ne.length&&(S=-1)),se(p),D(v),L(f),_(x),Q(g),le(N),V(S)}}else He();else"P"===$?Re():qe()},children:Object(s.jsx)(P,{squares:U,usedby:K,rcd:oe,onClick:function(e,t){return Ge(e,t,-1,null)},racksize:u})}):Object(s.jsx)("div",{className:"row",children:Object(s.jsx)(P,{squares:U,usedby:K,rcd:oe,onClick:function(){},racksize:u})})}),Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)(G,{rescues:ae}),Object(s.jsx)(E,{gameid:r,client:d,nickname:o,msgs:Te,setMsgs:Ae,prisonersOrGuards:n})]})]}),Object(s.jsx)("div",{className:"w3-display-container w3-teal topBarHeight",children:Object(s.jsx)("div",{className:"w3-display-middle commonFontFamily",children:"X"===$?Object(s.jsx)("h1",{children:"Game Over!"}):Object(s.jsx)("p",{children:p[ge]})})})]})},A=function(e){var t=[].concat(Object(c.a)(e.tiles),Object(c.a)(e.othertiles));return t.sort(),"?"===t[0]&&(t.splice(0,1),t.push("?")),"?"===t[0]&&(t.splice(0,1),t.push("?")),Object(s.jsxs)("div",{className:"pbTilepool",children:[Object(s.jsx)("div",{className:"pbTilepoolTitle",children:"TILES"}),t.map((function(e,n){return Object(s.jsxs)("span",{children:[n>0&&e!==t[n-1]?Object(s.jsx)("span",{className:"pbTilepoolDivider"}):Object(s.jsx)(s.Fragment,{}),Object(s.jsx)("span",{className:"Q"===e?"pbTilepoolTile u":"pbTilepoolTile",children:e})]},"tile".concat(n))}))]})},I=function(e){return Object(s.jsxs)("div",{className:"pbMoves",children:[Object(s.jsx)("div",{className:"pbMovesTitle",children:"MOVES"}),Object(s.jsx)("div",{className:"pbMovesScrollable",id:"ScrollableMoves",children:e.moves.map((function(e,t){var n;return Object(s.jsxs)("div",{className:"pbMove",children:[Object(s.jsx)("span",{className:"pbMove by",children:e.by}),":",Object(s.jsx)("span",{className:"pbMove ".concat(e.type),children:"PLAY"===e.type?Object(s.jsxs)(s.Fragment,{children:[e.pos," ",e.mainword.replace("Q","Qu"),null===(n=e.extrawords)||void 0===n?void 0:n.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[",\xa0",e.replace("Q","Qu")]})}))]}):Object(s.jsx)(s.Fragment,{})})]},"move".concat(t))}))})]})},G=function(e){return Object(s.jsxs)("div",{className:"pbRescuesMade w3-animate-right",children:["Rescues made: ",e.rescues]})},E=function(e){var t=e.gameid,n=e.client,r=e.nickname,i=e.msgs,o=e.setMsgs,l=e.prisonersOrGuards,d=Object(a.useState)(""),u=d[0],b=d[1];return Object(s.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:Object(s.jsx)("table",{className:"pbChatTable",children:Object(s.jsxs)("tbody",{children:[i.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"pbChatFrom",children:e.from}),Object(s.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(t))})),Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:"2",children:Object(s.jsx)("textarea",{className:""===u?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:u,onChange:function(e){b(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&u.length>0){e.preventDefault();var s=[].concat(Object(c.a)(i),[{from:r,msg:u}]),a=u;return o(s),b(""),void n.send(JSON.stringify({gameid:t,nickname:r,type:"pb",func:"chat",sender:l,sendmsg:a}))}if("Backspace"===e.key&&u.length>0){e.preventDefault();var d=u.slice(0,u.length-1);b(d)}},placeholder:"chat..."})})})]})})})},R=function(e){var t=document.getElementById(e);t.scrollTop=t.scrollHeight}},vNVm:function(e,t,n){"use strict";var s=n("J4zp"),c=n("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!i,c=(0,a.useRef)(),l=(0,a.useState)(!1),d=s(l,2),u=d[0],b=d[1],j=(0,a.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),n||u||e&&e.tagName&&(c.current=function(e,t,n){var s=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var s=new Map,c=new IntersectionObserver((function(e){e.forEach((function(e){var t=s.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:c,elements:s}),n}(n),c=s.id,a=s.observer,r=s.elements;return r.set(e,t),a.observe(e),function(){r.delete(e),a.unobserve(e),0===r.size&&(a.disconnect(),o.delete(c))}}(e,(function(e){return e&&b(e)}),{rootMargin:t}))}),[n,t,u]);return(0,a.useEffect)((function(){i||u||(0,r.default)((function(){return b(!0)}))}),[u]),[j,u]};var a=n("q1tI"),r=c(n("0G5g")),i="undefined"!==typeof IntersectionObserver;var o=new Map}},[["dsDM",0,1,2,3]]]);