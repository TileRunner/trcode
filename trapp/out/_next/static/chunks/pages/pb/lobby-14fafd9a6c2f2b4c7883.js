(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{6595:function(e,n,t){"use strict";t.d(n,{v8:function(){return r},RH:function(){return a},dK:function(){return i},ap:function(){return c},b6:function(){return s},kX:function(){return o},Ov:function(){return l},Bd:function(){return d},_k:function(){return u},g9:function(){return m},Ji:function(){return h},jN:function(){return f},bS:function(){return b},Ix:function(){return p},Am:function(){return v},oW:function(){return w},ik:function(){return x},QY:function(){return j},i4:function(){return N},_W:function(){return g},$B:function(){return k},fl:function(){return y},Cr:function(){return E},L8:function(){return I},Qt:function(){return S},fi:function(){return C},ix:function(){return R},me:function(){return A},WS:function(){return L},GP:function(){return O}});var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],a=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],i="U",c="P",s="G",o=c,l=s,d="X",u="run_circle",m="security",h="PRISONERS",f="GUARDS",b="PLAY",p="SWAP",v="PASS",w="r",x="d",j="",N="",g=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],k=2e4,y=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],E=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],I=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],S=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],C="EscapeHatch",R="CenterSquare",A="style1",L="style2",O=""},3939:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var r=function(e){var n=document.getElementById(e);n.scrollTop=n.scrollHeight}},6071:function(e,n,t){"use strict";var r=t(3848),a=t(9448);n.default=void 0;var i=a(t(7294)),c=t(1689),s=t(2441),o=t(5749),l={};function d(e,n,t,r){if(e&&(0,c.isLocalURL)(n)){e.prefetch(n,t,r).catch((function(e){0}));var a=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;l[n+"%"+t+(a?"%"+a:"")]=!0}}var u=function(e){var n=!1!==e.prefetch,t=(0,s.useRouter)(),a=t&&t.asPath||"/",u=i.default.useMemo((function(){var n=(0,c.resolveHref)(a,e.href,!0),t=r(n,2),i=t[0],s=t[1];return{href:i,as:e.as?(0,c.resolveHref)(a,e.as):s||i}}),[a,e.href,e.as]),m=u.href,h=u.as,f=e.children,b=e.replace,p=e.shallow,v=e.scroll,w=e.locale;"string"===typeof f&&(f=i.default.createElement("a",null,f));var x=i.Children.only(f),j=x&&"object"===typeof x&&x.ref,N=(0,o.useIntersection)({rootMargin:"200px"}),g=r(N,2),k=g[0],y=g[1],E=i.default.useCallback((function(e){k(e),j&&("function"===typeof j?j(e):"object"===typeof j&&(j.current=e))}),[j,k]);(0,i.useEffect)((function(){var e=y&&n&&(0,c.isLocalURL)(m),r="undefined"!==typeof w?w:t&&t.locale,a=l[m+"%"+h+(r?"%"+r:"")];e&&!a&&d(t,m,h,{locale:r})}),[h,m,y,w,n,t]);var I={ref:E,onClick:function(e){x.props&&"function"===typeof x.props.onClick&&x.props.onClick(e),e.defaultPrevented||function(e,n,t,r,a,i,s,o){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,c.isLocalURL)(t))&&(e.preventDefault(),null==s&&(s=r.indexOf("#")<0),n[a?"replace":"push"](t,r,{shallow:i,locale:o,scroll:s}))}(e,t,m,h,b,p,v,w)},onMouseEnter:function(e){(0,c.isLocalURL)(m)&&(x.props&&"function"===typeof x.props.onMouseEnter&&x.props.onMouseEnter(e),d(t,m,h,{priority:!0}))}};if(e.passHref||"a"===x.type&&!("href"in x.props)){var S="undefined"!==typeof w?w:t&&t.locale,C=t&&t.isLocaleDomain&&(0,c.getDomainLocale)(h,S,t&&t.locales,t&&t.domainLocales);I.href=C||(0,c.addBasePath)((0,c.addLocale)(h,S,t&&t.defaultLocale))}return i.default.cloneElement(x,I)};n.default=u},5749:function(e,n,t){"use strict";var r=t(3848);n.__esModule=!0,n.useIntersection=function(e){var n=e.rootMargin,t=e.disabled||!c,o=(0,a.useRef)(),l=(0,a.useState)(!1),d=r(l,2),u=d[0],m=d[1],h=(0,a.useCallback)((function(e){o.current&&(o.current(),o.current=void 0),t||u||e&&e.tagName&&(o.current=function(e,n,t){var r=function(e){var n=e.rootMargin||"",t=s.get(n);if(t)return t;var r=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var n=r.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return s.set(n,t={id:n,observer:a,elements:r}),t}(t),a=r.id,i=r.observer,c=r.elements;return c.set(e,n),i.observe(e),function(){c.delete(e),i.unobserve(e),0===c.size&&(i.disconnect(),s.delete(a))}}(e,(function(e){return e&&m(e)}),{rootMargin:n}))}),[t,n,u]);return(0,a.useEffect)((function(){if(!c&&!u){var e=(0,i.requestIdleCallback)((function(){return m(!0)}));return function(){return(0,i.cancelIdleCallback)(e)}}}),[u]),[h,u]};var a=t(7294),i=t(8391),c="undefined"!==typeof IntersectionObserver;var s=new Map},7666:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(1385),i=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,c=e.client,s=e.nickname,o=e.msgs,l=void 0===o?[]:o,d=e.setMsgs,u=e.participant,m=void 0===u?"":u,h=(0,i.useState)(""),f=h[0],b=h[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,r.jsx)("table",{className:"pbChatTable",children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pbChatFrom",children:e.from}),(0,r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(n))})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===s?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===f?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:f,onChange:function(e){b(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&f.length>0){e.preventDefault();var n=[].concat((0,a.Z)(l),[{from:s,msg:f}]),r=f;return d(n),b(""),void c.send({gameid:t,nickname:s,type:"pb",func:"chat",sender:m,sendmsg:r})}if("Backspace"===e.key&&f.length>0){e.preventDefault();var i=f.slice(0,f.length-1);b(i)}},placeholder:"chat..."})})})]})})})}},5916:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(1385),i=t(7294),c=t(1664),s=t(7666),o=t(6595),l=t(3939),d="w3-button w3-border w3-blue w3-hover-black w3-round";n.default=function(e){var n=e.client,t=e.setIsrejoin,u=e.wsmessage,m=e.gameid,h=e.setGameid,f=e.nickname,b=e.setNickname,p=e.setParticipant,v=e.racksize,w=e.setRacksize,x=(0,i.useState)([]),j=x[0],N=x[1],g=(0,i.useState)([]),k=g[0],y=g[1];function E(e){return function(e){for(var n=0;n<j.length;++n)if(j[n].gameid===e)return n;return-1}(e)>-1}function I(e){return 0===f.length||e.whoseturn===o.Bd?0:e.gname?e.gname===f?2:0:1}function S(e){w(e)}return(0,i.useEffect)((function(){""!==u&&function(e){var n=JSON.parse(e);if("pb"===n.type&&"chat"===n.func&&!n.gameid&&n.nickname!==f){var t=[].concat((0,a.Z)(k),[{from:n.nickname,msg:n.sendmsg}]);return void y(t)}if("pb"===n.type&&"gamelist"===n.func){var r=[];n.gamelist.forEach((function(e){var n={gameid:e.gameid,pname:e.pname,gname:e.gname,gamestatus:e.whoseturn===o.Bd?"Game over":"Unfinished",racksize:e.racksize};r.push(n)})),N([].concat(r))}}(u)}),[u]),(0,i.useEffect)((function(){(0,l.O)("ScrollableChat")}),[k]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[(0,r.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Prison Break Lobby"}),(0,r.jsx)("div",{className:"w3-bar-item w3-right",children:(0,r.jsx)(c.default,{href:"../../",children:(0,r.jsx)("a",{children:(0,r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),(0,r.jsxs)("div",{className:"w3-row",children:[(0,r.jsxs)("div",{className:"w3-col s9",children:[(0,r.jsx)("div",{className:"w3-container",children:(0,r.jsxs)("div",{className:"w3-bar",children:[(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("span",{className:"pbPlayerTitle",children:"All Participants ~"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("b",{children:"Nickname:"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:f,onChange:function(e){b(e.target.value)}})})]})}),(0,r.jsx)("div",{className:"w3-container",children:(0,r.jsxs)("div",{className:"w3-bar",children:[(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("span",{className:"pbPlayerTitle",children:"Prisoners ~"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("b",{children:"Game ID:"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:m,onChange:function(e){h(e.target.value)}})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("b",{children:"Rack Size:"})})}),(0,r.jsxs)("div",{className:"w3-bar-item",children:[(0,r.jsxs)("div",{className:"w3-row",children:[(0,r.jsx)("button",{id:"selectracksize4",className:4===v?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),(0,r.jsx)("button",{id:"selectracksize5",className:5===v?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),(0,r.jsx)("button",{id:"selectracksize6",className:6===v?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),(0,r.jsx)("button",{id:"selectracksize7",className:7===v?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"})]}),(0,r.jsx)("div",{className:"w3-row",children:(0,r.jsxs)("span",{className:"pbLobbyCellBlockInfo",children:[v," letter racks, ",2*v+1," x ",2*v+1," board."]})})]}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("button",{id:"startgame",className:d,onClick:function(){0===f.length?window.alert("Please enter nickname before starting a game"):m.length>0?E(m)?window.alert("Game already started with that id"):p(o.ap):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),(0,r.jsx)("div",{className:"w3-container",children:(0,r.jsxs)("div",{className:"w3-bar",children:[(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{children:(0,r.jsx)("span",{className:"pbPlayerTitle",children:"Guards ~"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("span",{className:"myCommonFont",children:(0,r.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),(0,r.jsx)("div",{className:"w3-container",children:(0,r.jsxs)("div",{className:"w3-bar",children:[(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h1",{children:(0,r.jsx)("i",{className:"material-icons w3-right",children:"report_problem"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{className:"myCommonFont",children:'If you lost connection, find and click the "Reconnect" button for your nickname.'})})]})}),(0,r.jsx)("div",{className:"w3-container",children:(0,r.jsxs)("div",{className:"w3-bar",children:[(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsx)("h3",{className:"myCommonFont",children:(0,r.jsx)("b",{children:"Game list:"})})}),(0,r.jsx)("div",{className:"w3-bar-item",children:(0,r.jsxs)("table",{className:"w3-table-all w3-card-4",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[(0,r.jsx)("th",{className:"w3-border-right",children:"Game ID"}),(0,r.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),(0,r.jsx)("th",{className:"w3-border-right",children:"Guards"}),(0,r.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),(0,r.jsx)("th",{children:"Game Status"})]})}),(0,r.jsx)("tbody",{children:j.map((function(e,n){return(0,r.jsxs)("tr",{className:"myCommonFont w3-hover-green",children:[(0,r.jsx)("td",{className:"w3-border-right",children:(0,r.jsx)("b",{children:e.gameid})}),2===(a=e,0===f.length||a.whoseturn===o.Bd?0:a.pname===f?2:0)?(0,r.jsx)("td",{id:"PrisonersRejoin".concat(n),className:"w3-border-right",children:(0,r.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){t(!0),h(e.gameid),p(o.ap),w(e.racksize)},children:"Reconnect"})}):(0,r.jsx)("td",{id:"PrisonersNoAction".concat(n),className:"w3-border-right",children:"No action available"}),2===I(e)?(0,r.jsx)("td",{id:"GuardsRejoin".concat(n),className:"w3-border-right",children:(0,r.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){t(!0),h(e.gameid),p(o.b6),w(e.racksize)},children:"Reconnect"})}):1===I(e)?(0,r.jsx)("td",{id:"GuardsJoin".concat(n),className:"w3-border-right",children:(0,r.jsx)("button",{className:d,onClick:function(){h(e.gameid),p(o.b6),w(e.racksize)},children:"Join Game"})}):(0,r.jsx)("td",{id:"GuardsNoAction".concat(n),className:"w3-border-right",children:"No action available"}),(0,r.jsx)("td",{id:"RackSize".concat(n),className:"w3-center w3-border-right",children:e.racksize}),(0,r.jsx)("td",{id:"GameStatus".concat(n),children:e.gamestatus})]},"OtherGame".concat(n));var a}))})]})})]})})]}),(0,r.jsx)("div",{className:"w3-col s3",children:(0,r.jsx)(s.default,{client:n,nickname:f,msgs:k,setMsgs:y})})]}),(0,r.jsx)("div",{className:"w3-container w3-teal",children:(0,r.jsx)("h1",{children:"Have fun!"})})]})}},4698:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/lobby",function(){return t(5916)}])},1664:function(e,n,t){e.exports=t(6071)},1385:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return a}})}},function(e){e.O(0,[774,888,179],(function(){return n=4698,e(e.s=n);var n}));var n=e.O();_N_E=n}]);