_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{EzCb:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"s",(function(){return a})),n.d(t,"r",(function(){return i})),n.d(t,"q",(function(){return s})),n.d(t,"B",(function(){return o})),n.d(t,"A",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"n",(function(){return u})),n.d(t,"m",(function(){return b})),n.d(t,"p",(function(){return m})),n.d(t,"o",(function(){return j})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"y",(function(){return w})),n.d(t,"h",(function(){return x})),n.d(t,"t",(function(){return y})),n.d(t,"u",(function(){return N})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return E})),n.d(t,"x",(function(){return I})),n.d(t,"i",(function(){return S})),n.d(t,"g",(function(){return A})),n.d(t,"a",(function(){return C}));var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],c=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],a="U",i="P",s="G",o=i,l=s,d="X",u="run_circle",b="security",m="PRISONERS",j="GUARDS",h="PLAY",f="SWAP",p="PASS",O="r",v="d",g="",w="",x=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],y=2e4,N=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],k=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],E=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],I=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],S="";function A(e){for(var t=2*e+1,n=Array(t),r=0;r<t;++r){for(var c=Array(t),a=0;a<t;++a){var i={row:r,col:a,type:"style2",usedby:w,letter:S};r===e&&a===e?i.type="CenterSquare":r%e===0&&a%e===0?i.type="EscapeHatch":r%2===a%2&&(i.type="style1"),c[a]=i}n[r]=[].concat(c)}return n}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(e.length-1)/2,n=2*t,r=t,c=!0;return e[0][0].usedby!==w&&e[0][r].usedby!==w&&e[0][n].usedby!==w&&e[r][0].usedby!==w&&e[r][n].usedby!==w&&e[n][0].usedby!==w&&e[n][r].usedby!==w&&e[n][n].usedby!==w&&(c=!1),c}},Jbs4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/lobby",function(){return n("M+XG")}])},KQm4:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return c}))},"M+XG":function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("KQm4"),a=n("q1tI"),i=n("YFqc"),s=n.n(i),o=n("gx3M"),l=n("EzCb"),d="w3-button w3-border w3-blue w3-hover-black w3-round",u=function(e){var t=document.getElementById(e);t.scrollTop=t.scrollHeight};t.default=function(e){var t=e.client,n=e.setIsrejoin,i=e.wsmessage,b=e.gameid,m=e.setGameid,j=e.nickname,h=e.setNickname,f=e.setParticipant,p=e.racksize,O=e.setRacksize,v=Object(a.useState)([]),g=v[0],w=v[1],x=Object(a.useState)([]),y=x[0],N=x[1];function k(e){for(var t=0;t<g.length;++t)if(g[t].gameid===e)return t;return-1}function E(e){return 0===j.length||"Game over"===e.gamestatus?0:e.playingG?e.nicknameG===j?2:0:1}function I(e){O(e)}return Object(a.useEffect)((function(){""!==i&&function(e){var t=JSON.parse(e);if("pb"===t.type&&"chat"===t.func&&!t.gameid&&t.nickname!==j){var n=[].concat(Object(c.a)(y),[{from:t.nickname,msg:t.sendmsg}]);return void N(n)}var r=t.gameid,a=t.nickname,i=t.whoseturn,s=t.racksize;if(r&&r.length>0&&s&&i&&i.length>0){var o=!1,d=t.sender,u=Object(c.a)(g),b=k(r),m=d===l.r||b>-1&&g[b].playingP,h=d===l.q||b>-1&&g[b].playingG,f=s,p="Unknown";i===l.z?p="Game over":i===l.B?p="Prisoners turn":i===l.A&&(p="Guards turn");var O={gameid:r,nicknameP:d===l.r?a:b>-1?g[b].nicknameP:"",nicknameG:d===l.q?a:b>-1?g[b].nicknameG:"",gamestatus:p,playingP:m,playingG:h,racksize:f};if(b<0)o=!0,u=[].concat(Object(c.a)(u),[O]);else{var v=g[b];v.nicknameP===O.nicknameP&&v.nicknameG===O.nicknameG&&v.gamestatus===O.gamestatus&&v.playingP===O.playingP&&v.playingG===O.playingG&&v.racksize===O.racksize||(o=!0,u[b]=O)}o&&w(u)}}(i)}),[i]),Object(a.useEffect)((function(){u("ScrollableChat")}),[y]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[Object(r.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Prison Break Lobby"}),Object(r.jsx)("div",{className:"w3-bar-item w3-right",children:Object(r.jsx)(s.a,{href:"../../",children:Object(r.jsx)("a",{children:Object(r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(r.jsxs)("div",{className:"w3-row",children:[Object(r.jsxs)("div",{className:"w3-col s9",children:[Object(r.jsx)("div",{className:"w3-container",children:Object(r.jsxs)("div",{className:"w3-bar",children:[Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("span",{className:"pbPlayerTitle",children:"All Participants ~"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("b",{children:"Nickname:"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:j,onChange:function(e){h(e.target.value)}})})]})}),Object(r.jsx)("div",{className:"w3-container",children:Object(r.jsxs)("div",{className:"w3-bar",children:[Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("span",{className:"pbPlayerTitle",children:"Prisoners ~"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("b",{children:"Game ID:"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:b,onChange:function(e){m(e.target.value)}})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("b",{children:"Rack Size:"})})}),Object(r.jsxs)("div",{className:"w3-bar-item",children:[Object(r.jsxs)("div",{className:"w3-row",children:[Object(r.jsx)("button",{id:"selectracksize4",className:4===p?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return I(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),Object(r.jsx)("button",{id:"selectracksize5",className:5===p?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return I(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),Object(r.jsx)("button",{id:"selectracksize6",className:6===p?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return I(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),Object(r.jsx)("button",{id:"selectracksize7",className:7===p?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return I(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"})]}),Object(r.jsx)("div",{className:"w3-row",children:Object(r.jsxs)("span",{className:"pbLobbyCellBlockInfo",children:[p," letter racks, ",2*p+1," x ",2*p+1," board."]})})]}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("button",{id:"startgame",className:d,onClick:function(){0===j.length?window.alert("Please enter nickname before starting a game"):b.length>0?!function(e){var t=k(e);return!(t<0)&&g[t].playingP}(b)?f(l.r):window.alert("Prisoners already playing that game"):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),Object(r.jsx)("div",{className:"w3-container",children:Object(r.jsxs)("div",{className:"w3-bar",children:[Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{children:Object(r.jsx)("span",{className:"pbPlayerTitle",children:"Guards ~"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("span",{className:"myCommonFont",children:Object(r.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),Object(r.jsx)("div",{className:"w3-container",children:Object(r.jsxs)("div",{className:"w3-bar",children:[Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h1",{children:Object(r.jsx)("i",{className:"material-icons w3-right",children:"report_problem"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{className:"myCommonFont",children:'If you lost connection, find and click the "Reconnect" button for your game id.'})})]})}),Object(r.jsx)("div",{className:"w3-container",children:Object(r.jsxs)("div",{className:"w3-bar",children:[Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsx)("h3",{className:"myCommonFont",children:Object(r.jsx)("b",{children:"Game list:"})})}),Object(r.jsx)("div",{className:"w3-bar-item",children:Object(r.jsxs)("table",{className:"w3-table-all w3-card-4",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[Object(r.jsx)("th",{className:"w3-border-right",children:"Game ID"}),Object(r.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),Object(r.jsx)("th",{className:"w3-border-right",children:"Guards"}),Object(r.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),Object(r.jsx)("th",{children:"Game Status"})]})}),Object(r.jsx)("tbody",{children:g.map((function(e,t){return Object(r.jsxs)("tr",{className:"myCommonFont w3-hover-green",children:[Object(r.jsx)("td",{className:"w3-border-right",children:Object(r.jsx)("b",{children:e.gameid})}),2===(c=e,0===j.length||"Game over"===c.gamestatus||c.playingP||c.nicknameP!==j?0:2)?Object(r.jsx)("td",{id:"PrisonersRejoin".concat(t),className:"w3-border-right",children:Object(r.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){n(!0),m(e.gameid),f(l.r),O(e.racksize)},children:"Reconnect"})}):Object(r.jsx)("td",{id:"PrisonersNoAction".concat(t),className:"w3-border-right",children:"No action available"}),2===E(e)?Object(r.jsx)("td",{id:"GuardsRejoin".concat(t),className:"w3-border-right",children:Object(r.jsx)("button",{className:d,onClick:function(){n(!0),m(e.gameid),f(l.q),O(e.racksize)},children:"Reconnect"})}):1===E(e)?Object(r.jsx)("td",{id:"GuardsJoin".concat(t),className:"w3-border-right",children:Object(r.jsx)("button",{className:d,onClick:function(){m(e.gameid),f(l.q),O(e.racksize)},children:"Join Game"})}):Object(r.jsx)("td",{id:"GuardsNoAction".concat(t),className:"w3-border-right",children:"No action available"}),Object(r.jsx)("td",{id:"RackSize".concat(t),className:"w3-center w3-border-right",children:e.racksize}),Object(r.jsx)("td",{id:"GameStatus".concat(t),children:e.gamestatus})]},"OtherGame".concat(t));var c}))})]})})]})})]}),Object(r.jsx)("div",{className:"w3-col s3",children:Object(r.jsx)(o.default,{client:t,nickname:j,msgs:y,setMsgs:N})})]}),Object(r.jsx)("div",{className:"w3-container w3-teal",children:Object(r.jsx)("h1",{children:"Have fun!"})})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("J4zp"),c=n("284h");t.__esModule=!0,t.default=void 0;var a=c(n("q1tI")),i=n("elyg"),s=n("nOHt"),o=n("vNVm"),l={};function d(e,t,n,r){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,n,r).catch((function(e){0}));var c=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;l[t+"%"+n+(c?"%"+c:"")]=!0}}var u=function(e){var t=!1!==e.prefetch,n=(0,s.useRouter)(),c=n&&n.pathname||"/",u=a.default.useMemo((function(){var t=(0,i.resolveHref)(c,e.href,!0),n=r(t,2),a=n[0],s=n[1];return{href:a,as:e.as?(0,i.resolveHref)(c,e.as):s||a}}),[c,e.href,e.as]),b=u.href,m=u.as,j=e.children,h=e.replace,f=e.shallow,p=e.scroll,O=e.locale;"string"===typeof j&&(j=a.default.createElement("a",null,j));var v=a.Children.only(j),g=v&&"object"===typeof v&&v.ref,w=(0,o.useIntersection)({rootMargin:"200px"}),x=r(w,2),y=x[0],N=x[1],k=a.default.useCallback((function(e){y(e),g&&("function"===typeof g?g(e):"object"===typeof g&&(g.current=e))}),[g,y]);(0,a.useEffect)((function(){var e=N&&t&&(0,i.isLocalURL)(b),r="undefined"!==typeof O?O:n&&n.locale,c=l[b+"%"+m+(r?"%"+r:"")];e&&!c&&d(n,b,m,{locale:r})}),[m,b,N,O,t,n]);var E={ref:k,onClick:function(e){v.props&&"function"===typeof v.props.onClick&&v.props.onClick(e),e.defaultPrevented||function(e,t,n,r,c,a,s,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=r.indexOf("#")<0),t[c?"replace":"push"](n,r,{shallow:a,locale:o,scroll:s}).then((function(e){e&&s&&document.body.focus()})))}(e,n,b,m,h,f,p,O)},onMouseEnter:function(e){(0,i.isLocalURL)(b)&&(v.props&&"function"===typeof v.props.onMouseEnter&&v.props.onMouseEnter(e),d(n,b,m,{priority:!0}))}};if(e.passHref||"a"===v.type&&!("href"in v.props)){var I="undefined"!==typeof O?O:n&&n.locale,S=(0,i.getDomainLocale)(m,I,n&&n.locales,n&&n.domainLocales);E.href=S||(0,i.addBasePath)((0,i.addLocale)(m,I,n&&n.defaultLocale))}return a.default.cloneElement(v,E)};t.default=u},gx3M:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("KQm4"),a=n("q1tI");t.default=function(e){var t=e.gameid,n=void 0===t?"":t,i=e.client,s=e.nickname,o=e.msgs,l=void 0===o?[]:o,d=e.setMsgs,u=e.participant,b=void 0===u?"":u,m=Object(a.useState)(""),j=m[0],h=m[1];return Object(r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:Object(r.jsx)("table",{className:"pbChatTable",children:Object(r.jsxs)("tbody",{children:[l.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{className:"pbChatFrom",children:e.from}),Object(r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(t))})),Object(r.jsx)("tr",{children:Object(r.jsx)("td",{colSpan:"2",children:""===s?Object(r.jsx)("span",{children:"Please enter nickname to use chat"}):Object(r.jsx)("textarea",{className:""===j?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:j,onChange:function(e){h(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&j.length>0){e.preventDefault();var t=[].concat(Object(c.a)(l),[{from:s,msg:j}]),r=j;return d(t),h(""),void i.send({gameid:n,nickname:s,type:"pb",func:"chat",sender:b,sendmsg:r})}if("Backspace"===e.key&&j.length>0){e.preventDefault();var a=j.slice(0,j.length-1);h(a)}},placeholder:"chat..."})})})]})})})}},vNVm:function(e,t,n){"use strict";var r=n("J4zp"),c=n("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,c=(0,a.useRef)(),l=(0,a.useState)(!1),d=r(l,2),u=d[0],b=d[1],m=(0,a.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),n||u||e&&e.tagName&&(c.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var r=new Map,c=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:c,elements:r}),n}(n),c=r.id,a=r.observer,i=r.elements;return i.set(e,t),a.observe(e),function(){i.delete(e),a.unobserve(e),0===i.size&&(a.disconnect(),o.delete(c))}}(e,(function(e){return e&&b(e)}),{rootMargin:t}))}),[n,t,u]);return(0,a.useEffect)((function(){s||u||(0,i.default)((function(){return b(!0)}))}),[u]),[m,u]};var a=n("q1tI"),i=c(n("0G5g")),s="undefined"!==typeof IntersectionObserver;var o=new Map}},[["Jbs4",0,1,2,3]]]);