_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{Jbs4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/lobby",function(){return n("M+XG")}])},KQm4:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return c}))},"M+XG":function(e,t,n){"use strict";n.r(t);var a=n("nKUr"),c=n("KQm4"),r=n("q1tI"),i=n("YFqc"),s=n.n(i),o="w3-button w3-border w3-blue w3-hover-black w3-round";t.default=function(e){var t=e.setIsrejoin,n=e.wsmessage,i=e.gameid,l=e.setGameid,d=e.nickname,b=e.setNickname,m=e.setPrisonersOrGuards,u=e.racksize,j=e.setRacksize,h=Object(r.useState)([]),f=h[0],O=h[1];function g(e){for(var t=0;t<f.length;++t)if(f[t].gameid===e)return t;return-1}function p(e){return 0===d.length||"Game over"===e.gamestatus?0:e.playingP?e.nicknameP===d?3:0:1}function w(e){return 0===d.length||"Game over"===e.gamestatus?0:e.playingG?e.nicknameG===d?3:0:2}function x(e){j(e)}return Object(r.useEffect)((function(){""!==n&&function(e){try{var t=JSON.parse(e),n=t.gameid,a=t.nickname,r=t.whoseturn,i=t.racksize;if(n&&n.length>0&&i&&r&&r.length>0){var s=!1,o=t.sender,l=Object(c.a)(f),d=g(n),b="P"===o||d>-1&&f[d].playingP,m="G"===o||d>-1&&f[d].playingG,u=i,j="Unknown";"X"===r?j="Game over":"P"===r?j="Prisoners turn":"G"===r&&(j="Guards turn");var h={gameid:n,nicknameP:"P"===o?a:d>-1?f[d].nicknameP:"",nicknameG:"G"===o?a:d>-1?f[d].nicknameG:"",gamestatus:j,playingP:b,playingG:m,racksize:u};if(d<0)s=!0,l=[].concat(Object(c.a)(l),[h]);else{var p=f[d];p.nicknameP===h.nicknameP&&p.nicknameG===h.nicknameG&&p.gamestatus===h.gamestatus&&p.playingP===h.playingP&&p.playingG===h.playingG&&p.racksize===h.racksize||(s=!0,l[d]=h)}s&&O(l)}}catch(w){window.alert("Error processing lobby message")}}(n)}),[n]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[Object(a.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Prison Break Lobby"}),Object(a.jsx)("div",{className:"w3-bar-item w3-right",children:Object(a.jsx)(s.a,{href:"../../",children:Object(a.jsx)("a",{children:Object(a.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(a.jsx)("div",{className:"w3-container",children:Object(a.jsxs)("div",{className:"w3-bar",children:[Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{children:Object(a.jsx)("b",{children:"Nickname:"})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:d,onChange:function(e){b(e.target.value)}})})]})}),Object(a.jsx)("div",{className:"w3-container",children:Object(a.jsxs)("div",{className:"w3-bar",children:[Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{children:Object(a.jsxs)("span",{className:"pbPlayerTitle",children:["PRISONERS",Object(a.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{children:Object(a.jsx)("b",{children:"Game ID:"})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:i,onChange:function(e){l(e.target.value)}})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{children:Object(a.jsx)("b",{children:"Rack Size:"})})}),Object(a.jsxs)("div",{className:"w3-bar-item",children:[Object(a.jsx)("button",{id:"selectracksize4",className:4===u?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),Object(a.jsx)("button",{id:"selectracksize5",className:5===u?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),Object(a.jsx)("button",{id:"selectracksize6",className:6===u?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),Object(a.jsx)("button",{id:"selectracksize7",className:7===u?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return x(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"}),Object(a.jsxs)("span",{className:"pbLobbyCellBlockInfo",children:[u," letter racks, ",2*u+1," x ",2*u+1," board."]})]}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("button",{id:"startgame",className:o,onClick:function(){0===d.length?window.alert("Please enter nickname before starting a game"):i.length>0?!function(e){var t=g(e);return!(t<0)&&f[t].playingP}(i)?m("P"):window.alert("Prisoners already playing that game"):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),Object(a.jsx)("div",{className:"w3-container",children:Object(a.jsxs)("div",{className:"w3-bar",children:[Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{children:Object(a.jsxs)("span",{className:"pbPlayerTitle",children:["GUARDS",Object(a.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("span",{className:"myCommonFont",children:Object(a.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),Object(a.jsx)("div",{className:"w3-container",children:Object(a.jsxs)("div",{className:"w3-bar",children:[Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h1",{children:Object(a.jsx)("i",{className:"material-icons w3-right",children:"report_problem"})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h3",{className:"myCommonFont",children:'If you lost connection, find and click the "Reconnect" button for your game id.'})})]})}),Object(a.jsx)("div",{className:"w3-container",children:Object(a.jsxs)("div",{className:"w3-bar",children:[Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsx)("h2",{className:"myCommonFont",children:Object(a.jsx)("b",{children:"Game list:"})})}),Object(a.jsx)("div",{className:"w3-bar-item",children:Object(a.jsxs)("table",{className:"w3-table-all w3-card-4",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[Object(a.jsx)("th",{className:"w3-border-right",children:"Game ID"}),Object(a.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),Object(a.jsx)("th",{className:"w3-border-right",children:"Guards"}),Object(a.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),Object(a.jsx)("th",{children:"Game Status"})]})}),Object(a.jsx)("tbody",{children:f.map((function(e,n){return Object(a.jsxs)("tr",{className:"myCommonFont w3-hover-green",children:[Object(a.jsx)("td",{className:"w3-border-right",children:Object(a.jsx)("b",{children:e.gameid})}),0===p(e)?Object(a.jsx)("td",{id:"PrisonersNoAction".concat(n),className:"w3-border-right",children:"No action available"}):3===p(e)?Object(a.jsx)("td",{id:"PrisonersRejoin".concat(n),className:"w3-border-right",children:Object(a.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){t(!0),l(e.gameid),m("P"),j(e.racksize)},children:"Reconnect"})}):Object(a.jsx)("td",{id:"PrisonersStart".concat(n),className:"w3-border-right",children:Object(a.jsx)("button",{className:o,onClick:function(){l(e.gameid),m("P")},children:"Start Game"})}),0===w(e)?Object(a.jsx)("td",{id:"GuardsNoAction".concat(n),className:"w3-border-right",children:"No action available"}):3===w(e)?Object(a.jsx)("td",{id:"GuardsRejoin".concat(n),className:"w3-border-right",children:Object(a.jsx)("button",{className:o,onClick:function(){t(!0),l(e.gameid),m("G"),j(e.racksize)},children:"Reconnect"})}):Object(a.jsx)("td",{id:"GuardsJoin".concat(n),className:"w3-border-right",children:Object(a.jsx)("button",{className:o,onClick:function(){l(e.gameid),m("G"),j(e.racksize)},children:"Join Game"})}),Object(a.jsx)("td",{id:"RackSize".concat(n),className:"w3-center w3-border-right",children:e.racksize}),Object(a.jsx)("td",{id:"GameStatus".concat(n),children:e.gamestatus})]},"OtherGame".concat(n))}))})]})})]})}),Object(a.jsx)("div",{className:"w3-container w3-teal",children:Object(a.jsx)("h1",{children:"Have fun!"})})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var a=n("J4zp"),c=n("284h");t.__esModule=!0,t.default=void 0;var r=c(n("q1tI")),i=n("elyg"),s=n("nOHt"),o=n("vNVm"),l={};function d(e,t,n,a){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,n,a).catch((function(e){0}));var c=a&&"undefined"!==typeof a.locale?a.locale:e&&e.locale;l[t+"%"+n+(c?"%"+c:"")]=!0}}var b=function(e){var t=!1!==e.prefetch,n=(0,s.useRouter)(),c=n&&n.pathname||"/",b=r.default.useMemo((function(){var t=(0,i.resolveHref)(c,e.href,!0),n=a(t,2),r=n[0],s=n[1];return{href:r,as:e.as?(0,i.resolveHref)(c,e.as):s||r}}),[c,e.href,e.as]),m=b.href,u=b.as,j=e.children,h=e.replace,f=e.shallow,O=e.scroll,g=e.locale;"string"===typeof j&&(j=r.default.createElement("a",null,j));var p=r.Children.only(j),w=p&&"object"===typeof p&&p.ref,x=(0,o.useIntersection)({rootMargin:"200px"}),v=a(x,2),N=v[0],y=v[1],k=r.default.useCallback((function(e){N(e),w&&("function"===typeof w?w(e):"object"===typeof w&&(w.current=e))}),[w,N]);(0,r.useEffect)((function(){var e=y&&t&&(0,i.isLocalURL)(m),a="undefined"!==typeof g?g:n&&n.locale,c=l[m+"%"+u+(a?"%"+a:"")];e&&!c&&d(n,m,u,{locale:a})}),[u,m,y,g,t,n]);var G={ref:k,onClick:function(e){p.props&&"function"===typeof p.props.onClick&&p.props.onClick(e),e.defaultPrevented||function(e,t,n,a,c,r,s,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=a.indexOf("#")<0),t[c?"replace":"push"](n,a,{shallow:r,locale:o,scroll:s}).then((function(e){e&&s&&document.body.focus()})))}(e,n,m,u,h,f,O,g)},onMouseEnter:function(e){(0,i.isLocalURL)(m)&&(p.props&&"function"===typeof p.props.onMouseEnter&&p.props.onMouseEnter(e),d(n,m,u,{priority:!0}))}};if(e.passHref||"a"===p.type&&!("href"in p.props)){var P="undefined"!==typeof g?g:n&&n.locale,S=(0,i.getDomainLocale)(u,P,n&&n.locales,n&&n.domainLocales);G.href=S||(0,i.addBasePath)((0,i.addLocale)(u,P,n&&n.defaultLocale))}return r.default.cloneElement(p,G)};t.default=b},vNVm:function(e,t,n){"use strict";var a=n("J4zp"),c=n("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,c=(0,r.useRef)(),l=(0,r.useState)(!1),d=a(l,2),b=d[0],m=d[1],u=(0,r.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),n||b||e&&e.tagName&&(c.current=function(e,t,n){var a=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var a=new Map,c=new IntersectionObserver((function(e){e.forEach((function(e){var t=a.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:c,elements:a}),n}(n),c=a.id,r=a.observer,i=a.elements;return i.set(e,t),r.observe(e),function(){i.delete(e),r.unobserve(e),0===i.size&&(r.disconnect(),o.delete(c))}}(e,(function(e){return e&&m(e)}),{rootMargin:t}))}),[n,t,b]);return(0,r.useEffect)((function(){s||b||(0,i.default)((function(){return m(!0)}))}),[b]),[u,b]};var r=n("q1tI"),i=c(n("0G5g")),s="undefined"!==typeof IntersectionObserver;var o=new Map}},[["Jbs4",0,1,2,3]]]);