_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{Jbs4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/lobby",function(){return n("M+XG")}])},KQm4:function(e,t,n){"use strict";function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function r(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return r}))},"M+XG":function(e,t,n){"use strict";n.r(t);var c=n("nKUr"),r=n("KQm4"),a=n("q1tI"),i=n("YFqc"),s=n.n(i),o=n("gx3M"),l=n("gBDq"),d="w3-button w3-border w3-blue w3-hover-black w3-round",u=function(e){var t=document.getElementById(e);t.scrollTop=t.scrollHeight};t.default=function(e){var t=e.client,n=e.setIsrejoin,i=e.wsmessage,b=e.gameid,m=e.setGameid,j=e.nickname,h=e.setNickname,f=e.setParticipant,O=e.racksize,p=e.setRacksize,g=Object(a.useState)([]),v=g[0],w=g[1],x=Object(a.useState)([]),N=x[0],y=x[1];function k(e){for(var t=0;t<v.length;++t)if(v[t].gameid===e)return t;return-1}function E(e){return 0===j.length||"Game over"===e.gamestatus?0:e.playingP?e.nicknameP===j?3:0:1}function I(e){return 0===j.length||"Game over"===e.gamestatus?0:e.playingG?e.nicknameG===j?3:0:2}function S(e){p(e)}return Object(a.useEffect)((function(){""!==i&&function(e){var t=JSON.parse(e);if("chat"===t.func&&!t.gameid&&t.nickname!==j){var n=[].concat(Object(r.a)(N),[{from:t.nickname,msg:t.sendmsg}]);return void y(n)}var c=t.gameid,a=t.nickname,i=t.whoseturn,s=t.racksize;if(c&&c.length>0&&s&&i&&i.length>0){var o=!1,d=t.sender,u=Object(r.a)(v),b=k(c),m=d===l.q||b>-1&&v[b].playingP,h=d===l.p||b>-1&&v[b].playingG,f=s,O="Unknown";i===l.y?O="Game over":i===l.A?O="Prisoners turn":i===l.z&&(O="Guards turn");var p={gameid:c,nicknameP:d===l.q?a:b>-1?v[b].nicknameP:"",nicknameG:d===l.p?a:b>-1?v[b].nicknameG:"",gamestatus:O,playingP:m,playingG:h,racksize:f};if(b<0)o=!0,u=[].concat(Object(r.a)(u),[p]);else{var g=v[b];g.nicknameP===p.nicknameP&&g.nicknameG===p.nicknameG&&g.gamestatus===p.gamestatus&&g.playingP===p.playingP&&g.playingG===p.playingG&&g.racksize===p.racksize||(o=!0,u[b]=p)}o&&w(u)}}(i)}),[i]),Object(a.useEffect)((function(){u("ScrollableChat")}),[N]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[Object(c.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Prison Break Lobby"}),Object(c.jsx)("div",{className:"w3-bar-item w3-right",children:Object(c.jsx)(s.a,{href:"../../",children:Object(c.jsx)("a",{children:Object(c.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(c.jsxs)("div",{className:"w3-container w3-cell",children:[Object(c.jsx)("div",{className:"w3-container",children:Object(c.jsxs)("div",{className:"w3-bar",children:[Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{children:Object(c.jsx)("b",{children:"Nickname:"})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:j,onChange:function(e){h(e.target.value)}})})]})}),Object(c.jsx)("div",{className:"w3-container",children:Object(c.jsxs)("div",{className:"w3-bar",children:[Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{children:Object(c.jsxs)("span",{className:"pbPlayerTitle",children:["PRISONERS",Object(c.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{children:Object(c.jsx)("b",{children:"Game ID:"})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:b,onChange:function(e){m(e.target.value)}})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{children:Object(c.jsx)("b",{children:"Rack Size:"})})}),Object(c.jsxs)("div",{className:"w3-bar-item",children:[Object(c.jsx)("button",{id:"selectracksize4",className:4===O?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),Object(c.jsx)("button",{id:"selectracksize5",className:5===O?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),Object(c.jsx)("button",{id:"selectracksize6",className:6===O?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),Object(c.jsx)("button",{id:"selectracksize7",className:7===O?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return S(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"}),Object(c.jsxs)("span",{className:"pbLobbyCellBlockInfo",children:[O," letter racks, ",2*O+1," x ",2*O+1," board."]})]}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("button",{id:"startgame",className:d,onClick:function(){0===j.length?window.alert("Please enter nickname before starting a game"):b.length>0?!function(e){var t=k(e);return!(t<0)&&v[t].playingP}(b)?f(l.q):window.alert("Prisoners already playing that game"):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),Object(c.jsx)("div",{className:"w3-container",children:Object(c.jsxs)("div",{className:"w3-bar",children:[Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{children:Object(c.jsxs)("span",{className:"pbPlayerTitle",children:["GUARDS",Object(c.jsx)("i",{className:"material-icons",children:"arrow_right"})]})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("span",{className:"myCommonFont",children:Object(c.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),Object(c.jsx)("div",{className:"w3-container",children:Object(c.jsxs)("div",{className:"w3-bar",children:[Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h1",{children:Object(c.jsx)("i",{className:"material-icons w3-right",children:"report_problem"})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h3",{className:"myCommonFont",children:'If you lost connection, find and click the "Reconnect" button for your game id.'})})]})}),Object(c.jsx)("div",{className:"w3-container",children:Object(c.jsxs)("div",{className:"w3-bar",children:[Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsx)("h2",{className:"myCommonFont",children:Object(c.jsx)("b",{children:"Game list:"})})}),Object(c.jsx)("div",{className:"w3-bar-item",children:Object(c.jsxs)("table",{className:"w3-table-all w3-card-4",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[Object(c.jsx)("th",{className:"w3-border-right",children:"Game ID"}),Object(c.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),Object(c.jsx)("th",{className:"w3-border-right",children:"Guards"}),Object(c.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),Object(c.jsx)("th",{children:"Game Status"})]})}),Object(c.jsx)("tbody",{children:v.map((function(e,t){return Object(c.jsxs)("tr",{className:"myCommonFont w3-hover-green",children:[Object(c.jsx)("td",{className:"w3-border-right",children:Object(c.jsx)("b",{children:e.gameid})}),0===E(e)?Object(c.jsx)("td",{id:"PrisonersNoAction".concat(t),className:"w3-border-right",children:"No action available"}):3===E(e)?Object(c.jsx)("td",{id:"PrisonersRejoin".concat(t),className:"w3-border-right",children:Object(c.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){n(!0),m(e.gameid),f(l.q),p(e.racksize)},children:"Reconnect"})}):Object(c.jsx)("td",{id:"PrisonersStart".concat(t),className:"w3-border-right",children:Object(c.jsx)("button",{className:d,onClick:function(){m(e.gameid),f(l.q)},children:"Start Game"})}),0===I(e)?Object(c.jsx)("td",{id:"GuardsNoAction".concat(t),className:"w3-border-right",children:"No action available"}):3===I(e)?Object(c.jsx)("td",{id:"GuardsRejoin".concat(t),className:"w3-border-right",children:Object(c.jsx)("button",{className:d,onClick:function(){n(!0),m(e.gameid),f(l.p),p(e.racksize)},children:"Reconnect"})}):Object(c.jsx)("td",{id:"GuardsJoin".concat(t),className:"w3-border-right",children:Object(c.jsx)("button",{className:d,onClick:function(){m(e.gameid),f(l.p),p(e.racksize)},children:"Join Game"})}),Object(c.jsx)("td",{id:"RackSize".concat(t),className:"w3-center w3-border-right",children:e.racksize}),Object(c.jsx)("td",{id:"GameStatus".concat(t),children:e.gamestatus})]},"OtherGame".concat(t))}))})]})})]})})]}),Object(c.jsx)("div",{className:"w3-container w3-cell",children:Object(c.jsx)(o.default,{client:t,nickname:j,msgs:N,setMsgs:y})}),Object(c.jsx)("div",{className:"w3-container w3-teal",children:Object(c.jsx)("h1",{children:"Have fun!"})})]})}},YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var c=n("J4zp"),r=n("284h");t.__esModule=!0,t.default=void 0;var a=r(n("q1tI")),i=n("elyg"),s=n("nOHt"),o=n("vNVm"),l={};function d(e,t,n,c){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,n,c).catch((function(e){0}));var r=c&&"undefined"!==typeof c.locale?c.locale:e&&e.locale;l[t+"%"+n+(r?"%"+r:"")]=!0}}var u=function(e){var t=!1!==e.prefetch,n=(0,s.useRouter)(),r=n&&n.pathname||"/",u=a.default.useMemo((function(){var t=(0,i.resolveHref)(r,e.href,!0),n=c(t,2),a=n[0],s=n[1];return{href:a,as:e.as?(0,i.resolveHref)(r,e.as):s||a}}),[r,e.href,e.as]),b=u.href,m=u.as,j=e.children,h=e.replace,f=e.shallow,O=e.scroll,p=e.locale;"string"===typeof j&&(j=a.default.createElement("a",null,j));var g=a.Children.only(j),v=g&&"object"===typeof g&&g.ref,w=(0,o.useIntersection)({rootMargin:"200px"}),x=c(w,2),N=x[0],y=x[1],k=a.default.useCallback((function(e){N(e),v&&("function"===typeof v?v(e):"object"===typeof v&&(v.current=e))}),[v,N]);(0,a.useEffect)((function(){var e=y&&t&&(0,i.isLocalURL)(b),c="undefined"!==typeof p?p:n&&n.locale,r=l[b+"%"+m+(c?"%"+c:"")];e&&!r&&d(n,b,m,{locale:c})}),[m,b,y,p,t,n]);var E={ref:k,onClick:function(e){g.props&&"function"===typeof g.props.onClick&&g.props.onClick(e),e.defaultPrevented||function(e,t,n,c,r,a,s,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=c.indexOf("#")<0),t[r?"replace":"push"](n,c,{shallow:a,locale:o,scroll:s}).then((function(e){e&&s&&document.body.focus()})))}(e,n,b,m,h,f,O,p)},onMouseEnter:function(e){(0,i.isLocalURL)(b)&&(g.props&&"function"===typeof g.props.onMouseEnter&&g.props.onMouseEnter(e),d(n,b,m,{priority:!0}))}};if(e.passHref||"a"===g.type&&!("href"in g.props)){var I="undefined"!==typeof p?p:n&&n.locale,S=(0,i.getDomainLocale)(m,I,n&&n.locales,n&&n.domainLocales);E.href=S||(0,i.addBasePath)((0,i.addLocale)(m,I,n&&n.defaultLocale))}return a.default.cloneElement(g,E)};t.default=u},gBDq:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"r",(function(){return a})),n.d(t,"q",(function(){return i})),n.d(t,"p",(function(){return s})),n.d(t,"A",(function(){return o})),n.d(t,"z",(function(){return l})),n.d(t,"y",(function(){return d})),n.d(t,"m",(function(){return u})),n.d(t,"l",(function(){return b})),n.d(t,"o",(function(){return m})),n.d(t,"n",(function(){return j})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return O})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"x",(function(){return w})),n.d(t,"g",(function(){return x})),n.d(t,"s",(function(){return N})),n.d(t,"t",(function(){return y})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return E})),n.d(t,"w",(function(){return I})),n.d(t,"h",(function(){return S})),n.d(t,"f",(function(){return R}));var c=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],r=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],a="U",i="P",s="G",o=i,l=s,d="X",u="run_circle",b="security",m="PRISONERS",j="GUARDS",h="PLAY",f="SWAP",O="PASS",p="r",g="d",v="",w="",x=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],N=2e4,y=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],k=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],E=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],I=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],S="";function R(e){for(var t=2*e+1,n=Array(t),c=0;c<t;++c){for(var r=Array(t),a=0;a<t;++a){var i={row:c,col:a,type:"style2",usedby:w,letter:S};c===e&&a===e?i.type="CenterSquare":c%e===0&&a%e===0?i.type="EscapeHatch":c%2===a%2&&(i.type="style1"),r[a]=i}n[c]=[].concat(r)}return n}},gx3M:function(e,t,n){"use strict";n.r(t);var c=n("nKUr"),r=n("KQm4"),a=n("q1tI");t.default=function(e){var t=e.gameid,n=void 0===t?"":t,i=e.client,s=e.nickname,o=e.msgs,l=void 0===o?[]:o,d=e.setMsgs,u=e.participant,b=void 0===u?"":u,m=Object(a.useState)(""),j=m[0],h=m[1];return Object(c.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:Object(c.jsx)("table",{className:"pbChatTable",children:Object(c.jsxs)("tbody",{children:[l.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pbChatFrom",children:e.from}),Object(c.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(t))})),Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:"2",children:""===s?Object(c.jsx)("span",{children:"Please enter nickname to use chat"}):Object(c.jsx)("textarea",{className:""===j?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:j,onChange:function(e){h(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&j.length>0){e.preventDefault();var t=[].concat(Object(r.a)(l),[{from:s,msg:j}]),c=j;return d(t),h(""),void i.send(JSON.stringify({gameid:n,nickname:s,type:"pb",func:"chat",sender:b,sendmsg:c}))}if("Backspace"===e.key&&j.length>0){e.preventDefault();var a=j.slice(0,j.length-1);h(a)}},placeholder:"chat..."})})})]})})})}},vNVm:function(e,t,n){"use strict";var c=n("J4zp"),r=n("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,r=(0,a.useRef)(),l=(0,a.useState)(!1),d=c(l,2),u=d[0],b=d[1],m=(0,a.useCallback)((function(e){r.current&&(r.current(),r.current=void 0),n||u||e&&e.tagName&&(r.current=function(e,t,n){var c=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var c=new Map,r=new IntersectionObserver((function(e){e.forEach((function(e){var t=c.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:r,elements:c}),n}(n),r=c.id,a=c.observer,i=c.elements;return i.set(e,t),a.observe(e),function(){i.delete(e),a.unobserve(e),0===i.size&&(a.disconnect(),o.delete(r))}}(e,(function(e){return e&&b(e)}),{rootMargin:t}))}),[n,t,u]);return(0,a.useEffect)((function(){s||u||(0,i.default)((function(){return b(!0)}))}),[u]),[m,u]};var a=n("q1tI"),i=r(n("0G5g")),s="undefined"!==typeof IntersectionObserver;var o=new Map}},[["Jbs4",0,1,2,3]]]);