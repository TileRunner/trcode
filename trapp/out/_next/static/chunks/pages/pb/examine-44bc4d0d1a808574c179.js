(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{4946:function(e,r,n){"use strict";n.d(r,{F:function(){return a}});var t=n(6595);function a(e){return/[A-Z][0-9][0-9]/.test(e)?{row:Number(e.substr(1,2))-1,col:t.v8.indexOf(e[0]),dir:t.ik}:/[A-Z][0-9]/.test(e)?{row:Number(e[1])-1,col:t.v8.indexOf(e[0]),dir:t.ik}:/[0-9][0-9][A-Z]/.test(e)?{row:Number(e.substr(0,2))-1,col:t.v8.indexOf(e[2]),dir:t.oW}:/[0-9][A-Z]/.test(e)?{row:Number(e[0])-1,col:t.v8.indexOf(e[1]),dir:t.oW}:void 0}},1489:function(e,r,n){"use strict";n.d(r,{$:function(){return a}});var t=n(6595);function a(e){for(var r=2*e+1,n=Array(r),a=0;a<r;++a){for(var s=Array(r),i=0;i<r;++i){var o={row:a,col:i,type:t.WS,usedby:t.i4,letter:t.GP};a===e&&i===e?o.type=t.ix:a%e===0&&i%e===0?o.type=t.fi:a%2===i%2&&(o.type=t.me),s[i]=o}n[a]=[].concat(s)}return n}},6595:function(e,r,n){"use strict";n.d(r,{v8:function(){return t},RH:function(){return a},dK:function(){return s},ap:function(){return i},b6:function(){return o},qg:function(){return c},Vj:function(){return l},kX:function(){return u},Ov:function(){return d},Bd:function(){return f},_k:function(){return p},g9:function(){return m},Ji:function(){return h},jN:function(){return v},bS:function(){return b},Ix:function(){return x},Am:function(){return N},oW:function(){return w},ik:function(){return j},QY:function(){return y},i4:function(){return g},_W:function(){return k},$B:function(){return E},fl:function(){return A},Cr:function(){return O},L8:function(){return T},Qt:function(){return I},fi:function(){return S},ix:function(){return R},me:function(){return C},WS:function(){return B},GP:function(){return H}});var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],a=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],s="U",i="P",o="G",c="O",l="E",u=i,d=o,f="X",p="run_circle",m="security",h="PRISONERS",v="GUARDS",b="PLAY",x="SWAP",N="PASS",w="r",j="d",y="",g="",k=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],E=2e4,A=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],O=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],T=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],I=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],S="EscapeHatch",R="CenterSquare",C="style1",B="style2",H=""},6071:function(e,r,n){"use strict";var t=n(3848),a=n(9448);r.default=void 0;var s=a(n(7294)),i=n(1689),o=n(2441),c=n(5749),l={};function u(e,r,n,t){if(e&&(0,i.isLocalURL)(r)){e.prefetch(r,n,t).catch((function(e){0}));var a=t&&"undefined"!==typeof t.locale?t.locale:e&&e.locale;l[r+"%"+n+(a?"%"+a:"")]=!0}}var d=function(e){var r=!1!==e.prefetch,n=(0,o.useRouter)(),a=n&&n.asPath||"/",d=s.default.useMemo((function(){var r=(0,i.resolveHref)(a,e.href,!0),n=t(r,2),s=n[0],o=n[1];return{href:s,as:e.as?(0,i.resolveHref)(a,e.as):o||s}}),[a,e.href,e.as]),f=d.href,p=d.as,m=e.children,h=e.replace,v=e.shallow,b=e.scroll,x=e.locale;"string"===typeof m&&(m=s.default.createElement("a",null,m));var N=s.Children.only(m),w=N&&"object"===typeof N&&N.ref,j=(0,c.useIntersection)({rootMargin:"200px"}),y=t(j,2),g=y[0],k=y[1],E=s.default.useCallback((function(e){g(e),w&&("function"===typeof w?w(e):"object"===typeof w&&(w.current=e))}),[w,g]);(0,s.useEffect)((function(){var e=k&&r&&(0,i.isLocalURL)(f),t="undefined"!==typeof x?x:n&&n.locale,a=l[f+"%"+p+(t?"%"+t:"")];e&&!a&&u(n,f,p,{locale:t})}),[p,f,k,x,r,n]);var A={ref:E,onClick:function(e){N.props&&"function"===typeof N.props.onClick&&N.props.onClick(e),e.defaultPrevented||function(e,r,n,t,a,s,o,c){("A"!==e.currentTarget.nodeName||!function(e){var r=e.currentTarget.target;return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==o&&(o=t.indexOf("#")<0),r[a?"replace":"push"](n,t,{shallow:s,locale:c,scroll:o}))}(e,n,f,p,h,v,b,x)},onMouseEnter:function(e){(0,i.isLocalURL)(f)&&(N.props&&"function"===typeof N.props.onMouseEnter&&N.props.onMouseEnter(e),u(n,f,p,{priority:!0}))}};if(e.passHref||"a"===N.type&&!("href"in N.props)){var O="undefined"!==typeof x?x:n&&n.locale,T=n&&n.isLocaleDomain&&(0,i.getDomainLocale)(p,O,n&&n.locales,n&&n.domainLocales);A.href=T||(0,i.addBasePath)((0,i.addLocale)(p,O,n&&n.defaultLocale))}return s.default.cloneElement(N,A)};r.default=d},5749:function(e,r,n){"use strict";var t=n(3848);r.__esModule=!0,r.useIntersection=function(e){var r=e.rootMargin,n=e.disabled||!i,c=(0,a.useRef)(),l=(0,a.useState)(!1),u=t(l,2),d=u[0],f=u[1],p=(0,a.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),n||d||e&&e.tagName&&(c.current=function(e,r,n){var t=function(e){var r=e.rootMargin||"",n=o.get(r);if(n)return n;var t=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var r=t.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;r&&n&&r(n)}))}),e);return o.set(r,n={id:r,observer:a,elements:t}),n}(n),a=t.id,s=t.observer,i=t.elements;return i.set(e,r),s.observe(e),function(){i.delete(e),s.unobserve(e),0===i.size&&(s.disconnect(),o.delete(a))}}(e,(function(e){return e&&f(e)}),{rootMargin:r}))}),[n,r,d]);return(0,a.useEffect)((function(){if(!i&&!d){var e=(0,s.requestIdleCallback)((function(){return f(!0)}));return function(){return(0,s.cancelIdleCallback)(e)}}}),[d]),[p,d]};var a=n(7294),s=n(8391),i="undefined"!==typeof IntersectionObserver;var o=new Map},3625:function(e,r,n){"use strict";n.r(r);var t=n(5893),a=n(4620),s=n(6595);r.default=function(e){var r=e.onClick,n=e.squareArray,i=void 0===n?[]:n,o=e.rcd,c=function(e){return(0,t.jsxs)("tr",{className:"pbRow",children:[(0,t.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderLeft",children:s.RH[e]}),i[e].map((function(e){return function(e){return(0,t.jsx)("td",{className:"pbSquareOuter",children:(0,t.jsx)(a.default,{usedby:e.usedby,type:e.type,letter:e.letter,ri:e.row,ci:e.col,rcd:o,onClick:function(){return r(e.row,e.col)}})},"Square".concat(e.row,"-").concat(e.col))}(e)})),(0,t.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderRight",children:s.RH[e]})]},"BoardRow".concat(e))};return(0,t.jsx)("table",{className:"pbBoard",children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{className:"pbBoardColumnHeaderRow",children:[(0,t.jsx)("td",{className:"pbBoardHeaderTopLeft",children:"\xa0"}),i.map((function(e,r){return(0,t.jsx)("td",{className:"pbBoardColumnHeader",children:s.v8[r]},"TopColumnHeader".concat(r))})),(0,t.jsx)("td",{className:"pbBoardHeaderTopRight",children:"\xa0"})]}),i.map((function(e,r){return c(r)})),(0,t.jsxs)("tr",{className:"pbBoardColumnHeaderRow",id:"BoardHeaderBottom",children:[(0,t.jsx)("td",{className:"pbBoardHeaderBottomLeft",children:"\xa0"}),i.map((function(e,r){return(0,t.jsx)("td",{className:"pbBoardColumnHeader",children:s.v8[r]},"BottomColumnHeader".concat(r))})),(0,t.jsx)("td",{className:"pbBoardHeaderBottomRight",children:"\xa0"})]})]})})}},2389:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return m}});var t=n(5893),a=n(7294),s=n(1664),i=n(3625),o=n(8520),c=n(9477),l=n(798),u=n(6595),d=n(1489),f=n(4946);var p=function(e){var r="pbTileOnRack Unselected "+("Q"===e.tilevalue?"u ":"")+e.participant;return(0,t.jsx)("div",{className:r,children:(0,t.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},e.tileindex)},m=function(e){var r=e.client,n=e.wsmessage,m=e.gameid,h=(0,a.useState)(0),v=h[0],b=h[1],x=(0,a.useState)({pname:"tbd",gname:"tbd",moves:[],snapshots:[{tiles:[],ptiles:[],gtiles:[],rescues:0,whoseturn:"P"}]}),N=x[0],w=x[1];(0,a.useEffect)((function(){r.send({gameid:m,type:"pb",sender:u.Vj,func:"startExamining"})}),[]),(0,a.useEffect)((function(){""!==n&&function(e){var r=JSON.parse(e);if(r.gameid===m&&"pb"===r.type&&"providegamedata"===r.func){var n=function(e){for(var r=[],n=e,t="",a="",s="",i=(0,d.$)(n.racksize),o=[],c=0,l=0;l<n.events.length;l++){var p=n.events[l];if(p.ptiles&&(t=p.ptiles),p.gtiles&&(a=p.gtiles),p.tiles&&(s=p.tiles),p.type===u.bS||p.type===u.Ix||p.type===u.Am){var m={by:p.by,type:p.type};if(p.type===u.bS){m.mainword=p.mainword,m.extrawords=p.extrawords.split(","),m.pos=p.pos,p.by===u.ap&&(c=p.rescues);for(var h=(0,f.F)(p.pos),v=h.row,b=h.col,x=0;x<p.mainword.length;x++){var N=i[v][b];N.usedby===u.i4&&(N.usedby=p.by,N.letter=p.mainword[x]),h.dir===u.oW?b++:v++}}o.push(m)}r.push({tiles:s.split(""),squareArray:JSON.parse(JSON.stringify(i)),ptiles:t.split(""),gtiles:a.split(""),rescues:c,whoseturn:p.whoseturn})}return{pname:n.pname,gname:n.gname,moves:o,racksize:n.racksize,snapshots:r}}(r.apidata);w(n)}}(n)}),[n]);var j=function(){v+1<N.snapshots.length&&b(v+1)},y=function(){return N.snapshots[v].whoseturn===u.kX},g=function(){return N.snapshots[v].whoseturn===u.Ov};return(0,t.jsxs)("div",{className:"prisonbreak",children:[(0,t.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,t.jsx)("div",{className:"w3-display-middle",children:(0,t.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,t.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",m]}),(0,t.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",N.pname]}),(0,t.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,t.jsx)(s.default,{href:"../../",children:(0,t.jsx)("a",{children:(0,t.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})}),(0,t.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",N.gname]})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,t.jsx)(o.default,{tiles:N.snapshots[v].tiles,othertiles:y()?N.snapshots[v].gtiles:g()?N.snapshots[v].ptiles:[]}),(0,t.jsx)(c.default,{moves:N.moves.slice(0,v)})]}),(0,t.jsx)("div",{className:"col pbPlayerOuterSection",children:(0,t.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,t.jsxs)("div",{className:"pbPlayerTitle",children:[(0,t.jsx)("i",{className:"material-icons",children:u._k}),"\xa0",u.Ji,"\xa0",(0,t.jsx)("i",{className:"material-icons",children:u._k})]}),(0,t.jsxs)("div",{className:"pbTilerack",children:[N.snapshots[v].whoseturn===u.ap&&(0,t.jsx)("button",{className:"w3-black pbTilerackArrow",onClick:j,children:(0,t.jsx)("i",{className:"material-icons",children:"arrow_right"})}),N.snapshots[v].ptiles.map((function(e,r){return(0,t.jsx)(p,{participant:u.ap,tilevalue:g()?"*":e,tileindex:r},"ObserverPrisonersRackTile".concat(r))}))]}),(0,t.jsxs)("div",{className:"pbPlayerTitle",children:[(0,t.jsx)("i",{className:"material-icons",children:u.g9}),"\xa0",u.jN,"\xa0",(0,t.jsx)("i",{className:"material-icons",children:u.g9})]}),(0,t.jsxs)("div",{className:"pbTilerack",children:[N.snapshots[v].whoseturn===u.b6&&(0,t.jsx)("button",{className:"w3-black pbTilerackArrow",onClick:j,children:(0,t.jsx)("i",{className:"material-icons",children:"arrow_right"})}),N.snapshots[v].gtiles.map((function(e,r){return(0,t.jsx)(p,{participant:u.b6,tilevalue:y()?"*":e,tileindex:r},"ObserverGuardsRackTile".concat(r))}))]})]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)(i.default,{squareArray:N.snapshots[v].squareArray,rcd:[-1,-1,u.QY],onClick:function(){}})})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsx)(l.default,{rescues:N.snapshots[v].rescues})})]}),(0,t.jsx)("div",{className:"w3-display-container w3-teal topBarHeight",children:(0,t.jsx)("div",{className:"w3-display-middle commonFontFamily",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{className:"w3-black w3-round",onClick:function(){b(0)},children:(0,t.jsx)("i",{className:"material-icons",children:"fast_rewind"})}),(0,t.jsx)("button",{className:"w3-black w3-round",onClick:function(){v-1>-1&&b(v-1)},children:(0,t.jsx)("i",{className:"material-icons",children:"arrow_left"})}),(0,t.jsx)("button",{className:"w3-black w3-round",onClick:j,children:(0,t.jsx)("i",{className:"material-icons",children:"arrow_right"})}),(0,t.jsx)("button",{className:"w3-black w3-round",onClick:function(){var e=N.snapshots.length-1;b(e)},children:(0,t.jsx)("i",{className:"material-icons",children:"fast_forward"})})]})})})]})}},9477:function(e,r,n){"use strict";n.r(r);var t=n(5893),a=n(6595);r.default=function(e){var r=e.moves;return(0,t.jsxs)("div",{className:"pbMoves",children:[(0,t.jsx)("div",{className:"pbMovesTitle",children:"MOVES"}),(0,t.jsx)("div",{className:"pbMovesScrollable",id:"ScrollableMoves",children:r&&r.map((function(e,r){var n;return(0,t.jsxs)("div",{className:"pbMove",children:[(0,t.jsx)("span",{className:"pbMove by",children:e.by}),":",(0,t.jsx)("span",{className:"pbMove ".concat(e.type),children:e.type===a.bS?(0,t.jsxs)(t.Fragment,{children:[e.pos," ",e.mainword.replace("Q","Qu"),null===(n=e.extrawords)||void 0===n?void 0:n.map((function(e,r){return(0,t.jsxs)("span",{children:[",\xa0",e.replace("Q","Qu")]},"extraword".concat(r))}))]}):(0,t.jsx)(t.Fragment,{})})]},"move".concat(r))}))})]})}},798:function(e,r,n){"use strict";n.r(r);var t=n(5893);r.default=function(e){var r=e.rescues;return(0,t.jsxs)("div",{className:"pbRescuesMade",children:["Rescues made: ",r]})}},4620:function(e,r,n){"use strict";n.r(r);var t=n(5893),a=n(6595);r.default=function(e){var r=e.usedby,n=e.type,s=e.letter,i=e.ri,o=e.ci,c=e.rcd,l=e.onClick,u=r!==a.i4?"pbSquareInner PlayerTile":c[0]===i&&c[1]===o&&c[2]===a.oW?"pbSquareInner RightArrow":c[0]===i&&c[1]===o&&c[2]===a.ik?"pbSquareInner DownArrow":"pbSquareInner "+n,d=r!==a.i4?s:u.indexOf("RightArrow")>-1?"\u27a1":u.indexOf("DownArrow")>-1?"\u2b07":u.indexOf("CenterSquare")>-1?(0,t.jsx)("i",{className:"material-icons",children:"stars"}):u.indexOf("EscapeHatch")>-1?(0,t.jsx)("i",{className:"material-icons",children:a._k}):".";return r===a.i4?(0,t.jsx)("button",{className:u,onClick:l,children:d}):(0,t.jsx)("button",{className:u,onClick:l,children:(0,t.jsx)("div",{className:"pbSquareTileText ".concat(r+("Q"===s?" u":"")),children:d})})}},8520:function(e,r,n){"use strict";n.r(r);var t=n(5893),a=n(1385);r.default=function(e){var r=e.tiles,n=e.othertiles,s=[].concat((0,a.Z)(r||[]),(0,a.Z)(n||[]));return s.sort(),"?"===s[0]&&(s.splice(0,1),s.push("?")),"?"===s[0]&&(s.splice(0,1),s.push("?")),(0,t.jsxs)("div",{className:"pbTilepool",children:[(0,t.jsx)("div",{className:"pbTilepoolTitle",children:"TILES"}),s.map((function(e,r){return(0,t.jsxs)("span",{children:[r>0&&e!==s[r-1]?(0,t.jsx)("span",{className:"pbTilepoolDivider"}):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)("span",{className:"Q"===e?"pbTilepoolTile u":"pbTilepoolTile",children:e})]},"tile".concat(r))}))]})}},8267:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/examine",function(){return n(2389)}])},1664:function(e,r,n){e.exports=n(6071)},1385:function(e,r,n){"use strict";function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function a(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(e){if("string"===typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(r,{Z:function(){return a}})}},function(e){e.O(0,[774,888,179],(function(){return r=8267,e(e.s=r);var r}));var r=e.O();_N_E=r}]);