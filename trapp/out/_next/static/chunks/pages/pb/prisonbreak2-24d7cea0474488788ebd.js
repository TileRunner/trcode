_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"2Skw":function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pb/prisonbreak2",function(){return s("UOmD")}])},KQm4:function(e,t,s){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function c(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}s.d(t,"a",(function(){return c}))},UOmD:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return p}));var n=s("nKUr"),c=s("KQm4"),r=s("q1tI"),i=s("YFqc"),a=s.n(i);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,s){return t&&l(e.prototype,t),s&&l(e,s),e}var d=function(){function e(t,s){o(this,e),this.callback=t,this.timerCalc=s,this.timer=null,this.tries=0}return u(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),b=function(){function e(t,s){var n=this;o(this,e),this.customSocket=null,this.socketUrl=t,this.reconnectTimer=new d((function(){n.disconnect(),n.connect()}),this.reconnectAfterMs),this.messageFunction=s}return u(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(t){console.log("connected to "+e.socketUrl)},this.customSocket.onclose=function(t){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){this.customSocket.send(JSON.stringify(e))}}]),e}(),j=["0-0","0-7","0-14","7-0","7-14","14-0","14-7","14-14"],f=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"];function p(){var e=Object(r.useState)(!0),t=e[0],s=e[1],i=Object(r.useState)(""),o=i[0],l=i[1],u=Object(r.useState)(""),d=u[0],j=u[1],f=Object(r.useState)([]),p=f[0],h=f[1],O=Object(r.useState)(0),g=(O[0],O[1]),y=Object(r.useState)(new b("wss://tilerunner.herokuapp.com",(function(e){g((function(e){return e+1})),h((function(t){return[].concat(Object(c.a)(t),[e.data])}))}))),v=y[0];y[1];return Object(r.useEffect)((function(){return v.connect()}),[]),t||""===d?Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-10 pbtitle",children:["Prison Break Lobby",Object(n.jsx)("span",{className:"material-icons",children:"run_circle"})]}),Object(n.jsx)("div",{className:"col-2 pbhomelink",children:Object(n.jsx)(a.a,{href:"../../",children:Object(n.jsx)("a",{children:Object(n.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-11 offset-1",children:Object(n.jsx)("h2",{children:'Prisoners: enter a game id and click "Start Game". Tell the Guards the id.'})})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-11 offset-1",children:Object(n.jsx)("h2",{children:'Guards: get the game id from the Prisoners. Enter the game id and click "Join Game".'})})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-11 offset-1",children:Object(n.jsxs)("h2",{children:["Game id:",Object(n.jsx)("input",{name:"gameid",value:o,onChange:function(e){l(e.target.value)}}),Object(n.jsx)("label",{children:"\xa0"}),Object(n.jsx)("button",{id:"startgame",onClick:function(){o.length>0&&(j("P"),s(!1))},children:"Start Game"}),Object(n.jsx)("label",{children:"\xa0"}),Object(n.jsx)("button",{id:"joingame",onClick:function(){o.length>0&&(j("G"),s(!1))},children:"Join Game"})]})})})]}):Object(n.jsx)(m,{prisonersOrGuards:d,gameid:o,wsmsgs:p,client:v,removeMessage:function(e){var t=p.indexOf(e),s=Object(c.a)(p);s.splice(t,1),h(s)}})}var h=function(e){var t="P"===e.squareusedby?"pbSquareUsedByPrisoners":"pbSquareUsedByGuards",s="."!==e.c?t:e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"r"===e.rcd[2]?"pbSquareRightArrow":e.rcd[0]===e.ri&&e.rcd[1]===e.ci&&"d"===e.rcd[2]?"pbSquareDownArrow":7===e.ri&&7===e.ci?"pbSquareCenterSquare":0!==e.ri&&7!==e.ri&&14!==e.ri||0!==e.ci&&7!==e.ci&&14!==e.ci?e.ri%2===e.ci%2?"pbSquare1":"pbSquare2":"pbSquareEscapeHatch",c="."!==e.c?e.c:"pbSquareRightArrow"===s?"\u27a1":"pbSquareDownArrow"===s?"\u2b07":"pbSquareCenterSquare"===s?Object(n.jsx)("i",{className:"material-icons",children:"stars"}):"pbSquareEscapeHatch"===s?"\ua415":(e.ri,e.ci,".");return"pbSquareEscapeHatch"===s?Object(n.jsx)("button",{className:s,onClick:e.onClick,children:Object(n.jsx)("span",{className:"material-icons",children:"run_circle"})}):Object(n.jsx)("button",{className:s,onClick:e.onClick,children:c})},O=function(e){var t=e.onClick,s=e.squares,c=e.usedby,r=e.rcd,i=function(e){return Object(n.jsx)("tr",{className:"pbRow",children:s[e].map((function(s,i){return function(e,s,c,i){return Object(n.jsx)("td",{className:"pbSquare",children:Object(n.jsx)(h,{c:c,ci:s,ri:e,squareusedby:i,rcd:r,onClick:function(){return t(e,s)}})},"Square".concat(e,"-").concat(s))}(e,i,s,c[e][i])}))},"BoardRow".concat(e))};return Object(n.jsx)("table",{className:"pbBoard",children:Object(n.jsx)("tbody",{children:s.map((function(e,t){return i(t)}))})})},m=function(e){var t=e.prisonersOrGuards,s=e.gameid,i=e.wsmsgs,o=e.client,l=e.removeMessage,u=Object(r.useState)([].concat(f)),d=u[0],b=u[1],p=Object(r.useState)([]),h=p[0],m=p[1],y=Object(r.useState)([]),v=y[0],x=y[1],k=Object(r.useState)(Array(15).fill(Array(15).fill("."))),w=k[0],q=k[1],C=Object(r.useState)(Array(15).fill(Array(15).fill(""))),T=C[0],P=C[1],E=Object(r.useState)(-1),G=E[0],A=E[1],I=Object(r.useState)("P"),M=I[0],R=I[1],_=Object(r.useState)([]),J=_[0],U=_[1],B=Object(r.useState)(0),D=B[0],L=B[1],F=Object(r.useState)([-1,-1,""]),H=F[0],X=F[1],K=Object(r.useState)(!1),Y=K[0],z=K[1],V=Object(r.useState)({squares:Object(c.a)(w),usedby:Object(c.a)(T),ptiles:Object(c.a)(h),gtiles:Object(c.a)(v)}),W=V[0],Q=V[1];Object(r.useEffect)((function(){if("P"===t){for(var e=Object(c.a)(h),n=Object(c.a)(v),r=Object(c.a)(d);e.length<7;){var i=Math.floor(Math.random()*r.length);e.push(r[i]),r.splice(i,1),i=Math.floor(Math.random()*r.length),n.push(r[i]),r.splice(i,1)}e.sort(),n.sort(),x(n),m(e),b(r),Q({squares:Object(c.a)(w),usedby:Object(c.a)(T),ptiles:Object(c.a)(e),gtiles:Object(c.a)(n)})}else try{console.log("Sending ggd"),o.send(JSON.stringify({gameid:s,type:"pb",func:"ggd"}))}catch(a){}}),[]),Object(r.useEffect)((function(){var e=i[0];e&&function(e){var n=JSON.parse(e);n.gameid===s&&"pb"===n.type&&("requestgamedata"===n.func&&n.requestor!==t&&o.send(JSON.stringify({gameid:s,type:"pb",func:"providegamedata",sender:t,tiles:d,squares:w,ptiles:h,gtiles:v,usedby:T,whoseturn:M,selection:G,currentcoords:J,snapshot:W,passed:Y,rescues:D})),"providegamedata"===n.func&&n.sender!==t&&(b(n.tiles),q(n.squares),m(n.ptiles),x(n.gtiles),P(n.usedby),R(n.whoseturn),A(n.selection),U(n.currentcoords),Q(n.snapshot),z(n.passed),L(n.rescues)),"ggd"===n.func&&"P"===t&&o.send(JSON.stringify({gameid:s,type:"pb",func:"sgd",tiles:d,squares:w,ptiles:h,gtiles:v,usedby:T,whoseturn:M,selection:G,currentcoords:J,snapshot:W,passed:Y,rescues:D})),"sgd"===n.func&&"G"===t&&(b(n.tiles),q(n.squares),m(n.ptiles),x(n.gtiles),P(n.usedby),R(n.whoseturn),A(n.selection),U(n.currentcoords),Q(n.snapshot),z(n.passed),L(n.rescues)),"ept"===n.func&&(R(n.whoseturn),A(-1),X(-1,-1,""),U([]),q(n.squares),P(n.usedby),m(n.ptiles),b(n.tiles),z(n.passed),L(n.rescues),Q({squares:Object(c.a)(n.squares),usedby:Object(c.a)(n.usedby),ptiles:Object(c.a)(n.ptiles),gtiles:Object(c.a)(v)})),"egt"===n.func&&(R(n.whoseturn),A(-1),X(-1,-1,""),U([]),q(n.squares),P(n.usedby),x(n.gtiles),b(n.tiles),z(n.passed),Q({squares:Object(c.a)(n.squares),usedby:Object(c.a)(n.usedby),ptiles:Object(c.a)(h),gtiles:Object(c.a)(n.gtiles)})));l(e)}(e)}),[i]);var Z=function(e,t,s,n){var r=Object(c.a)(w),i=Object(c.a)(T),a=Object(c.a)(h),o=Object(c.a)(v),l=Object(c.a)(w[e]),u=w[e][t],d=Object(c.a)(J),b=String(e)+"-"+String(t),j=J.indexOf(b);if(-1===s&&(s=G,n=H),s>-1&&"."===u){l[t]="P"===M?a[s]:o[s],r[e]=Object(c.a)(l),"P"===M?a.splice(s,1):o.splice(s,1);var f=Object(c.a)(i[e]);return f[t]=M,i[e]=Object(c.a)(f),"P"===M&&s===a.length&&(s-=1),"G"===M&&s===o.length&&(s-=1),A(s),q(r),P(i),m(a),x(o),U([].concat(Object(c.a)(J),[b])),void X(n)}if(j>-1){"P"===M?a.push(u):o.push(u);var p=Object(c.a)(r[e]);p[t]=".",r[e]=Object(c.a)(p);var O=Object(c.a)(i[e]);return O[t]="",i[e]=Object(c.a)(O),A("P"===M?a.length-1:o.length-1),d.splice(j,1),q(r),P(i),m(a),x(o),U(d),void X(-1,-1,"")}if("."!==w[e][t]);else{var g=H[0]!==e||H[1]!==t?"r":"r"===H[2]?"d":"d"===H[2]?"":"r";X(n=[e,t,g])}},$=function(){if(te()){for(var e=D,t=0;t<J.length;t++)j.indexOf(J[t])>-1&&(e+=1);for(var n=Object(c.a)(h),r=Object(c.a)(d);n.length<7&&r.length>0;){var i=Math.floor(Math.random()*r.length);n.push(r[i]),r.splice(i,1)}n.sort();var a=n.length>0?"G":"X";""!==T[0][0]&&""!==useby[0][7]&&""!==useby[0][14]&&""!==useby[7][0]&&""!==useby[7][14]&&""!==T[14][0]&&""!==useby[14][7]&&""!==useby[14][14]&&(a="X"),R(a),A(-1),U([]),m(n),b(r),z(!1),L(e),Q({squares:Object(c.a)(w),usedby:Object(c.a)(T),ptiles:Object(c.a)(n),gtiles:Object(c.a)(v)}),o.send(JSON.stringify({gameid:s,type:"pb",func:"ept",squares:w,usedby:T,ptiles:n,tiles:r,whoseturn:a,passed:!1,rescues:e}))}},ee=function(){if(te()){for(var e=Object(c.a)(v),t=Object(c.a)(d);e.length<7&&t.length>0;){var n=Math.floor(Math.random()*t.length);e.push(t[n]),t.splice(n,1)}e.sort();var r=Object(c.a)(w),i=Object(c.a)(T),a=Object(c.a)(h),l=Object(c.a)(v),u=e.length>0?"P":"X";""!==T[0][0]&&""!==useby[0][7]&&""!==useby[0][14]&&""!==useby[7][0]&&""!==useby[7][14]&&""!==T[14][0]&&""!==useby[14][7]&&""!==useby[14][14]&&(u="X"),R(u),A(-1),U([]),x(e),b(t),z(!1),Q({squares:r,usedby:i,ptiles:a,gtiles:l}),o.send(JSON.stringify({gameid:s,type:"pb",func:"egt",squares:w,usedby:T,gtiles:e,tiles:t,passed:!1,whoseturn:u}))}};function te(){if("."===w[7][7])return window.alert("First play must hit center square"),!1;for(var e=15,t=-1,s=15,n=-1,c=0;c<15;++c)for(var r=0;r<15;++r)if("."!==w[c][r]){if(!(c>0&&"."!==w[c-1][r])&&!(r>0&&"."!==w[c][r-1])&&!(c<14&&"."!==w[c+1][r])&&!(r<14&&"."!==w[c][r+1]))return window.alert("Each played tile must be part of a word"),!1;"."===W.squares[c][r]&&(c<e&&(e=c),c>t&&(t=c),r<s&&(s=r),r>n&&(n=r))}if(15===e)return window.alert("You didn't play any tiles"),!1;if(e!==t&&s!==n)return window.alert("Tiles played must be in a straight line"),!1;var i=!1,a=!1;for(c=e;c<=t;++c)for(r=s;r<=n;++r){if("."===w[c][r])return window.alert("There is a gap in your word"),!1;"."!==W.squares[c][r]&&(i=!0),e===t&&c>0&&"."!==w[c-1][r]&&(a=!0),e===t&&c<14&&"."!==w[c+1][r]&&(a=!0),s===n&&r>0&&"."!==w[c][r-1]&&(a=!0),s===n&&r<14&&"."!==w[c][r+1]&&(a=!0)}return e===t&&s>0&&"."!==W.squares[e][s-1]&&(i=!0),e===t&&n<14&&"."!==W.squares[e][n+1]&&(i=!0),s===n&&e>0&&"."!==W.squares[e-1][s]&&(i=!0),s===n&&t<14&&"."!==W.squares[t+1][s]&&(i=!0),!(!i&&!a&&"."!==W.squares[7][7])||(window.alert("Words must be connected"),!1)}var se=function(){q(Object(c.a)(W.squares)),P(Object(c.a)(W.usedby)),m(Object(c.a)(W.ptiles)),x(Object(c.a)(W.gtiles)),A(-1),U([])},ne=function(e){o.send(JSON.stringify({gameid:s,type:"pb",func:"requestgamedata",requestor:t}))};return Object(n.jsxs)("div",{className:"container-fluid prisonbreak",onKeyDownCapture:function(e){if(e.preventDefault(),t===M)if("Enter"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var s=e.key.toUpperCase(),n="P"===M?h:v,r=n.indexOf(s);if(-1===r&&(r=n.indexOf("?")),r>-1){var i=H[0],a=H[1],o=H[2];if(i>-1&&a>-1&&""!==o){if("r"===o){for(var l=-1,u=a+1;u<15&&-1===l;u++)"."===w[i][u]&&(l=u);return void Z(i,a,r,-1===l?[-1,-1,""]:[i,l,"r"])}if("d"===o){for(var d=-1,b=i+1;b<15&&-1===d;b++)"."===w[b][a]&&(d=b);return void Z(i,a,r,-1===d?[-1,-1,""]:[d,a,"d"])}}}}else if("Backspace"===e.key&&J.length>0){var j=J[J.length-1],f=Object(c.a)(J),p=Object(c.a)(h),O=Object(c.a)(v),g=Object(c.a)(T),y=Object(c.a)(w),k=[-1,-1,""],N=G;f.splice(J.length-1,1);var S=parseInt(j.split("-")[0]),C=parseInt(j.split("-")[1]),E=w[S][C];"P"===M?(p.push(E),N=p.length-1):(O.push(E),N=O.length-1),g[S][C]="",y[S][C]=".";var I=H[2];""!==I&&(k=[S,C,I],1===J.length&&(N=-1)),U(f),x(O),m(p),q(y),P(g),X(k),A(N)}}else"P"===M?$():ee()},children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-1 pbGameid",children:["Game id: ",s]}),Object(n.jsxs)("div",{className:"col-10 pbtitle",children:["Prison Break",Object(n.jsx)("span",{className:"material-icons",children:"run_circle"})]}),Object(n.jsxs)("div",{className:"col-1 pbhomelink",children:[Object(n.jsx)("button",{id:"requestGameData","data-toggle":"tooltip",title:"Sync with opponent",onClick:function(){ne()},children:Object(n.jsx)("i",{className:"material-icons",children:"sync"})}),Object(n.jsx)(a.a,{href:"../../",children:Object(n.jsx)("a",{children:Object(n.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col pbPrisoners",children:Object(n.jsx)(N,{ptiles:h,whoseturn:M,selection:G,onClick:function(e){return t=e,void("P"===M?A(t):alert("It is not your turn"));var t},onClickFinishTurn:function(){return $()},onClickTileRecall:function(){return se()},onClickTileExchange:function(){return function(){if(d.length<7)window.alert("Need 7 in the bag to exchange");else{for(var e=[],t=Object(c.a)(d);e.length<7&&t.length>0;){var n=Math.floor(Math.random()*t.length);e.push(t[n]),t.splice(n,1)}e.sort(),(t=[].concat(Object(c.a)(t),Object(c.a)(W.ptiles))).sort(),q(Object(c.a)(W.squares)),P(Object(c.a)(W.usedby)),R("G"),A(-1),U([]),m(e),b(t),z(!1),Q({squares:Object(c.a)(W.squares),usedby:Object(c.a)(W.usedby),ptiles:[].concat(e),gtiles:Object(c.a)(v)}),o.send(JSON.stringify({gameid:s,type:"pb",func:"ept",whoseturn:"G",squares:W.squares,usedby:W.usedby,ptiles:e,tiles:t,passed:!1,rescues:D}))}}()},onClickPassPlay:function(){return function(){se();var e=Y?"X":"G";R(e),z(!0),o.send(JSON.stringify({gameid:s,type:"pb",func:"ept",squares:W.squares,usedby:W.usedby,ptiles:W.ptiles,tiles:d,whoseturn:e,passed:!0,rescues:D}))}()},rescues:D,prisonersOrGuards:t})}),Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("div",{className:"row",children:t===M?Object(n.jsx)(O,{squares:w,usedby:T,rcd:H,onClick:function(e,t){return Z(e,t,-1,null)}}):Object(n.jsx)(O,{squares:w,usedby:T,rcd:H,onClick:function(){}})}),Object(n.jsx)("div",{className:"row pbUnderboard",children:"X"===M?Object(n.jsx)("h1",{children:"Game Over!"}):t===M?Object(n.jsx)("p",{children:"Two peanuts were walking down a back alley. One was a salted."}):Object(n.jsxs)("p",{children:["If you do not see your opponents last move then click the\xa0",Object(n.jsx)("button",{id:"requestGameData2","data-toggle":"tooltip",title:"Sync with opponent",onClick:function(){ne()},children:Object(n.jsx)("i",{className:"material-icons",children:"sync"})}),"\xa0button"]})})]}),Object(n.jsx)("div",{className:"col pbGuards",children:Object(n.jsx)(S,{gtiles:v,whoseturn:M,selection:G,onClick:function(e){return t=e,void("G"===M?A(t):alert("It is not your turn"));var t},onClickFinishTurn:function(){return ee()},onClickTileRecall:function(){return se()},onClickTileExchange:function(){return function(){if(d.length<7)window.alert("Need 7 in the bag to exchange");else{for(var e=[],t=Object(c.a)(d);e.length<7&&t.length>0;){var n=Math.floor(Math.random()*t.length);e.push(t[n]),t.splice(n,1)}e.sort(),(t=[].concat(Object(c.a)(t),Object(c.a)(W.gtiles))).sort(),q(Object(c.a)(W.squares)),P(Object(c.a)(W.usedby)),R("P"),A(-1),U([]),x(e),b(t),z(!1),Q({squares:Object(c.a)(W.squares),usedby:Object(c.a)(W.usedby),ptiles:Object(c.a)(h),gtiles:[].concat(e)}),o.send(JSON.stringify({gameid:s,type:"pb",func:"egt",whoseturn:"P",squares:W.squares,usedby:W.usedby,gtiles:e,tiles:t,passed:!1}))}}()},onClickPassPlay:function(){return function(){se();var e=Y?"X":"P";R(e),z(!0),o.send(JSON.stringify({gameid:s,type:"pb",func:"egt",squares:W.squares,usedby:W.usedby,gtiles:W.gtiles,tiles:d,whoseturn:e,passed:!0}))}()},prisonersOrGuards:t})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsx)(g,{tiles:d,othertiles:"P"===t?v:h})})]})]})},g=function(e){var t=[].concat(Object(c.a)(e.tiles),Object(c.a)(e.othertiles));return t.sort(),"?"===t[0]&&(t.splice(0,1),t.push("?")),"?"===t[0]&&(t.splice(0,1),t.push("?")),Object(n.jsxs)("div",{className:"pbTilepool",children:[Object(n.jsx)("span",{className:"pbTilepoolTitle",children:"TILES"}),Object(n.jsx)("div",{className:"pbTilepoolDivider"}),t.map((function(e,s){return Object(n.jsxs)("span",{children:[s>0&&e!==t[s-1]?Object(n.jsx)("div",{className:"pbTilepoolDivider"}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("span",{className:"pbTilepoolTile",children:e})]},"tile".concat(s))}))]})},y=function(e){return Object(n.jsx)("span",{className:e.tileclass,onClick:e.onClick,children:e.tilevalue})},v=function(e){return Object(n.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(n.jsxs)("span",{className:"pbActionButtonText",children:[Object(n.jsx)("i",{className:"material-icons",children:"check"}),"\xa0Finish Turn"]})})},x=function(e){return Object(n.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(n.jsxs)("span",{className:"pbActionButtonText",children:[Object(n.jsx)("i",{className:"material-icons",children:"undo"}),"\xa0Recall Tiles"]})})},k=function(e){return Object(n.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(n.jsxs)("span",{className:"pbActionButtonText",children:[Object(n.jsx)("i",{className:"material-icons",children:"cached"}),"\xa0Swap Tiles"]})})},w=function(e){return Object(n.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:Object(n.jsxs)("span",{className:"pbActionButtonText",children:[Object(n.jsx)("i",{className:"material-icons",children:"not_interested"}),"\xa0Pass Turn"]})})},N=function(e){var t,s=q(e);return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{className:"pbPlayerTitle",children:[Object(n.jsx)("i",{className:"material-icons",children:"run_circle run_circle run_circle"}),"\xa0PRISONERS\xa0",Object(n.jsx)("i",{className:"material-icons",children:"run_circle run_circle run_circle"})]}),Object(n.jsx)("p",{className:"pbTilerack",children:e.ptiles.map((function(t,n){return s("P"===e.whoseturn&&e.selection===n?"pbTileOnRackSelectedP":"pbTileOnRackP",n,"P"===e.prisonersOrGuards?t:"*")}))}),"P"===e.whoseturn&&"P"===e.prisonersOrGuards?C(e):Object(n.jsx)(n.Fragment,{}),Object(n.jsxs)("p",{children:["Rescues made: ",e.rescues,Object(n.jsx)("br",{}),(t=e.rescues,Array(t).fill("nonsense").map((function(e,t){return Object(n.jsx)("span",{"data-toggle":"tooltip",title:"I'm free! I'm free!",children:Object(n.jsx)("img",{src:"/breakfree.png",alt:"I'm free! I'm free!",width:"100",height:"100"})},e+String(t))})))]})]})},S=function(e){var t=q(e);return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{className:"pbPlayerTitle",children:[Object(n.jsx)("i",{className:"material-icons",children:"security security security"}),"\xa0GUARDS\xa0",Object(n.jsx)("i",{className:"material-icons",children:"security security security"})]}),Object(n.jsx)("p",{className:"pbTilerack",children:e.gtiles.map((function(s,n){return t("G"===e.whoseturn&&e.selection===n?"pbTileOnRackSelectedG":"pbTileOnRackG",n,"G"===e.prisonersOrGuards?s:"*")}))}),"G"===e.whoseturn&&"G"===e.prisonersOrGuards?C(e):Object(n.jsx)(n.Fragment,{})]})};function q(e){return function(t,s,c){return"*"!==c?Object(n.jsx)(y,{tileclass:t,tilevalue:c,onClick:function(){return e.onClick(s)}},t+String(s)):Object(n.jsx)(y,{tileclass:t,tilevalue:c,onClick:function(){return window.alert("No peeking!")}},t+String(s))}}function C(e){return Object(n.jsxs)("div",{className:"pbActionButtonDiv",children:[Object(n.jsx)("p",{children:Object(n.jsx)(v,{onClick:function(){return e.onClickFinishTurn()}})}),Object(n.jsx)("p",{children:Object(n.jsx)(x,{onClick:function(){return e.onClickTileRecall()}})}),Object(n.jsx)("p",{children:Object(n.jsx)(k,{onClick:function(){return e.onClickTileExchange()}})}),Object(n.jsx)("p",{children:Object(n.jsx)(w,{onClick:function(){return e.onClickPassPlay()}})})]})}},YFqc:function(e,t,s){e.exports=s("cTJO")},cTJO:function(e,t,s){"use strict";var n=s("J4zp"),c=s("284h");t.__esModule=!0,t.default=void 0;var r=c(s("q1tI")),i=s("elyg"),a=s("nOHt"),o=s("vNVm"),l={};function u(e,t,s,n){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,s,n).catch((function(e){0}));var c=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;l[t+"%"+s+(c?"%"+c:"")]=!0}}var d=function(e){var t=!1!==e.prefetch,s=(0,a.useRouter)(),c=s&&s.pathname||"/",d=r.default.useMemo((function(){var t=(0,i.resolveHref)(c,e.href,!0),s=n(t,2),r=s[0],a=s[1];return{href:r,as:e.as?(0,i.resolveHref)(c,e.as):a||r}}),[c,e.href,e.as]),b=d.href,j=d.as,f=e.children,p=e.replace,h=e.shallow,O=e.scroll,m=e.locale;"string"===typeof f&&(f=r.default.createElement("a",null,f));var g=r.Children.only(f),y=g&&"object"===typeof g&&g.ref,v=(0,o.useIntersection)({rootMargin:"200px"}),x=n(v,2),k=x[0],w=x[1],N=r.default.useCallback((function(e){k(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,k]);(0,r.useEffect)((function(){var e=w&&t&&(0,i.isLocalURL)(b),n="undefined"!==typeof m?m:s&&s.locale,c=l[b+"%"+j+(n?"%"+n:"")];e&&!c&&u(s,b,j,{locale:n})}),[j,b,w,m,t,s]);var S={ref:N,onClick:function(e){g.props&&"function"===typeof g.props.onClick&&g.props.onClick(e),e.defaultPrevented||function(e,t,s,n,c,r,a,o){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(s))&&(e.preventDefault(),null==a&&(a=n.indexOf("#")<0),t[c?"replace":"push"](s,n,{shallow:r,locale:o,scroll:a}).then((function(e){e&&a&&document.body.focus()})))}(e,s,b,j,p,h,O,m)},onMouseEnter:function(e){(0,i.isLocalURL)(b)&&(g.props&&"function"===typeof g.props.onMouseEnter&&g.props.onMouseEnter(e),u(s,b,j,{priority:!0}))}};if(e.passHref||"a"===g.type&&!("href"in g.props)){var q="undefined"!==typeof m?m:s&&s.locale,C=(0,i.getDomainLocale)(j,q,s&&s.locales,s&&s.domainLocales);S.href=C||(0,i.addBasePath)((0,i.addLocale)(j,q,s&&s.defaultLocale))}return r.default.cloneElement(g,S)};t.default=d},vNVm:function(e,t,s){"use strict";var n=s("J4zp"),c=s("TqRt");t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,s=e.disabled||!a,c=(0,r.useRef)(),l=(0,r.useState)(!1),u=n(l,2),d=u[0],b=u[1],j=(0,r.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),s||d||e&&e.tagName&&(c.current=function(e,t,s){var n=function(e){var t=e.rootMargin||"",s=o.get(t);if(s)return s;var n=new Map,c=new IntersectionObserver((function(e){e.forEach((function(e){var t=n.get(e.target),s=e.isIntersecting||e.intersectionRatio>0;t&&s&&t(s)}))}),e);return o.set(t,s={id:t,observer:c,elements:n}),s}(s),c=n.id,r=n.observer,i=n.elements;return i.set(e,t),r.observe(e),function(){i.delete(e),r.unobserve(e),0===i.size&&(r.disconnect(),o.delete(c))}}(e,(function(e){return e&&b(e)}),{rootMargin:t}))}),[s,t,d]);return(0,r.useEffect)((function(){a||d||(0,i.default)((function(){return b(!0)}))}),[d]),[j,d]};var r=s("q1tI"),i=c(s("0G5g")),a="undefined"!==typeof IntersectionObserver;var o=new Map}},[["2Skw",0,2,1,3]]]);