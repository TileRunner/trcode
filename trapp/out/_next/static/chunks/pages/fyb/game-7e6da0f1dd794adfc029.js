(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4339:function(e,n,s){"use strict";s.d(n,{j6:function(){return t},dK:function(){return r},oZ:function(){return a},e:function(){return o},dY:function(){return i},$B:function(){return c}});var t="fyb",r="U",a="P",o="GAME_DATA",i="GAME_CREATED",c=2e4},1863:function(e,n,s){"use strict";s.r(n);var t=s(5893),r=s(7294),a=s(4339);function o(e,n){return n.map((function(n){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"fybGamePlayer",children:n.nickname}),(0,t.jsx)("td",{className:"fybGameWord",children:n.pass?(0,t.jsx)("span",{className:"fybGameWord pass",children:" passed"}):(0,t.jsx)("span",{className:"fybGameWord ".concat(n.valid?"valid":"invalid"),children:n.word})})]},"".concat(e).concat(n.nickname))}))}function i(e,n,s,r,o,i,l,d){return(0,t.jsxs)("div",{onKeyDownCapture:e,children:[(0,t.jsx)("div",{className:"fybGameEnterWordLabel",children:"Enter Word:"}),(0,t.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){s(e.target.value)}}),(0,t.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,t.jsx)("button",{className:"fybGameWordSubmitButton",onClick:function(){c(n,r,o,i,l,d,s)},children:"SUBMIT"},"submitWord"),(0,t.jsx)("button",{className:"fybGameWordPassButton",onClick:function(){!function(e,n,s,t,r,o){e("Sending PASS ... shouldn't take long."),n.send({type:a.j6,func:"move",pass:!0,valid:!1,thisisme:s,gameid:t,nickname:r,timestamp:Date.now(),word:""}),o("")}(o,i,l,r.gameid,d,s)},children:"PASS"},"passButton")]})]})}function c(e,n,s,t,r,o,i){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var d=n.movesThisRound[l].word;if(d===c)return void s("You cannot reuse a previous word from this round (".concat(d,")."));if(d+"S"===c&&"S"!==d.substring(d.length-1)&&n.movesThisRound[l].valid)return void s("You cannot add S to a previous valid word (".concat(d,") from this round unless it ends with S."))}for(var u=0;u<n.fryLetters.length;u++){for(var f=0,m=0,h=0;h<n.fryLetters.length;h++)n.fryLetters[u]===n.fryLetters[h]&&(f+=1);for(var v=0;v<c.length;v++)n.fryLetters[u]===c[v]&&(m+=1);if(m<f)return void s("You need the letter ".concat(n.fryLetters[u]," at least ").concat(f," time").concat(1===f?".":"s."))}s("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),t.send({type:a.j6,func:"move",pass:!1,thisisme:r,gameid:n.gameid,nickname:o,timestamp:Date.now(),word:c}),i("")}n.default=function(e){var n=e.setWhereto,s=e.client,l=e.thisisme,d=e.wsmessage,u=e.nickname,f=e.gameid,m=(0,r.useState)(""),h=m[0],v=m[1],p=(0,r.useState)({goal:99,whoseturn:-1,players:[{index:0,nickname:"Loading..."}]}),y=p[0],j=p[1],x=(0,r.useState)(""),g=x[0],b=x[1],N=(0,r.useState)(""),S=N[0],w=N[1];(0,r.useEffect)((function(){var e=setInterval((function(){y.whoseturn>-1&&y.players.length>0&&s.send({type:a.j6,func:"interval",syncstamp:S,thisisme:l,nickname:u,gameid:y.gameid})}),a.$B);return function(){return clearInterval(e)}})),(0,r.useEffect)((function(){""!==d&&function(e){var n=JSON.parse(e);n.type===a.j6&&(n.func===a.e?(v(n.snat),j(n.game),w(n.game.syncstamp)):(n.func=a.dY)||v("Unhandled message: ".concat(e)))}(d)}),[d]);var k=function(){if(y.whoseturn<0)return!1;if(y.freeforall){if(y.excludedPlayer===u)return!1;for(var e=0;e<y.freeforallMoves.length;e++)if(y.freeforallMoves[e].nickname===u)return!1;return!0}return u===y.players[y.whoseturn].nickname};return(0,t.jsxs)("div",{className:"fybGame",children:[(0,t.jsxs)("div",{className:"fybHeaderDiv",children:[(0,t.jsx)("span",{className:"h2",children:"Fry Your Brain"}),(0,t.jsx)("button",{className:"fybHomeButton",onClick:function(){n("menu")},children:(0,t.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,t.jsx)("div",{className:"fybHeaderDiv",children:(0,t.jsxs)("span",{className:"h4",children:["Game id: ",f]})}),(0,t.jsx)("table",{children:(0,t.jsxs)("tbody",{children:[(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:"2",className:"fybGameSectionHeader",children:["First to ",y.goal," wins!"]})}),y.players.map((function(e){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"fybGamePlayer",children:e.nickname}),(0,t.jsxs)("td",{class:"fybGameScore",children:[e.points<10?(0,t.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=y.goal&&(0,t.jsx)("span",{class:"fybWinner",children:"Winner!"})]})]},"Player".concat(e.index))})),y.movesPrevRound&&y.movesPrevRound.length>0&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"Previous round:"})}),y.movesPrevRound&&y.movesPrevRound.length>0&&o("movesPrevRound",y.movesPrevRound),y.movesThisRound&&y.movesThisRound.length>0&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"This round:"})}),y.movesThisRound&&y.movesThisRound.length>0&&o("movesThisRound",y.movesThisRound),!y.freeforall&&y.freeforallMoves&&y.freeforallMoves.length>0&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"Free-for-all:"})}),!y.freeforall&&y.freeforallMoves&&y.freeforallMoves.length>0&&o("ffaMoves",y.freeforallMoves)]})}),y.whoseturn>-1&&(0,t.jsxs)("div",{className:"fryLetterDiv",children:["Letters:\xa0",y.fryLetters.map((function(e,n){return(0,t.jsx)("span",{className:"fryLetter",children:e},"FryLetter".concat(n))}))]}),k()&&i((function(e){if(k())return"Enter"===e.key?(e.preventDefault(),void c(g,y,v,s,l,u,b)):void 0}),g,b,y,v,s,l,u),(0,t.jsxs)("div",{children:[y.gameOver&&(0,t.jsxs)("div",{className:"fybGameOver",children:[(0,t.jsx)("span",{className:"fybGameSectionHeader",children:"Game Over"}),(0,t.jsx)("button",{className:"fybGameWordSubmitButton",onClick:function(){!function(e,n,s,t){e.send({type:a.j6,func:"replay",thisisme:n,game:s,nickname:t,timestamp:Date.now()})}(s,l,y,u)},children:"PLAY AGAIN"})]}),(0,t.jsx)("p",{className:"fybSnat",children:h})]})]})}},1313:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/game",function(){return s(1863)}])}},function(e){e.O(0,[774,888,179],(function(){return n=1313,e(e.s=n);var n}));var n=e.O();_N_E=n}]);