(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return r},dK:function(){return s},oZ:function(){return a},e:function(){return i},$B:function(){return c}});var r="fyb",s="U",a="P",i="GAME_DATA",c=2e4},1863:function(e,n,t){"use strict";t.r(n);var r=t(809),s=t.n(r),a=t(2447),i=t(5893),c=t(7294),o=t(4339);function l(e,n,t,r,s,a){return(0,i.jsxs)("div",{className:"w3-quarter w3-margin",onKeyDownCapture:e,children:[(0,i.jsx)("label",{children:"Enter Word:"}),(0,i.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"word",value:n,onChange:function(e){t(e.target.value.toUpperCase())}})]})}function u(){return(u=(0,a.Z)(s().mark((function e(n,t,r,a,i,c,l){var u,d,h,m,f,p,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=0;case 1:if(!(u<t.length)){e.next=12;break}for(d=0,h=0,m=0;m<t.length;m++)t[u]===t[m]&&(d+=1);for(f=0;f<n.length;f++)t[u]===n[f]&&(h+=1);if(!(h<d)){e.next=9;break}return r("You need the letter ".concat(t[u]," at least ").concat(d," time").concat(1===d?".":"s.")),e.abrupt("return");case 9:u++,e.next=1;break;case 12:return r("Checking your word ... shouldn't take long."),"https://tilerunner.herokuapp.com/ENABLE2K?exists=",e.next=16,fetch("https://tilerunner.herokuapp.com/ENABLE2K?exists="+n);case 16:return p=e.sent,e.next=19,p.json();case 19:v=e.sent,a.send({type:o.j6,func:"move",valid:v.exists,thisisme:i,gameid:c,nickname:l,timestamp:Date.now(),word:n});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e){var n=e.setWhereto,t=e.client,r=e.thisisme,s=(e.setParticipant,e.wsmessage),a=e.nickname,d=e.gameid,h=e.numPlayers,m=(0,c.useState)(""),f=m[0],p=m[1],v=(0,c.useState)({whoseturn:-1,players:[{index:0,nickname:"Loading..."}]}),w=v[0],x=v[1],y=(0,c.useState)(""),j=y[0],g=y[1],N=(0,c.useState)(""),k=N[0],b=N[1];(0,c.useEffect)((function(){var e=setInterval((function(){t.send({type:o.j6,func:"interval",syncstamp:k,thisisme:r,nickname:a,gameid:w.gameid})}),o.$B);return function(){return clearInterval(e)}})),(0,c.useEffect)((function(){""!==s&&function(e){var n=JSON.parse(e);n.type===o.j6&&(n.func===o.e?(console.log(n.game),p(n.snat),x(n.game),b(n.game.syncstamp)):p("Unhandled message: ".concat(e)))}(s)}),[s]);var E=function(){if(w.whoseturn<0)return!1;if(w.freeforall){if(w.excludedPlayer===a)return!1;for(var e=0;e<w.playersWhoMoved.length;e++)if(w.playersWhoMoved[e].nickname===a)return!1;return!0}return a===w.players[w.whoseturn].nickname};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"w3-teal w3-cell-row",children:[(0,i.jsx)("div",{className:"w3-container w3-cell w3-cell-middle w3-padding w3-mobile",children:(0,i.jsx)("h1",{className:"myHeadingFont",children:"Fry Your Brain"})}),(0,i.jsxs)("div",{className:"w3-container w3-cell w3-mobile",children:[(0,i.jsxs)("h4",{className:"myCommonFont",children:["Game id: ",d]}),(0,i.jsxs)("h4",{className:"myCommonFont",children:["Nickname: ",a]}),(0,i.jsxs)("h4",{className:"myCommonFont",children:[h," player game"]})]}),(0,i.jsx)("div",{className:"w3-container w3-cell w3-padding w3-mobile",children:(0,i.jsx)("button",{className:"w3-button",onClick:function(){n("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]}),(0,i.jsx)("h1",{children:"Game under construction"}),(0,i.jsx)("p",{children:f}),(0,i.jsx)("div",{className:"w3-container w3-responsive w3-quarter",children:(0,i.jsxs)("table",{className:"w3-table w3-card",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"w3-teal",children:[(0,i.jsx)("th",{children:"Player"}),(0,i.jsx)("th",{children:"Points"})]})}),(0,i.jsx)("tbody",{children:w.players.map((function(e){return(0,i.jsxs)("tr",{className:"w3-green",children:[(0,i.jsx)("td",{children:e.nickname}),(0,i.jsxs)("td",{class:"w3-monospace",children:["\xa0\xa0",e.points<10?(0,i.jsx)("span",{children:"\xa0"}):"",e.points]})]},"Player".concat(e.index))}))})]})}),!w.freeforall&&w.playersWhoMoved&&w.playersWhoMoved.length>0&&(0,i.jsxs)("div",{class:"w3-container",children:[(0,i.jsx)("h2",{children:"Previous free for all results:"}),w.playersWhoMoved.map((function(e){return(0,i.jsxs)("p",{children:[e.nickname," played ",e.word," ",e.valid?"(valid)":"(invalid)"]},"PlayerWhoMovedFFA".concat(e.nickname))}))]}),w.movesThisRound&&w.movesThisRound.length>0&&(0,i.jsxs)("div",{className:"w3-container",children:[(0,i.jsx)("h2",{children:"Moves this round:"}),w.movesThisRound.map((function(e){return(0,i.jsxs)("p",{children:[e.nickname," played ",e.word," ",e.valid?"(valid)":"(invalid)"]},"PlayerWhoMovedThisRound".concat(e.nickname))}))]}),w.fryLetters&&(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("h2",{className:"w3-white w3-quarter",children:["Fry Letters: ",w.fryLetters]})}),E()&&l((function(e){if(E())return"Enter"===e.key?(e.preventDefault(),void function(e,n,t,r,s,a,i){u.apply(this,arguments)}(j,w.fryLetters,p,t,r,d,a)):void 0}),j,g,w.fryLetters,p,t)]})}},1313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/game",function(){return t(1863)}])},2447:function(e,n,t){"use strict";function r(e,n,t,r,s,a,i){try{var c=e[a](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,s)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(s,a){var i=e.apply(n,t);function c(e){r(i,s,a,c,o,"next",e)}function o(e){r(i,s,a,c,o,"throw",e)}c(void 0)}))}}t.d(n,{Z:function(){return s}})}},function(e){e.O(0,[774,888,179],(function(){return n=1313,e(e.s=n);var n}));var n=e.O();_N_E=n}]);