(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return r},dK:function(){return s},oZ:function(){return a},e:function(){return i},hA:function(){return o},$B:function(){return c}});var r="fyb",s="U",a="P",i="GAME_DATA",o="GAME_LIST",c=2e4},3939:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var r=function(e){var n=document.getElementById(e);n&&(n.scrollTop=n.scrollHeight)}},2374:function(e,n,t){"use strict";t.d(n,{D:function(){return s}});var r=t(7294);function s(e){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=e})),n.current}},1863:function(e,n,t){"use strict";t.r(n);var r=t(5893),s=t(1385),a=t(7294),i=t(9359),o=t(4339),c=t(2374),l=t(7666),u=t(3939);function d(e,n){return n.map((function(n){return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[n.nickname,(0,r.jsx)("span",{className:"floatright",children:":"})]}),(0,r.jsx)("td",{children:n.pass?(0,r.jsx)("span",{className:"trDanger",children:" passed"}):(0,r.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,r.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]},"".concat(e).concat(n.nickname))}))}function h(e,n,t,s,a,i,c,l){return(0,r.jsxs)("div",{onKeyDownCapture:e,children:[(0,r.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,r.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,r.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,r.jsx)("button",{className:"trButton",onClick:function(){f(n,s,a,i,c,l,t)},children:"SUBMIT"},"submitWord"),(0,r.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s,a){e("Sending PASS ... shouldn't take long."),n.send({type:o.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:r,nickname:s,timestamp:Date.now(),word:""}),a("")}(a,i,c,s.gameid,l,t)},children:"PASS"},"passButton")]})]})}function f(e,n,t,r,s,a,i){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var u=n.movesThisRound[l].word;if(u===c)return void t("You cannot reuse a previous word from this round (".concat(u,")."));if(u+"S"===c&&"S"!==u.substring(u.length-1)&&n.movesThisRound[l].valid)return void t("You cannot add S to a previous valid word (".concat(u,") from this round unless it ends with S."))}for(var d=0;d<n.fryLetters.length;d++){for(var h=0,f=0,m=0;m<n.fryLetters.length;m++)n.fryLetters[d]===n.fryLetters[m]&&(h+=1);for(var v=0;v<c.length;v++)n.fryLetters[d]===c[v]&&(f+=1);if(f<h)return void t("You need the letter ".concat(n.fryLetters[d]," at least ").concat(h," time").concat(1===h?".":"s."))}t("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),r.send({type:o.j6,func:"move",pass:!1,thisisme:s,gameid:n.gameid,nickname:a,timestamp:Date.now(),clientRound:n.round,clientMovesLength:n.movesThisRound.length,word:c}),i("")}n.default=function(e){var n=e.setWhereto,t=e.client,m=e.thisisme,v=e.wsmessage,p=e.nickname,g=e.gameid,x=(0,a.useState)([]),j=x[0],y=x[1],N=(0,a.useState)(""),k=N[0],S=N[1],w=(0,a.useState)(""),b=w[0],L=w[1],C=(0,a.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:-1,fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),T=C[0],R=C[1],P=(0,a.useState)(""),E=P[0],A=P[1],M=(0,a.useState)(""),_=M[0],B=M[1],D=(0,a.useState)(-1),O=D[0],I=D[1],F=(0,c.D)(T);(0,a.useEffect)((function(){(0,u.O)("ScrollableChat")}),[j]),(0,a.useEffect)((function(){var e=setInterval((function(){T.whoseturn>-1&&T.players.length>0&&t.send({type:o.j6,func:"interval",syncstamp:_,thisisme:m,nickname:p,gameid:T.gameid})}),o.$B);return function(){return clearInterval(e)}})),(0,a.useEffect)((function(){""!==v&&function(e){var n=JSON.parse(e);if(n.type===o.j6)if("chat"===n.func){var r=[].concat((0,s.Z)(j),[{from:n.nickname,msg:n.sendmsg}]);y(r)}else n.func===o.e?n.game.gameindex===T.gameindex&&n.game.round===T.round&&n.goal===T.goal&&n.players.length===T.players.length&&n.game.movesThisRound.length===T.movesThisRound.length||(S(n.snat),I(-1),R(n.game),B(n.game.syncstamp),L("")):n.func===o.S2C_FUNC_GAMECREATED||t.send({type:o.j6,func:"rejoin",thisisme:m,gameid:T.gameid,nickname:p,timestamp:Date.now()})}(v)}),[v]),(0,a.useEffect)((function(){if(F&&T.gameindex===F.gameindex&&T.round===F.round&&T.freeforall&&!F.freeforall){var e=document.createElement("audio");e.src=T.movesThisRound[T.movesThisRound.length-1].pass?"https://tilerunner.github.io/Pass.m4a":"https://tilerunner.github.io/Oops.m4a",e.play()}}),[T]);var J=function(){if(T.whoseturn<0)return!1;if(T.freeforall){if(T.excludedPlayer===p)return!1;for(var e=0;e<T.freeforallMoves.length;e++)if(T.freeforallMoves[e].nickname===p)return!1;return!0}return p===T.players[T.whoseturn].nickname},Z=(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"trSubtitle",children:[g,", ",p]}),(0,r.jsx)("table",{className:"trTable",children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{children:(0,r.jsxs)("th",{colSpan:"2",children:["First to ",T.goal," wins!"]})}),T.players.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[e.nickname,e.wins>0&&(0,r.jsxs)("span",{children:[" (",e.wins,")"]}),(0,r.jsx)("span",{className:"floatright",children:":"})]}),(0,r.jsxs)("td",{children:[e.points<10?(0,r.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=T.goal&&(0,r.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player".concat(e.index))})),T.movesPrevRound&&T.movesPrevRound.length>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:"2",children:"Previous round:"})}),T.movesPrevRound&&T.movesPrevRound.length>0&&d("movesPrevRound",T.movesPrevRound),T.movesThisRound&&T.movesThisRound.length>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:"2",children:"This round:"})}),T.movesThisRound&&T.movesThisRound.length>0&&d("movesThisRound",T.movesThisRound),!T.freeforall&&T.freeforallMoves&&T.freeforallMoves.length>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!T.freeforall&&T.freeforallMoves&&T.freeforallMoves.length>0&&d("ffaMoves",T.freeforallMoves)]})}),T.whoseturn>-1&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,r.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=T.fryLetters.length,n=(0,s.Z)(T.fryLetters),t=[];t.length<e;){var r=Math.floor(Math.random()*n.length);t.push(n[r]),n.splice(r,1)}var a=JSON.parse(JSON.stringify(T));a.fryLetters=[].concat(t),R(a)},children:(0,r.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,r.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=(0,s.Z)(T.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(T));n.fryLetters=(0,s.Z)(e),R(n)},children:(0,r.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,r.jsx)("div",{className:"fryLetterDiv",children:T.fryLetters.map((function(e,n){return(0,r.jsx)("span",{className:n===O?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=T.fryLetters[n],t=(0,s.Z)(T.fryLetters);t.splice(n,1),t.push(e);var r=JSON.parse(JSON.stringify(T));r.fryLetters=(0,s.Z)(t),R(r),I(-1)},onClick:function(){if(-1===O)I(n);else if(n===O)I(-1);else{for(var e=[],t=T.fryLetters[O],r=0;r<T.fryLetters.length;r++){var s=T.fryLetters[r];r===n&&e.push(t),r!==O&&e.push(s)}var a=JSON.parse(JSON.stringify(T));a.fryLetters=[].concat(e),R(a),I(-1)}},children:e},"FryLetter".concat(n))}))}),(0,r.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",T.numPossibleAnswers,")"]})]}),J()&&h((function(e){if(J())return"Enter"===e.key?(e.preventDefault(),void f(E,T,L,t,m,p,A)):void 0}),E,A,T,L,t,m,p),(0,r.jsxs)("div",{children:[T.gameOver&&(0,r.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",(0,r.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r){e.send({type:o.j6,func:"replay",thisisme:n,game:t,nickname:r,timestamp:Date.now()})}(t,m,T,p)},children:"PLAY AGAIN"})]}),(0,r.jsx)("div",{className:"trParagraph",children:k}),b&&(0,r.jsx)("div",{className:"trParagraph trWarning",children:b})]})]});return(0,r.jsxs)("div",{className:"trBackground",children:[(0,r.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,r.jsx)("button",{className:"trButton",onClick:function(){n("menu")},children:(0,r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,r.jsx)(i.A_,{children:Z}),(0,r.jsx)(i.I3,{children:(0,r.jsx)("div",{className:"container-fluid",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-6",children:Z}),(0,r.jsx)("div",{className:"col-6",children:(0,r.jsx)(l.default,{gameid:g,client:t,nickname:p,msgs:j,setMsgs:y})})]})})})]})}},7666:function(e,n,t){"use strict";t.r(n);var r=t(5893),s=t(1385),a=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,i=e.client,o=e.nickname,c=e.msgs,l=void 0===c?[]:c,u=e.setMsgs,d=e.participant,h=void 0===d?"":d,f=(0,a.useState)(""),m=f[0],v=f[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,r.jsx)("table",{className:"pbChatTable",children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pbChatFrom",children:e.from}),(0,r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(n))})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===o?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){v(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=[].concat((0,s.Z)(l),[{from:o,msg:m}]),r=m;return u(n),v(""),void i.send({gameid:t,nickname:o,type:i.clientType,func:"chat",sender:h,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var a=m.slice(0,m.length-1);v(a)}},placeholder:"chat..."})})})]})})})}},1313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/game",function(){return t(1863)}])}},function(e){e.O(0,[612,774,888,179],(function(){return n=1313,e(e.s=n);var n}));var n=e.O();_N_E=n}]);