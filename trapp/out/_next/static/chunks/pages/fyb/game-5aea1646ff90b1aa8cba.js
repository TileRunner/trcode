(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return r},dK:function(){return s},oZ:function(){return a},e:function(){return o},hA:function(){return i},$B:function(){return c}});var r="fyb",s="U",a="P",o="GAME_DATA",i="GAME_LIST",c=2e4},2374:function(e,n,t){"use strict";t.d(n,{D:function(){return s}});var r=t(7294);function s(e){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=e})),n.current}},1863:function(e,n,t){"use strict";t.r(n);var r=t(1385),s=t(5893),a=t(7294),o=t(4339),i=t(2374);function c(e,n){return n.map((function(n){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[n.nickname,(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsx)("td",{children:n.pass?(0,s.jsx)("span",{className:"trDanger",children:" passed"}):(0,s.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,s.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]},"".concat(e).concat(n.nickname))}))}function l(e,n,t,r,a,i,c,l){return(0,s.jsxs)("div",{onKeyDownCapture:e,children:[(0,s.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,s.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,s.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,s.jsx)("button",{className:"trButton",onClick:function(){u(n,r,a,i,c,l,t)},children:"SUBMIT"},"submitWord"),(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s,a){e("Sending PASS ... shouldn't take long."),n.send({type:o.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:r,nickname:s,timestamp:Date.now(),word:""}),a("")}(a,i,c,r.gameid,l,t)},children:"PASS"},"passButton")]})]})}function u(e,n,t,r,s,a,i){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var u=n.movesThisRound[l].word;if(u===c)return void t("You cannot reuse a previous word from this round (".concat(u,")."));if(u+"S"===c&&"S"!==u.substring(u.length-1)&&n.movesThisRound[l].valid)return void t("You cannot add S to a previous valid word (".concat(u,") from this round unless it ends with S."))}for(var d=0;d<n.fryLetters.length;d++){for(var f=0,h=0,m=0;m<n.fryLetters.length;m++)n.fryLetters[d]===n.fryLetters[m]&&(f+=1);for(var v=0;v<c.length;v++)n.fryLetters[d]===c[v]&&(h+=1);if(h<f)return void t("You need the letter ".concat(n.fryLetters[d]," at least ").concat(f," time").concat(1===f?".":"s."))}t("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),r.send({type:o.j6,func:"move",pass:!1,thisisme:s,gameid:n.gameid,nickname:a,timestamp:Date.now(),clientRound:n.round,clientMovesLength:n.movesThisRound.length,word:c}),i("")}n.default=function(e){e.ismobile;var n=e.setWhereto,t=e.client,d=e.thisisme,f=e.wsmessage,h=e.nickname,m=e.gameid,v=(0,a.useState)(""),p=v[0],g=v[1],y=(0,a.useState)(""),j=y[0],x=y[1],N=(0,a.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:-1,fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),S=N[0],w=N[1],b=(0,a.useState)(""),L=b[0],k=b[1],A=(0,a.useState)(""),R=A[0],T=A[1],P=(0,a.useState)(-1),C=P[0],E=P[1],_=(0,i.D)(S);(0,a.useEffect)((function(){var e=setInterval((function(){S.whoseturn>-1&&S.players.length>0&&t.send({type:o.j6,func:"interval",syncstamp:R,thisisme:d,nickname:h,gameid:S.gameid})}),o.$B);return function(){return clearInterval(e)}})),(0,a.useEffect)((function(){""!==f&&function(e){var n=JSON.parse(e);n.type===o.j6&&(n.func===o.e?n.game.gameindex===S.gameindex&&n.game.round===S.round&&n.goal===S.goal&&n.players.length===S.players.length&&n.game.movesThisRound.length===S.movesThisRound.length||(g(n.snat),E(-1),w(n.game),T(n.game.syncstamp),x("")):n.func===o.S2C_FUNC_GAMECREATED||t.send({type:o.j6,func:"rejoin",thisisme:d,gameid:S.gameid,nickname:h,timestamp:Date.now()}))}(f)}),[f]),(0,a.useEffect)((function(){if(_&&S.gameindex===_.gameindex&&S.round===_.round&&S.freeforall&&!_.freeforall){var e=document.createElement("audio");e.src=S.movesThisRound[S.movesThisRound.length-1].pass?"https://tilerunner.github.io/Pass.m4a":"https://tilerunner.github.io/Oops.m4a",e.play()}}),[S]);var O=function(){if(S.whoseturn<0)return!1;if(S.freeforall){if(S.excludedPlayer===h)return!1;for(var e=0;e<S.freeforallMoves.length;e++)if(S.freeforallMoves[e].nickname===h)return!1;return!0}return h===S.players[S.whoseturn].nickname};return(0,s.jsxs)("div",{className:"trBackground",children:[(0,s.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,s.jsx)("button",{className:"trButton",onClick:function(){n("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,s.jsxs)("div",{className:"trSubtitle",children:["Game id: ",m]}),(0,s.jsx)("table",{className:"trTable",children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:(0,s.jsxs)("th",{colSpan:"2",children:["First to ",S.goal," wins!"]})}),S.players.map((function(e){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[e.nickname,e.wins>0&&(0,s.jsxs)("span",{children:[" (",e.wins,")"]}),(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsxs)("td",{children:[e.points<10?(0,s.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=S.goal&&(0,s.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player".concat(e.index))})),S.movesPrevRound&&S.movesPrevRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Previous round:"})}),S.movesPrevRound&&S.movesPrevRound.length>0&&c("movesPrevRound",S.movesPrevRound),S.movesThisRound&&S.movesThisRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"This round:"})}),S.movesThisRound&&S.movesThisRound.length>0&&c("movesThisRound",S.movesThisRound),!S.freeforall&&S.freeforallMoves&&S.freeforallMoves.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!S.freeforall&&S.freeforallMoves&&S.freeforallMoves.length>0&&c("ffaMoves",S.freeforallMoves)]})}),S.whoseturn>-1&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=S.fryLetters.length,n=(0,r.Z)(S.fryLetters),t=[];t.length<e;){var s=Math.floor(Math.random()*n.length);t.push(n[s]),n.splice(s,1)}var a=JSON.parse(JSON.stringify(S));a.fryLetters=[].concat(t),w(a)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=(0,r.Z)(S.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(S));n.fryLetters=(0,r.Z)(e),w(n)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,s.jsx)("div",{className:"fryLetterDiv",children:S.fryLetters.map((function(e,n){return(0,s.jsx)("span",{className:n===C?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=S.fryLetters[n],t=(0,r.Z)(S.fryLetters);t.splice(n,1),t.push(e);var s=JSON.parse(JSON.stringify(S));s.fryLetters=(0,r.Z)(t),w(s),E(-1)},onClick:function(){if(-1===C)E(n);else if(n===C)E(-1);else{for(var e=[],t=S.fryLetters[C],r=0;r<S.fryLetters.length;r++){var s=S.fryLetters[r];r===n&&e.push(t),r!==C&&e.push(s)}var a=JSON.parse(JSON.stringify(S));a.fryLetters=[].concat(e),w(a),E(-1)}},children:e},"FryLetter".concat(n))}))}),(0,s.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",S.numPossibleAnswers,")"]})]}),O()&&l((function(e){if(O())return"Enter"===e.key?(e.preventDefault(),void u(L,S,x,t,d,h,k)):void 0}),L,k,S,x,t,d,h),(0,s.jsxs)("div",{children:[S.gameOver&&(0,s.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r){e.send({type:o.j6,func:"replay",thisisme:n,game:t,nickname:r,timestamp:Date.now()})}(t,d,S,h)},children:"PLAY AGAIN"})]}),(0,s.jsx)("div",{className:"trParagraph",children:p}),j&&(0,s.jsx)("div",{className:"trParagraph trWarning",children:j})]})]})}},1313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/game",function(){return t(1863)}])},1385:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function s(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return s}})}},function(e){e.O(0,[774,888,179],(function(){return n=1313,e(e.s=n);var n}));var n=e.O();_N_E=n}]);