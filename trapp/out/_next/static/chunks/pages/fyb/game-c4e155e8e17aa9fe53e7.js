(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return s},dK:function(){return r},oZ:function(){return a},e:function(){return i},dY:function(){return c},$B:function(){return o}});var s="fyb",r="U",a="P",i="GAME_DATA",c="GAME_CREATED",o=2e4},1863:function(e,n,t){"use strict";t.r(n);var s=t(809),r=t.n(s),a=t(2447),i=t(5893),c=t(7294),o=t(4339);function l(e,n,t,s,r,a,c,l,d){return(0,i.jsxs)("div",{className:"w3-quarter w3-margin",onKeyDownCapture:e,children:[(0,i.jsx)("label",{children:"Enter Word:"}),(0,i.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"word",value:n,onChange:function(e){t(e.target.value.toUpperCase())}}),n&&(0,i.jsx)("button",{className:"w3-button w3-green w3-margin",onClick:function(){u(n,s,r,a,c,l,d,t)},children:"SUBMIT"},"submitWord"),(0,i.jsx)("button",{className:"w3-button w3-red w3-margin",onClick:function(){!function(e,n,t,s,r,a){e("Sending PASS ... shouldn't take long."),n.send({type:o.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:s,nickname:r,timestamp:Date.now(),word:""}),a("")}(r,a,c,l,d,t)},children:"PASS"},"passButton")]})}function u(e,n,t,s,r,a,i,c){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)(r().mark((function e(n,t,s,a,i,c,l,u){var d,h,m,p,f,w,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=0;case 1:if(!(d<t.length)){e.next=12;break}for(h=0,m=0,p=0;p<t.length;p++)t[d]===t[p]&&(h+=1);for(f=0;f<n.length;f++)t[d]===n[f]&&(m+=1);if(!(m<h)){e.next=9;break}return s("You need the letter ".concat(t[d]," at least ").concat(h," time").concat(1===h?".":"s.")),e.abrupt("return");case 9:d++,e.next=1;break;case 12:return s("Checking your word ... shouldn't take long."),"https://tilerunner.herokuapp.com/ENABLE2K?exists=",e.next=16,fetch("https://tilerunner.herokuapp.com/ENABLE2K?exists="+n);case 16:return w=e.sent,e.next=19,w.json();case 19:v=e.sent,a.send({type:o.j6,func:"move",pass:!1,valid:v.exists,thisisme:i,gameid:c,nickname:l,timestamp:Date.now(),word:n}),u("");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e){var n=e.setWhereto,t=e.client,s=e.thisisme,r=(e.setParticipant,e.wsmessage),a=e.nickname,d=e.gameid,h=e.numPlayers,m=(0,c.useState)(""),p=m[0],f=m[1],w=(0,c.useState)({whoseturn:-1,players:[{index:0,nickname:"Loading..."}]}),v=w[0],x=w[1],j=(0,c.useState)(""),y=j[0],g=j[1],k=(0,c.useState)(""),N=k[0],b=k[1];(0,c.useEffect)((function(){var e=setInterval((function(){v.whoseturn>-1&&v.players.length>0&&t.send({type:o.j6,func:"interval",syncstamp:N,thisisme:s,nickname:a,gameid:v.gameid})}),o.$B);return function(){return clearInterval(e)}})),(0,c.useEffect)((function(){""!==r&&function(e){var n=JSON.parse(e);n.type===o.j6&&(n.func===o.e?(f(n.snat),x(n.game),b(n.game.syncstamp)):f("Unhandled message: ".concat(e)))}(r)}),[r]);var E=function(){if(v.whoseturn<0)return!1;if(v.freeforall){if(v.excludedPlayer===a)return!1;for(var e=0;e<v.playersWhoMoved.length;e++)if(v.playersWhoMoved[e].nickname===a)return!1;return!0}return a===v.players[v.whoseturn].nickname};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"w3-teal w3-cell-row",children:[(0,i.jsx)("div",{className:"w3-container w3-cell w3-cell-middle w3-padding w3-mobile",children:(0,i.jsx)("h1",{className:"myHeadingFont",children:"Fry Your Brain"})}),(0,i.jsxs)("div",{className:"w3-container w3-cell w3-mobile",children:[(0,i.jsxs)("h4",{className:"myCommonFont",children:["Game id: ",d]}),(0,i.jsxs)("h4",{className:"myCommonFont",children:["Nickname: ",a]}),(0,i.jsxs)("h4",{className:"myCommonFont",children:[h," player game"]})]}),(0,i.jsx)("div",{className:"w3-container w3-cell w3-padding w3-mobile",children:(0,i.jsx)("button",{className:"w3-button",onClick:function(){n("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]}),(0,i.jsx)("h1",{children:"Game under construction"}),(0,i.jsx)("p",{children:p}),(0,i.jsx)("div",{className:"w3-container w3-responsive w3-quarter",children:(0,i.jsxs)("table",{className:"w3-table w3-card",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"w3-teal",children:[(0,i.jsx)("th",{children:"Player"}),(0,i.jsx)("th",{children:"Points"})]})}),(0,i.jsx)("tbody",{children:v.players.map((function(e){return(0,i.jsxs)("tr",{className:"w3-green",children:[(0,i.jsx)("td",{children:e.nickname}),(0,i.jsxs)("td",{class:"w3-monospace",children:["\xa0\xa0",e.points<10?(0,i.jsx)("span",{children:"\xa0"}):"",e.points,e.points>10&&(0,i.jsx)("span",{class:"w3-purple w3-cursive w3-margin w3-wide",children:"Winner!"})]})]},"Player".concat(e.index))}))})]})}),!v.freeforall&&v.playersWhoMoved&&v.playersWhoMoved.length>0&&(0,i.jsxs)("div",{class:"w3-container",children:[(0,i.jsx)("h2",{children:"Previous free for all results:"}),v.playersWhoMoved.map((function(e){return(0,i.jsx)("p",{children:e.pass?(0,i.jsxs)("span",{children:[e.nickname," passed"]}):(0,i.jsxs)("span",{children:[e.nickname," played ",e.word," ",e.valid?"(valid)":"(invalid)"]})},"PlayerWhoMovedFFA".concat(e.nickname))}))]}),v.movesThisRound&&v.movesThisRound.length>0&&(0,i.jsxs)("div",{className:"w3-container",children:[(0,i.jsx)("h2",{children:"Moves this round:"}),v.movesThisRound.map((function(e){return(0,i.jsx)("p",{children:e.pass?(0,i.jsxs)("span",{children:[e.nickname," passed"]}):(0,i.jsxs)("span",{children:[e.nickname," played ",e.word," ",e.valid?"(valid)":"(invalid)"]})},"PlayerWhoMovedThisRound".concat(e.nickname))}))]}),v.fryLetters&&v.whoseturn>-1&&(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("h2",{className:"w3-white w3-quarter",children:["Fry Letters: ",v.fryLetters]})}),E()&&l((function(e){if(E())return"Enter"===e.key?(e.preventDefault(),void u(y,v.fryLetters,f,t,s,d,a,g)):void 0}),y,g,v.fryLetters,f,t,s,d,a)]})}},1313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/game",function(){return t(1863)}])},2447:function(e,n,t){"use strict";function s(e,n,t,s,r,a,i){try{var c=e[a](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(s,r)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function c(e){s(i,r,a,c,o,"next",e)}function o(e){s(i,r,a,c,o,"throw",e)}c(void 0)}))}}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return n=1313,e(e.s=n);var n}));var n=e.O();_N_E=n}]);