(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{3939:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});var i=function(t){var e=document.getElementById(t);e&&(e.scrollTop=e.scrollHeight)}},2374:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var i=n(7294);function s(t){var e=(0,i.useRef)();return(0,i.useEffect)((function(){e.current=t})),e.current}},7666:function(t,e,n){"use strict";n.r(e);var i=n(5893),s=n(1385),c=n(7294);e.default=function(t){var e=t.gameid,n=void 0===e?"":e,r=t.client,o=t.nickname,u=t.msgs,a=void 0===u?[]:u,h=t.setMsgs,l=t.participant,f=void 0===l?"":l,m=(0,c.useState)(""),d=m[0],p=m[1],v=function(t){var e=new Date(t),n=e.getHours(),i=e.getMinutes(),s="@";return n<10&&(s+="0"),s=s+n.toString()+":",i<10&&(s+="0"),s+=i.toString()};return(0,i.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,i.jsx)("table",{className:"pbChatTable",children:(0,i.jsxs)("tbody",{children:[a.map((function(t,e){return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"pbChatFrom",children:[v(t.created)," ",t.from]}),(0,i.jsx)("td",{className:"pbChatMsg",children:t.msg})]},"ChatMessage".concat(e))})),(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"2",children:""===o?(0,i.jsx)("span",{children:"Please enter nickname to use chat"}):(0,i.jsx)("textarea",{className:""===d?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:d,onChange:function(t){p(t.target.value)},onKeyDownCapture:function(t){if("Enter"===t.key&&d.length>0){t.preventDefault();var e=[].concat((0,s.Z)(a),[{from:o,msg:d}]),i=d;return h(e),p(""),void r.send({gameid:n,nickname:o,type:r.clientType,func:"chat",sender:f,sendmsg:i})}if("Backspace"===t.key&&d.length>0){t.preventDefault();var c=d.slice(0,d.length-1);p(c)}},placeholder:"chat..."})})})]})})})}},5518:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var i=n(4047),s=n(2700),c=function(){function t(e,n){(0,i.Z)(this,t),this.callback=e,this.timerCalc=n,this.timer=null,this.tries=0}return(0,s.Z)(t,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.tries=t.tries+1,t.callback()}),this.timerCalc(this.tries+1))}}]),t}(),r=function(){function t(e,n,s,r){var o=this;(0,i.Z)(this,t),this.customSocket=null,this.socketUrl=e,this.clientType=s,this.thisisme=r,this.reconnectTimer=new c((function(){o.disconnect(),o.connect()}),this.reconnectAfterMs),this.messageFunction=n}return(0,s.Z)(t,[{key:"reconnectAfterMs",value:function(t){return[1e3,2e3,5e3,1e4][t-1]||1e4}},{key:"connect",value:function(){var t=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(e){t.send({type:t.clientType,func:"announce",thisisme:t.thisisme})},this.customSocket.onclose=function(e){t.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(t){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(t){t.thisisme=this.thisisme,t.clientType=this.clientType;var e=JSON.stringify(t);this.customSocket.send(e)}}]),t}()},7784:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/fryyourbrain",function(){return n(4891)}])}},function(t){t.O(0,[253,863,504,774,888,179],(function(){return e=7784,t(t.s=e);var e}));var e=t.O();_N_E=e}]);