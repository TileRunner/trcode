(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{4339:function(e,n,t){"use strict";t.d(n,{d:function(){return r},o:function(){return i}});var r="U",i="P"},6071:function(e,n,t){"use strict";var r=t(3848),i=t(9448);n.default=void 0;var s=i(t(7294)),a=t(1689),o=t(2441),c=t(5749),u={};function l(e,n,t,r){if(e&&(0,a.isLocalURL)(n)){e.prefetch(n,t,r).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;u[n+"%"+t+(i?"%"+i:"")]=!0}}var f=function(e){var n=!1!==e.prefetch,t=(0,o.useRouter)(),i=t&&t.asPath||"/",f=s.default.useMemo((function(){var n=(0,a.resolveHref)(i,e.href,!0),t=r(n,2),s=t[0],o=t[1];return{href:s,as:e.as?(0,a.resolveHref)(i,e.as):o||s}}),[i,e.href,e.as]),d=f.href,m=f.as,h=e.children,v=e.replace,p=e.shallow,y=e.scroll,w=e.locale;"string"===typeof h&&(h=s.default.createElement("a",null,h));var b=s.Children.only(h),g=b&&"object"===typeof b&&b.ref,x=(0,c.useIntersection)({rootMargin:"200px"}),k=r(x,2),j=k[0],N=k[1],C=s.default.useCallback((function(e){j(e),g&&("function"===typeof g?g(e):"object"===typeof g&&(g.current=e))}),[g,j]);(0,s.useEffect)((function(){var e=N&&n&&(0,a.isLocalURL)(d),r="undefined"!==typeof w?w:t&&t.locale,i=u[d+"%"+m+(r?"%"+r:"")];e&&!i&&l(t,d,m,{locale:r})}),[m,d,N,w,n,t]);var S={ref:C,onClick:function(e){b.props&&"function"===typeof b.props.onClick&&b.props.onClick(e),e.defaultPrevented||function(e,n,t,r,i,s,o,c){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,a.isLocalURL)(t))&&(e.preventDefault(),null==o&&(o=r.indexOf("#")<0),n[i?"replace":"push"](t,r,{shallow:s,locale:c,scroll:o}))}(e,t,d,m,v,p,y,w)},onMouseEnter:function(e){(0,a.isLocalURL)(d)&&(b.props&&"function"===typeof b.props.onMouseEnter&&b.props.onMouseEnter(e),l(t,d,m,{priority:!0}))}};if(e.passHref||"a"===b.type&&!("href"in b.props)){var E="undefined"!==typeof w?w:t&&t.locale,T=t&&t.isLocaleDomain&&(0,a.getDomainLocale)(m,E,t&&t.locales,t&&t.domainLocales);S.href=T||(0,a.addBasePath)((0,a.addLocale)(m,E,t&&t.defaultLocale))}return s.default.cloneElement(b,S)};n.default=f},5749:function(e,n,t){"use strict";var r=t(3848);n.__esModule=!0,n.useIntersection=function(e){var n=e.rootMargin,t=e.disabled||!a,c=(0,i.useRef)(),u=(0,i.useState)(!1),l=r(u,2),f=l[0],d=l[1],m=(0,i.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),t||f||e&&e.tagName&&(c.current=function(e,n,t){var r=function(e){var n=e.rootMargin||"",t=o.get(n);if(t)return t;var r=new Map,i=new IntersectionObserver((function(e){e.forEach((function(e){var n=r.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return o.set(n,t={id:n,observer:i,elements:r}),t}(t),i=r.id,s=r.observer,a=r.elements;return a.set(e,n),s.observe(e),function(){a.delete(e),s.unobserve(e),0===a.size&&(s.disconnect(),o.delete(i))}}(e,(function(e){return e&&d(e)}),{rootMargin:n}))}),[t,n,f]);return(0,i.useEffect)((function(){if(!a&&!f){var e=(0,s.requestIdleCallback)((function(){return d(!0)}));return function(){return(0,s.cancelIdleCallback)(e)}}}),[f]),[m,f]};var i=t(7294),s=t(8391),a="undefined"!==typeof IntersectionObserver;var o=new Map},4891:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var r=t(5893),i=t(7294),s=t(5518),a=t(5354),o=t(1863),c=t(4339),u=t(5877);function l(){var e=(0,i.useState)((0,u.v4)())[0],n=(0,i.useState)(c.d),t=n[0],l=n[1],f=(0,i.useState)(""),d=f[0],m=f[1],h=(0,i.useState)(""),v=h[0],p=h[1],y=(0,i.useState)(""),w=y[0],b=y[1],g=(0,i.useState)(2),x=g[0],k=g[1],j="wss://tilerunner.herokuapp.com/?clientType=fyb&thisisme="+e,N=(0,i.useState)(new s.Z(j,(function(e){m(e.data)}),"fyb",e))[0];return(0,i.useEffect)((function(){return N.connect()}),[]),(0,r.jsxs)(r.Fragment,{children:[t===c.d&&(0,r.jsx)(a.default,{client:N,thisisme:e,setParticipant:l,wsmessage:d,nickname:v,setNickname:p,gameid:w,setGameid:b,numPlayers:x,setNumPlayers:k}),t===c.o&&(0,r.jsx)(o.default,{setParticipant:l,wsmessage:d,nickname:v,gameid:w,numPlayers:x})]})}},1863:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),s=t(4339);n.default=function(e){var n=e.setParticipant,t=e.wsmessage,a=e.nickname,o=e.gameid,c=e.numPlayers,u=(0,i.useState)(""),l=u[0],f=u[1];return(0,i.useEffect)((function(){""!==t&&function(e){var n=JSON.parse(e);"fyb"===n.type&&("gamecreated"===n.func?f("Game created. Waiting for players to arrive."):f("Unhandled message: ".concat(e)))}(t)}),[t]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"w3-teal w3-cell-row",children:[(0,r.jsx)("div",{className:"w3-container w3-cell w3-cell-middle ws-padding w3-mobile",children:(0,r.jsx)("h1",{className:"myHeadingFont",children:"Fry Your Brain"})}),(0,r.jsxs)("div",{className:"w3-container w3-cell w3-mobile",children:[(0,r.jsxs)("h4",{className:"myCommonFont",children:["Game id: ",o]}),(0,r.jsxs)("h4",{className:"myCommonFont",children:["Nickname: ",a]}),(0,r.jsxs)("h4",{className:"myCommonFont",children:[c," player game"]})]})]}),(0,r.jsx)("h1",{children:"Game under construction"}),(0,r.jsx)("button",{onClick:function(){return n(s.d)},children:"Return to lobby"}),(0,r.jsxs)("p",{children:["Snat=",l]})]})}},5354:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),s=t(1664),a=t(4339);function o(e,n,t){return(0,r.jsxs)("div",{className:"w3-row-padding h4",children:[(0,r.jsxs)("div",{className:"w3-quarter",children:[(0,r.jsx)("label",{children:"Nickname:"}),(0,r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:e,onChange:function(e){n(e.target.value)}})]}),e&&(0,r.jsx)("div",{className:"w3-quarter",children:(0,r.jsx)("button",{className:"w3-button w3-border w3-blue myCommonFont",type:"submit",onClick:function(){t(!0)},children:"SUBMIT"})})]})}function c(e){return(0,r.jsxs)("div",{className:"w3-row-padding h4",children:[(0,r.jsx)("div",{className:"w3-quarter",children:(0,r.jsx)("button",{className:"w3-button w3-border w3-blue myCommonFont",type:"submit",id:"chooseCreateGame",onClick:function(){e("C")},children:"CREATE A GAME"})}),(0,r.jsx)("div",{className:"w3-quarter",children:(0,r.jsx)("button",{className:"w3-button w3-border w3-blue myCommonFont",type:"submit",id:"chooseJoinGame",onClick:function(){e("J")},children:"JOIN A GAME"})})]})}function u(e,n,t,i,s,a,o){return(0,r.jsxs)("div",{className:"w3-row-padding h4",children:[(0,r.jsxs)("div",{className:"w3-quarter",children:[(0,r.jsx)("label",{children:"Game ID:"}),(0,r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:t,onChange:function(e){i(e.target.value)}})]}),(0,r.jsxs)("div",{className:"w3-quarter",children:[(0,r.jsx)("label",{children:"Number of Players:"}),(0,r.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"number",name:"numPlayers",value:s,onChange:function(e){e.target.value.match(/[23456]/)&&a(e.target.value)}})]}),t&&(0,r.jsx)("div",{className:"w3-quarter",children:(0,r.jsx)("button",{id:"requestCreateGame",className:"w3-button w3-border w3-blue myCommonFont",type:"submit",onClick:function(){!function(e,n,t,r,i){e.send({type:"fyb",func:"create",thisisme:n,gameid:t,numPlayers:r,nickname:i,timestamp:Date.now()})}(e,n,t,s,o)},children:"SUBMIT"})})]})}n.default=function(e){var n=e.client,t=e.thisisme,l=e.setParticipant,f=e.wsmessage,d=e.nickname,m=e.setNickname,h=e.gameid,v=e.setGameid,p=e.numPlayers,y=e.setNumPlayers,w=(0,i.useState)(""),b=w[0],g=w[1],x=(0,i.useState)(!1),k=x[0],j=x[1],N=(0,i.useState)(""),C=N[0],S=N[1];return(0,i.useEffect)((function(){""!==f&&function(e){var n=JSON.parse(e);g(e),"fyb"===n.type&&("gamecreated"===n.func?(h!==n.gameid&&v(n.gameid),l(a.o)):"gameidtaken"===n.func?g("That game ID is already taken"):g("Unhandled message: ".concat(e)))}(f)}),[f]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[(0,r.jsx)("h1",{className:"w3-bar-item w3-centre myHeadingFont",children:"Fry Your Brain Lobby"}),(0,r.jsx)("div",{className:"w3-bar-item w3-right",children:(0,r.jsx)(s.default,{href:"../../",children:(0,r.jsx)("a",{children:(0,r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})})]}),(0,r.jsx)("h1",{children:"Lobby under construction"}),(0,r.jsx)("button",{onClick:function(){return l(a.o)},children:"Play"}),(0,r.jsxs)("p",{children:["Snat=",b]}),!k&&o(d,m,j),k&&!C&&c(S),k&&"C"===C&&u(n,t,h,v,p,y,d),k&&"J"===C&&(0,r.jsx)("div",{children:"UNDER CONSTRUCTION"})]})}},5518:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(4047),i=t(2700),s=function(){function e(n,t){(0,r.Z)(this,e),this.callback=n,this.timerCalc=t,this.timer=null,this.tries=0}return(0,i.Z)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),a=function(){function e(n,t,i,a){var o=this;(0,r.Z)(this,e),this.customSocket=null,this.socketUrl=n,this.clientType=i,this.thisisme=a,this.reconnectTimer=new s((function(){o.disconnect(),o.connect()}),this.reconnectAfterMs),this.messageFunction=t}return(0,i.Z)(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(n){e.send({type:e.clientType,func:"announce"})},this.customSocket.onclose=function(n){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){e.thisisme=this.thisisme,e.clientType=this.clientType,this.customSocket.send(JSON.stringify(e))}}]),e}()},7784:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fyb/fryyourbrain",function(){return t(4891)}])},1664:function(e,n,t){e.exports=t(6071)},4047:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return r}})},2700:function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}t.d(n,{Z:function(){return i}})},5877:function(e,n,t){var r=t(3570),i=t(1171),s=i;s.v1=r,s.v4=i,e.exports=s},5327:function(e){for(var n=[],t=0;t<256;++t)n[t]=(t+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},5217:function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var r=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255;return r}}},3570:function(e,n,t){var r,i,s=t(5217),a=t(5327),o=0,c=0;e.exports=function(e,n,t){var u=n&&t||0,l=n||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var m=s();null==f&&(f=r=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==d&&(d=i=16383&(m[6]<<8|m[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,p=h-o+(v-c)/1e4;if(p<0&&void 0===e.clockseq&&(d=d+1&16383),(p<0||h>o)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,c=v,i=d;var y=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var w=h/4294967296*1e4&268435455;l[u++]=w>>>8&255,l[u++]=255&w,l[u++]=w>>>24&15|16,l[u++]=w>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=f[b];return n||a(l)}},1171:function(e,n,t){var r=t(5217),i=t(5327);e.exports=function(e,n,t){var s=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var o=0;o<16;++o)n[s+o]=a[o];return n||i(a)}}},function(e){e.O(0,[774,888,179],(function(){return n=7784,e(e.s=n);var n}));var n=e.O();_N_E=n}]);