(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{2389:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var i=s(5893),t=s(1385),n=s(7294),r=s(3625),c=s(8520),l=s(9477),o=s(798),d=s(7666),m=s(6595),h=s(1489),u=s(4946);var p=s(3939),x=function(e){var a="pbTileOnRack Unselected "+("Q"===e.tilevalue?"u ":"")+e.participant;return(0,i.jsx)("div",{className:a,children:(0,i.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},e.tileindex)},b=function(e){var a=e.setWhereto,s=e.client,b=e.wsmessage,j=e.gameid,w=e.nickname,g=e.participant,N=(0,n.useState)(0),v=N[0],f=N[1],k=(0,n.useState)({pname:"loading...",gname:"loading...",moves:[],snapshots:[{tiles:[],ptiles:[],gtiles:[],rescues:0,whoseturn:"P"}]}),y=k[0],S=k[1],C=(0,n.useState)([]),z=C[0],G=C[1];(0,n.useEffect)((function(){s.send({gameid:j,type:"pb",sender:m.Vj,func:"startExamining"})}),[]),(0,n.useEffect)((function(){""!==b&&function(e){var a=JSON.parse(e);if(a.gameid===j&&"pb"===a.type){if("providegamedata"===a.func){var s=function(e){for(var a=[],s=e,i="",t="",n="",r=(0,h.$)(s.racksize),c=[],l=0,o=0;o<s.events.length;o++){var d=s.events[o];if(d.ptiles&&(i=d.ptiles),d.gtiles&&(t=d.gtiles),"STARTGAME"!==d.type&&d.type!==m.bS&&d.type!==m.Ix||(n=d.tiles),d.type===m.bS||d.type===m.Ix||d.type===m.Am){var p={by:d.by,type:d.type};if(d.type===m.bS){p.mainword=d.mainword,p.extrawords=d.extrawords.split(","),p.pos=d.pos,d.by===m.ap&&(l=d.rescues);for(var x=(0,u.F)(d.pos),b=x.row,j=x.col,w=0;w<d.mainword.length;w++){var g=r[b][j];g.usedby===m.i4&&(g.usedby=d.by,g.letter=d.mainword[w]),x.dir===m.oW?j++:b++}}c.push(p)}a.push({tiles:n.split(""),squareArray:JSON.parse(JSON.stringify(r)),ptiles:i.split(""),gtiles:t.split(""),rescues:l,whoseturn:d.whoseturn})}return{pname:s.pname,gname:s.gname,moves:c,racksize:s.racksize,snapshots:a}}(a.apidata);S(s)}if("chat"===a.func){var i=[].concat((0,t.Z)(z),[{from:a.nickname,msg:a.sendmsg}]);G(i)}}}(b)}),[b]),(0,n.useEffect)((function(){(0,p.O)("ScrollableChat")}),[z]);var P=function(){v+1<y.snapshots.length&&f(v+1)},F=function(){return y.snapshots[v].whoseturn===m.kX},R=function(){return y.snapshots[v].whoseturn===m.Ov};return(0,i.jsxs)("div",{className:"prisonbreak",children:[(0,i.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,i.jsx)("div",{className:"w3-display-middle",children:(0,i.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,i.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",j]}),(0,i.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",y.pname]}),(0,i.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,i.jsx)("button",{className:"w3-button",onClick:function(){a("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})}),(0,i.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",y.gname]})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,i.jsx)(c.default,{tiles:y.snapshots[v].tiles,othertiles:F()?y.snapshots[v].gtiles:R()?y.snapshots[v].ptiles:[]}),(0,i.jsx)(l.default,{moves:y.moves.slice(0,v),onmoveclick:function(e){return function(e){var a=e;e+1<y.snapshots.length&&f(a)}(e)}})]}),(0,i.jsx)("div",{className:"col pbPlayerOuterSection",children:(0,i.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,i.jsxs)("div",{className:"pbPlayerTitle",children:[(0,i.jsx)("i",{className:"material-icons",children:m._k}),"\xa0",m.Ji,"\xa0",(0,i.jsx)("i",{className:"material-icons",children:m._k})]}),(0,i.jsxs)("div",{className:"pbTilerack",children:[y.snapshots[v].whoseturn===m.ap&&(0,i.jsx)("div",{className:"pbTilerackArrow",onClick:P}),y.snapshots[v].ptiles.map((function(e,a){return(0,i.jsx)(x,{participant:m.ap,tilevalue:R()?"*":e,tileindex:a},"ObserverPrisonersRackTile".concat(a))}))]}),(0,i.jsxs)("div",{className:"pbPlayerTitle",children:[(0,i.jsx)("i",{className:"material-icons",children:m.g9}),"\xa0",m.jN,"\xa0",(0,i.jsx)("i",{className:"material-icons",children:m.g9})]}),(0,i.jsxs)("div",{className:"pbTilerack",children:[y.snapshots[v].whoseturn===m.b6&&(0,i.jsx)("div",{className:"pbTilerackArrow",onClick:P}),y.snapshots[v].gtiles.map((function(e,a){return(0,i.jsx)(x,{participant:m.b6,tilevalue:F()?"*":e,tileindex:a},"ObserverGuardsRackTile".concat(a))}))]})]})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)(r.default,{squareArray:y.snapshots[v].squareArray,rcd:[-1,-1,m.QY],onClick:function(e,a){return function(e,a){for(var s=-1,i=0;i<y.snapshots.length;i++){var t=y.snapshots[i];-1===s&&t.squareArray[e][a].usedby!==m.i4&&(s=i)}s>0&&f(s-1)}(e,a)}})})}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)(o.default,{rescues:y.snapshots[v].rescues}),(0,i.jsx)(d.default,{gameid:j,client:s,nickname:w,msgs:z,setMsgs:G,participant:g})]})]}),(0,i.jsxs)("div",{className:"w3-display-container w3-teal examineFooterHeight",children:[(0,i.jsx)("div",{className:"w3-display-middle commonFontFamily",children:(0,i.jsxs)("div",{children:[v>0&&(0,i.jsx)("button",{className:"w3-black w3-round",onClick:function(){f(0)},children:(0,i.jsx)("i",{className:"material-icons",children:"fast_rewind"})}),v>0&&(0,i.jsx)("button",{className:"w3-black w3-round",onClick:function(){v-1>-1&&f(v-1)},children:(0,i.jsx)("i",{className:"material-icons",children:"arrow_left"})}),v<y.snapshots.length-1&&(0,i.jsx)("button",{className:"w3-black w3-round",onClick:P,children:(0,i.jsx)("i",{className:"material-icons",children:"arrow_right"})}),v<y.snapshots.length-1&&(0,i.jsx)("button",{className:"w3-black w3-round",onClick:function(){var e=y.snapshots.length-1;f(e)},children:(0,i.jsx)("i",{className:"material-icons",children:"fast_forward"})})]})}),(0,i.jsx)("div",{className:"w3-display-topleft commonFontFamily",children:(0,i.jsx)("p",{children:"\xa0Click on a move in the move list to jump to where it was played"})}),(0,i.jsx)("div",{className:"w3-display-bottomleft commonFontFamily",children:(0,i.jsx)("p",{children:"\xa0Click on a tile on the board to jump to where it was played"})}),(0,i.jsx)("div",{className:"w3-display-topright commonFontFamily",children:(0,i.jsxs)("div",{className:"pbTilerack",children:["Click on the ",(0,i.jsx)("span",{className:"pbTilerackArrowInFooter",children:" "})," by the rack to advance one move\xa0"]})})]})]})}},5916:function(e,a,s){"use strict";s.r(a);var i=s(5893),t=s(1385),n=s(7294),r=(s(1664),s(7666)),c=s(6595),l=s(3939),o="trButton";a.default=function(e){var a=e.setWhereto,s=e.client,d=e.setIsrejoin,m=e.wsmessage,h=e.gameid,u=e.setGameid,p=e.nickname,x=e.setNickname,b=e.setParticipant,j=e.racksize,w=e.setRacksize,g=(0,n.useState)([]),N=g[0],v=g[1],f=(0,n.useState)([]),k=f[0],y=f[1];function S(e){return function(e){for(var a=0;a<N.length;++a)if(N[a].gameid===e)return a;return-1}(e)>-1}function C(e){return 0===p.length?0:e.pname===p?2:e.gname?3:0}function z(e){return 0===p.length?0:e.gname===p?2:e.gname?"Game over"===e.gamestatus?4:0:1}function G(e){w(e)}return(0,n.useEffect)((function(){""!==m&&function(e){var a=JSON.parse(e);if("pb"===a.type&&"chat"===a.func&&!a.gameid&&a.nickname!==p){var s=[].concat((0,t.Z)(k),[{from:a.nickname,msg:a.sendmsg}]);return void y(s)}if("pb"===a.type&&"gamelist"===a.func){var i=[];a.gamelist.forEach((function(e){var a={gameid:e.gameid,pname:e.pname,gname:e.gname,gamestatus:e.whoseturn===c.Bd?"Game over":"Unfinished",racksize:e.racksize};i.push(a)})),v([].concat(i))}}(m)}),[m]),(0,n.useEffect)((function(){(0,l.O)("ScrollableChat")}),[k]),(0,i.jsxs)("div",{className:"trBackground",children:[(0,i.jsxs)("div",{className:"trTitle",children:["Prison Break Lobby\xa0",(0,i.jsx)("button",{className:"trButton",onClick:function(){a("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,i.jsxs)("div",{className:"w3-row",children:[(0,i.jsxs)("div",{className:"w3-col s9",children:[(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("div",{className:"w3-bar",children:[(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("h3",{children:(0,i.jsx)("span",{className:"trEmphasis",children:"All Participants >"})})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("label",{className:"h3 trParagraph",children:"Nickname:"})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("input",{className:"trParagraph",type:"text",name:"nickname",value:p,onChange:function(e){x(e.target.value)}})})]})}),(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("div",{className:"w3-bar",children:[(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("h3",{children:(0,i.jsx)("span",{className:"trEmphasis",children:"Prisoners >"})})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("label",{className:"h3 trParagraph",children:"Game ID:"})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("input",{className:"trParagraph",type:"text",name:"gameid",value:h,onChange:function(e){u(e.target.value)}})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("label",{className:"h3 trParagraph",children:"Rack Size:"})}),(0,i.jsxs)("div",{className:"w3-bar-item",children:[(0,i.jsxs)("div",{className:"w3-row",children:[(0,i.jsx)("button",{id:"selectracksize4",className:4===j?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return G(4)},"data-toggle":"tooltip",title:"4 letter racks, 9 x 9 board",autoFocus:!0,children:"4"}),(0,i.jsx)("button",{id:"selectracksize5",className:5===j?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return G(5)},"data-toggle":"tooltip",title:"5 letter racks, 11 x 11 board",children:"5"}),(0,i.jsx)("button",{id:"selectracksize6",className:6===j?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return G(6)},"data-toggle":"tooltip",title:"6 letter racks, 13 x 13 board",children:"6"}),(0,i.jsx)("button",{id:"selectracksize7",className:7===j?"pbLobbyRackSizeSelected":"pbLobbyRackSize",onClick:function(){return G(7)},"data-toggle":"tooltip",title:"7 letter racks, 15 x 15 board",children:"7"})]}),(0,i.jsx)("div",{className:"w3-row",children:(0,i.jsxs)("span",{className:"trParagraph",children:[j," letter racks, ",2*j+1," x ",2*j+1," board."]})})]}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("button",{id:"startgame",className:o,onClick:function(){0===p.length?window.alert("Please enter nickname before starting a game"):h.length>0?S(h)?window.alert("Game already started with that id"):b(c.ap):window.alert("Please enter Game ID before starting a game")},children:"Start Game"})})]})}),(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("div",{className:"w3-bar",children:[(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("h3",{children:(0,i.jsx)("span",{className:"trEmphasis",children:"Guards >"})})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("span",{className:"trParagraph",children:(0,i.jsx)("h2",{children:'Find and click the "Join Game" button for your game.'})})})]})}),(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsx)("div",{className:"w3-bar",children:(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("h3",{className:"trWarning",children:'If you lost connection, find and click the "Reconnect" button for your nickname.'})})})}),(0,i.jsx)("div",{className:"w3-container",children:(0,i.jsxs)("div",{className:"w3-bar",children:[(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsx)("span",{className:"trParagraph h3",children:"Game list:"})}),(0,i.jsx)("div",{className:"w3-bar-item",children:(0,i.jsxs)("table",{className:"w3-table-all w3-card-4",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"w3-blue h4 myCommonFont",children:[(0,i.jsx)("th",{className:"w3-border-right",children:"Game ID"}),(0,i.jsx)("th",{className:"w3-border-right",children:"Prisoners"}),(0,i.jsx)("th",{className:"w3-border-right",children:"Guards"}),(0,i.jsx)("th",{className:"w3-border-right",children:"Rack Size"}),(0,i.jsx)("th",{children:"Game Status"}),(0,i.jsx)("th",{className:"w3-border-left",children:"Delete"})]})}),(0,i.jsx)("tbody",{children:N.map((function(e,a){return(0,i.jsxs)("tr",{className:"myCommonFont w3-grey w3-hover-green",children:[(0,i.jsx)("td",{className:"w3-border-right",children:(0,i.jsx)("b",{children:e.gameid})}),2===C(e)?(0,i.jsx)("td",{id:"PrisonersRejoin".concat(a),className:"w3-border-right",children:(0,i.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){d(!0),u(e.gameid),b(c.ap),w(e.racksize)},children:"Reconnect"})}):3===C(e)?(0,i.jsx)("td",{id:"PrisonersObserve".concat(a),className:"w3-border-right",children:(0,i.jsx)("button",{className:"w3-button w3-yellow w3-round w3-hover-black",onClick:function(){d(!1),u(e.gameid),b(c.qg),w(e.racksize)},children:"Observe"})}):(0,i.jsx)("td",{id:"PrisonersNoAction".concat(a),className:"w3-border-right",children:"No action available"}),2===z(e)?(0,i.jsx)("td",{id:"GuardsRejoin".concat(a),className:"w3-border-right",children:(0,i.jsx)("button",{className:"w3-button w3-red w3-round w3-hover-black",onClick:function(){d(!0),u(e.gameid),b(c.b6),w(e.racksize)},children:"Reconnect"})}):1===z(e)?(0,i.jsx)("td",{id:"GuardsJoin".concat(a),className:"w3-border-right",children:(0,i.jsx)("button",{className:o,onClick:function(){u(e.gameid),b(c.b6),w(e.racksize)},children:"Join Game"})}):4===z(e)?(0,i.jsx)("td",{id:"GuardsExamine".concat(a),className:"w3-border-right",children:(0,i.jsx)("button",{className:o,onClick:function(){u(e.gameid),b(c.Vj),w(e.racksize)},children:"Examine Game"})}):(0,i.jsx)("td",{id:"GuardsNoAction".concat(a),className:"w3-border-right",children:"No action available"}),(0,i.jsx)("td",{id:"RackSize".concat(a),className:"w3-center w3-border-right",children:e.racksize}),(0,i.jsx)("td",{id:"GameStatus".concat(a),children:e.gamestatus}),(0,i.jsx)("td",{id:"DeleteGame".concat(a),className:"w3-border-left",children:("TileRunner"===p||p===e.pname||p===e.gname)&&(0,i.jsx)("button",{className:"w3-button w3-red w3-border w3-round w3-hover-black",onClick:function(){s.send({type:"pb",func:"deletegame",gameid:e.gameid})},children:"Delete Game"})})]},"OtherGame".concat(a))}))})]})})]})})]}),(0,i.jsx)("div",{className:"w3-col s3",children:(0,i.jsx)(r.default,{client:s,nickname:p,msgs:k,setMsgs:y})})]}),(0,i.jsx)("div",{className:"trParagraph",children:(0,i.jsx)("h1",{children:"Have fun!"})})]})}},3019:function(e,a,s){"use strict";s.r(a);var i=s(5893),t=s(7294),n=s(5518),r=s(5916),c=s(7678),l=s(2389),o=s(6595),d=s(5877);a.default=function(e){var a=e.setWhereto,s=(0,t.useState)((0,d.v4)())[0],m=(0,t.useState)(!1),h=m[0],u=m[1],p=(0,t.useState)(""),x=p[0],b=p[1],j=(0,t.useState)(""),w=j[0],g=j[1],N=(0,t.useState)(o.dK),v=N[0],f=N[1],k=(0,t.useState)(""),y=k[0],S=k[1],C=(0,t.useState)(4),z=C[0],G=C[1],P="wss://tilerunner.herokuapp.com/?clientType=pb&thisisme="+s,F=(0,t.useState)(new n.Z(P,(function(e){S(e.data)}),"pb",s))[0];return(0,t.useEffect)((function(){return F.connect()}),[]),v===o.dK?(0,i.jsx)(r.default,{setWhereto:a,client:F,setIsrejoin:u,wsmessage:y,gameid:x,setGameid:b,nickname:w,setNickname:g,setParticipant:f,racksize:z,setRacksize:G}):v===o.Vj?(0,i.jsx)(l.default,{setWhereto:a,client:F,wsmessage:y,gameid:x,nickname:w,participant:v}):(0,i.jsx)(c.default,{setWhereto:a,isrejoin:h,participant:v,gameid:x,nickname:w,wsmessage:y,client:F,racksize:z})}}}]);