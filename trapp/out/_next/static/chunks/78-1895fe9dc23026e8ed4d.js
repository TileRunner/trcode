(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{4946:function(e,n,t){"use strict";t.d(n,{F:function(){return i}});var r=t(6595);function i(e){return/[A-Z][0-9][0-9]/.test(e)?{row:Number(e.substr(1,2))-1,col:r.v8.indexOf(e[0]),dir:r.ik}:/[A-Z][0-9]/.test(e)?{row:Number(e[1])-1,col:r.v8.indexOf(e[0]),dir:r.ik}:/[0-9][0-9][A-Z]/.test(e)?{row:Number(e.substr(0,2))-1,col:r.v8.indexOf(e[2]),dir:r.oW}:/[0-9][A-Z]/.test(e)?{row:Number(e[0])-1,col:r.v8.indexOf(e[1]),dir:r.oW}:void 0}},1489:function(e,n,t){"use strict";t.d(n,{$:function(){return i}});var r=t(6595);function i(e){for(var n=2*e+1,t=Array(n),i=0;i<n;++i){for(var a=Array(n),s=0;s<n;++s){var c={row:i,col:s,type:r.WS,usedby:r.i4,letter:r.GP};i===e&&s===e?c.type=r.ix:i%e===0&&s%e===0?c.type=r.fi:i%2===s%2&&(c.type=r.me),a[s]=c}t[i]=[].concat(a)}return t}},6595:function(e,n,t){"use strict";t.d(n,{v8:function(){return r},RH:function(){return i},dK:function(){return a},ap:function(){return s},b6:function(){return c},qg:function(){return o},Vj:function(){return l},kX:function(){return u},Ov:function(){return d},Bd:function(){return p},_k:function(){return f},g9:function(){return m},Ji:function(){return h},jN:function(){return v},bS:function(){return b},Ix:function(){return x},Am:function(){return y},oW:function(){return g},ik:function(){return w},QY:function(){return N},i4:function(){return j},_W:function(){return k},$B:function(){return A},fl:function(){return S},Cr:function(){return C},L8:function(){return O},Qt:function(){return T},fi:function(){return B},ix:function(){return E},me:function(){return Z},WS:function(){return I},GP:function(){return R}});var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],i=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],a="U",s="P",c="G",o="O",l="E",u=s,d=c,p="X",f="run_circle",m="security",h="PRISONERS",v="GUARDS",b="PLAY",x="SWAP",y="PASS",g="r",w="d",N="",j="",k=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],A=2e4,S=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],C=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],O=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],T=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],B="EscapeHatch",E="CenterSquare",Z="style1",I="style2",R=""},3939:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var r=function(e){var n=document.getElementById(e);n.scrollTop=n.scrollHeight}},3625:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(4620),a=t(6595);n.default=function(e){var n=e.onClick,t=e.squareArray,s=void 0===t?[]:t,c=e.rcd,o=function(e){return(0,r.jsxs)("tr",{className:"pbRow",children:[(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderLeft",children:a.RH[e]}),s[e].map((function(e){return function(e){return(0,r.jsx)("td",{className:"pbSquareOuter",children:(0,r.jsx)(i.default,{usedby:e.usedby,type:e.type,letter:e.letter,ri:e.row,ci:e.col,rcd:c,onClick:function(){return n(e.row,e.col)}})},"Square".concat(e.row,"-").concat(e.col))}(e)})),(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderRight",children:a.RH[e]})]},"BoardRow".concat(e))};return(0,r.jsx)("table",{className:"pbBoard",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",children:[(0,r.jsx)("td",{className:"pbBoardHeaderTopLeft",children:"\xa0"}),s.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:a.v8[n]},"TopColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderTopRight",children:"\xa0"})]}),s.map((function(e,n){return o(n)})),(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",id:"BoardHeaderBottom",children:[(0,r.jsx)("td",{className:"pbBoardHeaderBottomLeft",children:"\xa0"}),s.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:a.v8[n]},"BottomColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderBottomRight",children:"\xa0"})]})]})})}},7666:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(1385),a=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,s=e.client,c=e.nickname,o=e.msgs,l=void 0===o?[]:o,u=e.setMsgs,d=e.participant,p=void 0===d?"":d,f=(0,a.useState)(""),m=f[0],h=f[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,r.jsx)("table",{className:"pbChatTable",children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pbChatFrom",children:e.from}),(0,r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(n))})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===c?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){h(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=[].concat((0,i.Z)(l),[{from:c,msg:m}]),r=m;return u(n),h(""),void s.send({gameid:t,nickname:c,type:"pb",func:"chat",sender:p,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var a=m.slice(0,m.length-1);h(a)}},placeholder:"chat..."})})})]})})})}},78:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var r=t(809),i=t.n(r),a=t(5893),s=t(2447),c=t(1385),o=t(7294),l=t(1664),u=t(8451),d=t(3625),p=t(8520),f=t(9477),m=t(798),h=t(7666),v=t(6595),b=t(1489);function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(e.length-1)/2,t=2*n,r=n,i=!0;return e[0][0].usedby!==v.i4&&e[0][r].usedby!==v.i4&&e[0][t].usedby!==v.i4&&e[r][0].usedby!==v.i4&&e[r][t].usedby!==v.i4&&e[t][0].usedby!==v.i4&&e[t][r].usedby!==v.i4&&e[t][t].usedby!==v.i4&&(i=!1),i}var y=t(4946);function g(e){var n=e.length-1,t=n-1;return t>-1&&e[t].type===v.Am&&e[n].type===v.Am}var w=t(3939);var N=function(e){var n="pbTileOnRack Unselected "+("Q"===e.tilevalue?"u ":"")+e.participant;return(0,a.jsx)("div",{className:n,children:(0,a.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},e.tileindex)},j=function(e){var n=e.isrejoin,t=e.participant,r=e.gameid,j=e.nickname,k=e.wsmessage,A=e.client,S=e.racksize,C=void 0===S?4:S,O=(0,o.useState)(""),T=O[0],B=O[1],E=C,Z=2*C,I=6===C?v.L8:7===C?v.Qt:5===C?v.Cr:v.fl,R=(0,o.useState)((0,c.Z)(I)),P=R[0],M=R[1],H=(0,o.useState)([]),q=H[0],D=H[1],J=(0,o.useState)([]),L=J[0],F=J[1],Q=(0,o.useState)([]),U=Q[0],W=Q[1],G=(0,o.useState)(-1),X=G[0],Y=G[1],_=(0,o.useState)(v.kX),K=_[0],z=_[1],V=(0,o.useState)([]),$=V[0],ee=V[1],ne=(0,o.useState)(0),te=ne[0],re=ne[1],ie=(0,o.useState)([-1,-1,v.QY]),ae=ie[0],se=ie[1],ce=(0,o.useState)([]),oe=ce[0],le=ce[1],ue=(0,o.useState)({squareArray:[],ptiles:[],gtiles:[]}),de=ue[0],pe=ue[1],fe=(0,o.useState)(0),me=fe[0],he=fe[1],ve=(0,o.useState)(!1),be=ve[0],xe=ve[1],ye=(0,o.useState)(""),ge=ye[0],we=ye[1],Ne=(0,o.useState)([]),je=Ne[0],ke=Ne[1],Ae=function(e){var n=(0,o.useRef)();return(0,o.useEffect)((function(){n.current=e})),n.current}(te);(0,o.useEffect)((function(){Se()}),[]),(0,o.useEffect)((function(){""!==k&&function(e){var n=JSON.parse(e);if(n.gameid===r&&"pb"===n.type){if("providegamedata"===n.func){var i=function(e){for(var n=e,t=n.events.length-1,r=n.events[t],i="",a="",s="",c=(0,b.$)(n.racksize),o=[],l=0,u=0;u<n.events.length;u++){var d=n.events[u];if(d.ptiles&&(i=d.ptiles),d.gtiles&&(a=d.gtiles),"STARTGAME"!==d.type&&d.type!==v.bS&&d.type!==v.Ix||(s=d.tiles),d.type===v.bS||d.type===v.Ix||d.type===v.Am){var p={by:d.by,type:d.type};if(d.type===v.bS){p.mainword=d.mainword,p.extrawords=d.extrawords.split(","),p.pos=d.pos,d.by===v.ap&&(l=d.rescues);for(var f=(0,y.F)(d.pos),m=f.row,h=f.col,x=0;x<d.mainword.length;x++){var g=c[m][h];g.usedby===v.i4&&(g.usedby=d.by,g.letter=d.mainword[x]),f.dir===v.oW?h++:m++}}o.push(p)}}return{pname:n.pname,gname:n.gname,syncstamp:r.timestamp,tiles:s.split(""),squareArray:c,ptiles:i.split(""),gtiles:a.split(""),whoseturn:r.whoseturn,moves:o,rescues:l,racksize:n.racksize,allowRewind:!1}}(n.apidata);B(i.syncstamp),t===v.ap?we(i.gname):t===v.b6&&we(i.pname),M(i.tiles),W(i.squareArray),D(i.ptiles),F(i.gtiles),z(i.whoseturn);var a={squareArray:JSON.parse(JSON.stringify(i.squareArray)),ptiles:(0,c.Z)(i.ptiles),gtiles:(0,c.Z)(i.gtiles)};pe(a),le(i.moves),re(i.rescues),xe(i.allowRewind),Ee()}if("providegname"===n.func&&t===v.Ji&&we(n.gname),"allowundo"===n.func&&xe(!0),"chat"===n.func){var s=[].concat((0,c.Z)(je),[{from:n.nickname,msg:n.sendmsg}]);ke(s)}"providesyncdata"===n.func&&n.syncstamp!==T&&(console.log("Out of sync - requesting latest game data"),Ge())}}(k)}),[k]),(0,o.useEffect)((function(){(0,w.O)("ScrollableMoves")}),[oe]),(0,o.useEffect)((function(){(0,w.O)("ScrollableChat")}),[je]),(0,o.useEffect)((function(){if(te>Ae){var e=document.createElement("audio");e.src=t===v.b6?"https://tilerunner.github.io/OneGotAway.m4a":"https://tilerunner.github.io/yippee.m4a",e.play()}}),[te]),(0,o.useEffect)((function(){var e=me+1;e>=v._W.length&&(e=0),he(e)}),[K]),(0,o.useEffect)((function(){var e=setInterval((function(){t!==K&&K!==v.Bd&&Xe()}),v.$B);return function(){return clearInterval(e)}}));var Se=function(){var e=(0,b.$)(C);W(e),n?Te():t===v.ap?Ce(e):t===v.b6?Oe():Be()},Ce=function(e){for(var n=Date.now(),i=[],a=[],s=(0,c.Z)(I);i.length<C;){var o=Math.floor(Math.random()*s.length);i.push(s[o]),s.splice(o,1),o=Math.floor(Math.random()*s.length),a.push(s[o]),s.splice(o,1)}i.sort(),a.sort(),B(n),F(a),D(i),M(s),pe({squareArray:e,ptiles:[].concat(i),gtiles:[].concat(a)}),A.send({type:"pb",func:"startgame",gameid:r,timestamp:n,racksize:C,sender:t,pname:j,tiles:s,ptiles:i,gtiles:a})},Oe=function(){A.send({gameid:r,gname:j,type:"pb",func:"joingame",sender:t})},Te=function(){A.send({gameid:r,type:"pb",func:"rejoingame",sender:t})},Be=function(){A.send({gameid:r,type:"pb",func:"startObserving"})};function Ee(){Y(-1),xe(!1),se(-1,-1,v.QY),ee([])}var Ze=function(e,n,t,r){var i=JSON.parse(JSON.stringify(U)),a=(0,c.Z)(i[e]),s=a[n],o=(0,c.Z)(q),l=(0,c.Z)(L),u=(0,c.Z)($),d=String(e)+"-"+String(n),p=$.indexOf(d);if(-1===t&&(t=X,r=ae),t>-1&&s.usedby===v.i4){var f=K===v.kX?o[t]:l[t];return s.letter=f,s.usedby=K,a[n]=s,i[e]=(0,c.Z)(a),K===v.kX?o.splice(t,1):l.splice(t,1),K===v.kX&&t===o.length&&(t-=1),K===v.Ov&&t===l.length&&(t-=1),Y(t),W(i),D(o),F(l),ee([].concat((0,c.Z)($),[d])),void se(r)}if(p>-1)return K===v.kX?o.push(s.letter):l.push(s.letter),s.usedby=v.i4,s.letter=v.GP,a[n]=s,i[e]=(0,c.Z)(a),Y(K===v.kX?o.length-1:l.length-1),u.splice(p,1),W(i),D(o),F(l),ee(u),void se(-1,-1,v.QY);if(s.usedby!==v.i4);else{var m=ae[0]!==e||ae[1]!==n?v.oW:ae[2]===v.oW?v.ik:ae[2]===v.ik?v.QY:v.oW;se(r=[e,n,m])}},Ie=function(e){if(t!==v.qg)if(-1!==X)if(X!==e){var n=t===v.ap?(0,c.Z)(q):(0,c.Z)(L),r=X,i=n[r],a=e;n.splice(r,1),n.splice(a,0,i),t===v.ap?D(n):F(n),Y(-1)}else Y(-1);else Y(e)};function Re(){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,s.Z)(i().mark((function e(){var n,a,s,o,l,u,d,p,f,m,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,De();case 4:if(0===(n=e.sent).invalidwords.length){e.next=8;break}return alert("Invalid according to ENABLE2K lexicon: ".concat(n.invalidwords.join().replace(".","?").toUpperCase())),e.abrupt("return");case 8:for(a=te,s=["0-0","0-"+E,"0-"+Z,E+"-0",E+"-"+Z,Z+"-0",Z+"-"+E,Z+"-"+Z],o=0;o<$.length;o++)s.indexOf($[o])>-1&&(a+=1);for(l=(0,c.Z)(q),u=(0,c.Z)(P);l.length<C&&u.length>0;)d=Math.floor(Math.random()*u.length),l.push(u[d]),u.splice(d,1);l.sort(),p=l.length>0?v.Ov:v.Bd,x(U)||(p=v.Bd),f={by:v.ap,type:v.bS,mainword:n.mainword,extrawords:n.extrawords,pos:n.pos},m=[].concat((0,c.Z)(oe),[f]),h=Date.now(),Ee(),B(h),z(p),D(l),M(u),le(m),re(a),pe({squareArray:JSON.parse(JSON.stringify(U)),ptiles:(0,c.Z)(l),gtiles:(0,c.Z)(L)}),A.send({gameid:r,type:"pb",func:"ept",timestamp:h,sender:t,ptiles:l,tiles:u,whoseturn:p,move:f,rescues:a});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return He.apply(this,arguments)}function He(){return(He=(0,s.Z)(i().mark((function e(){var n,a,s,o,l,u,d,p,f,m,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,De();case 4:if(0===(n=e.sent).invalidwords.length){e.next=8;break}return alert("Invalid according to ENABLE2K lexicon: ".concat(n.invalidwords.join().replace(".","?").toUpperCase())),e.abrupt("return");case 8:for(a=(0,c.Z)(L),s=(0,c.Z)(P);a.length<C&&s.length>0;)o=Math.floor(Math.random()*s.length),a.push(s[o]),s.splice(o,1);a.sort(),l=JSON.parse(JSON.stringify(U)),u=(0,c.Z)(q),d=(0,c.Z)(L),p=a.length>0?v.kX:v.Bd,x(U)||(p=v.Bd),f={by:v.b6,type:v.bS,mainword:n.mainword,extrawords:n.extrawords,pos:n.pos},m=[].concat((0,c.Z)(oe),[f]),h=Date.now(),Ee(),B(h),z(p),F(a),M(s),le(m),pe({squareArray:l,ptiles:u,gtiles:d}),A.send({gameid:r,type:"pb",func:"egt",timestamp:h,sender:t,gtiles:a,tiles:s,move:f,whoseturn:p,racksize:C});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){for(var e=!0,n=oe.length,t=0;e&&t<n;++t)oe[t].type===v.bS&&(e=!1);if(e&&U[E][E].usedby===v.i4)return window.alert("First play must hit center square"),!1;if(0===$.length)return window.alert("You didn't play any tiles"),!1;for(var r=$.length,i=Z+1,a=-1,s=Z+1,c=-1,o=0;o<r;++o){var l=parseInt($[o].split("-")[0]),u=parseInt($[o].split("-")[1]);if(l<i&&(i=l),l>a&&(a=l),u<s&&(s=u),u>c&&(c=u),!(l>0&&U[l-1][u].usedby!==v.i4)&&!(u>0&&U[l][u-1].usedby!==v.i4)&&!(l<Z&&U[l+1][u].usedby!==v.i4)&&!(u<Z&&U[l][u+1].usedby!==v.i4))return window.alert("Each played tile must be part of a word"),!1}if(i!==a&&s!==c)return window.alert("Tiles played must be in a straight line"),!1;for(var d=!1,p=!1,f=i;f<=a;++f)for(var m=s;m<=c;++m){if(U[f][m].usedby===v.i4)return window.alert("There is a gap in your word"),!1;if(!e){var h=f+"-"+m;$.indexOf(h)<0&&(d=!0),i===a&&f>0&&U[f-1][m].usedby!==v.i4&&(p=!0),i===a&&f<Z&&U[f+1][m].usedby!==v.i4&&(p=!0),s===c&&m>0&&U[f][m-1].usedby!==v.i4&&(p=!0),s===c&&m<Z&&U[f][m+1].usedby!==v.i4&&(p=!0)}}return!!(e||(i===a&&s>0&&U[i][s-1].usedby!==v.i4&&(d=!0),i===a&&c<Z&&U[i][c+1].usedby!==v.i4&&(d=!0),s===c&&i>0&&U[i-1][s]!==v.i4&&(d=!0),s===c&&a<Z&&U[a+1][s].usedby!==v.i4&&(d=!0),d||p))||(window.alert("New words must extend an existing word and/or hook existing words or tiles"),!1)}function De(){return Je.apply(this,arguments)}function Je(){return(Je=(0,s.Z)(i().mark((function e(){var n,t,r,a,s,o,l,u,d,p,f,m,h,b,x,y,g,w,N,j,k,A,S,C,O,T,B,E,I,R,P;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n={},t="",r=[],a="",s=Z+1,o=-1,l=Z+1,u=-1,d=$.length,p=0;p<d;++p)f=parseInt($[p].split("-")[0]),m=parseInt($[p].split("-")[1]),f<s&&(s=f),f>o&&(o=f),m<l&&(l=m),m>u&&(u=m);if(s<o||1===d){for(h=l,b=s;b>0&&U[b-1][h].usedby!==v.i4;)b-=1;for(x=o;x<Z&&U[x+1][h].usedby!==v.i4;)x+=1;for(a=v.v8[h]+v.RH[b],y=b;y<=x;++y)if(t+=U[y][h].letter,g=y+"-"+h,$.indexOf(g)>-1){for(w=h;w>0&&U[y][w-1].usedby!==v.i4;)w-=1;for(N=h;N<Z&&U[y][N+1].usedby!==v.i4;)N+=1;if(w<N){for(j="",k=w;k<=N;++k)j+=U[y][k].letter;r=[].concat((0,c.Z)(r),[j])}}}if(t.length<2){for(A=s,S=l;S>0&&U[A][S-1].usedby!==v.i4;)S-=1;for(C=u;C<Z&&U[A][C+1].usedby!==v.i4;)C+=1;for(a=v.RH[A]+v.v8[S],t="",r=[],O=S;O<=C;++O)if(t+=U[A][O].letter,T=A+"-"+O,$.indexOf(T)>-1){for(B=A;B>0&&U[B-1][O].usedby!==v.i4;)B-=1;for(E=A;E<Z&&U[E+1][O].usedby!==v.i4;)E+=1;if(B<E){for(I="",R=B;R<=E;++R)I+=U[R][O].letter;r=[].concat((0,c.Z)(r),[I])}}}return e.next=16,Le(t,r);case 16:return P=e.sent,n={mainword:t,extrawords:r,pos:a,invalidwords:P},e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,n){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,s.Z)(i().mark((function e(n,t){var r,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,t.forEach((function(e){r=r+","+e})),"https://tilerunner.herokuapp.com/ENABLE2K?validate=",e.next=5,fetch("https://tilerunner.herokuapp.com/ENABLE2K?validate="+r.toLocaleLowerCase());case 5:return a=e.sent,e.next=8,a.json();case 8:return s=e.sent,e.abrupt("return",s.invalidwords);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){be||(xe(!0),A.send({gameid:r,type:"pb",func:"allowundo",sender:t}))}function Ue(){A.send({gameid:r,type:"pb",func:"undoturn"})}var We=function(){W(JSON.parse(JSON.stringify(de.squareArray))),D((0,c.Z)(de.ptiles)),F((0,c.Z)(de.gtiles)),Y(-1),ee([]),se([-1,-1,v.QY])},Ge=function(){A.send({gameid:r,type:"pb",sender:t,func:"requestgamedata",syncstamp:T})},Xe=function(){A.send({gameid:r,type:"pb",sender:t,func:"requestsyncdata"})};return(0,a.jsxs)("div",{className:"prisonbreak",children:[(0,a.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,a.jsx)("div",{className:"w3-display-middle",children:(0,a.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,a.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",r]}),(0,a.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",t===v.ap?j:t===v.b6?ge:"Secret"]}),(0,a.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,a.jsx)(l.default,{href:"../../",children:(0,a.jsx)("a",{children:(0,a.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})}),(0,a.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",t===v.ap?ge:t===v.b6?j:"Secret"]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,a.jsx)(p.default,{tiles:P,othertiles:t===v.ap?L:t===v.b6?q:[]}),(0,a.jsx)(f.default,{moves:oe,onmoveclick:function(e){}})]}),(0,a.jsx)("div",{className:"col pbPlayerOuterSection",children:t===v.ap?(0,a.jsx)(u.default,{racktiles:q,whoseturn:K,selection:X,onClick:function(e){return Ie(e)},onClickFinishTurn:function(){return Re()},onClickTileRecall:function(){return We()},onClickTileExchange:function(){return function(){if(P.length<C)window.alert("Need "+C+" tiles in the bag to exchange");else{for(var e=[],n=(0,c.Z)(P);e.length<C&&n.length>0;){var i=Math.floor(Math.random()*n.length);e.push(n[i]),n.splice(i,1)}e.sort(),(n=[].concat((0,c.Z)(n),(0,c.Z)(de.ptiles))).sort();var a={by:v.ap,type:v.Ix},s=[].concat((0,c.Z)(oe),[a]),o=Date.now();Ee(),B(o),W(JSON.parse(JSON.stringify(de.squareArray))),z(v.Ov),D(e),M(n),le(s),pe({squareArray:JSON.parse(JSON.stringify(de.squareArray)),ptiles:[].concat(e),gtiles:(0,c.Z)(L)}),A.send({gameid:r,type:"pb",func:"ept",timestamp:o,sender:t,whoseturn:v.Ov,ptiles:e,tiles:n,move:a})}}()},onClickPassPlay:function(){return function(){var e={by:v.ap,type:v.Am},n=[].concat((0,c.Z)(oe),[e]),i=g(n)?v.Bd:v.Ov,a=Date.now();We(),Ee(),B(a),z(i),le(n),A.send({gameid:r,type:"pb",func:"ept",timestamp:a,sender:t,whoseturn:i,move:e})}()},onClickUndoLastPlay:function(){return Ue()},onClickAllowUndo:function(){return Qe()},participant:t,moves:oe,allowRewind:be}):t===v.b6?(0,a.jsx)(u.default,{racktiles:L,whoseturn:K,selection:X,onClick:function(e){return Ie(e)},onClickFinishTurn:function(){return Me()},onClickTileRecall:function(){return We()},onClickTileExchange:function(){return function(){if(P.length<C)window.alert("Need "+C+" tiles in the bag to exchange");else{for(var e=[],n=(0,c.Z)(P);e.length<C&&n.length>0;){var i=Math.floor(Math.random()*n.length);e.push(n[i]),n.splice(i,1)}e.sort(),(n=[].concat((0,c.Z)(n),(0,c.Z)(de.gtiles))).sort();var a={by:v.b6,type:v.Ix},s=[].concat((0,c.Z)(oe),[a]),o=Date.now();Ee(),B(o),W(JSON.parse(JSON.stringify(de.squareArray))),z(v.kX),F(e),M(n),le(s),pe({squareArray:JSON.parse(JSON.stringify(de.squareArray)),ptiles:(0,c.Z)(q),gtiles:[].concat(e)}),A.send({gameid:r,type:"pb",func:"egt",timestamp:o,sender:t,whoseturn:v.kX,gtiles:e,tiles:n,move:a})}}()},onClickPassPlay:function(){return function(){var e={by:v.b6,type:v.Am},n=[].concat((0,c.Z)(oe),[e]),i=g(n)?v.Bd:v.kX,a=Date.now();We(),Ee(),B(a),z(i),le(n),A.send({gameid:r,type:"pb",func:"egt",timestamp:a,sender:t,whoseturn:i,move:e})}()},onClickUndoLastPlay:function(){return Ue()},onClickAllowUndo:function(){return Qe()},participant:t,moves:oe,allowRewind:be}):(0,a.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,a.jsxs)("div",{className:"pbPlayerTitle",children:[(0,a.jsx)("i",{className:"material-icons",children:v._k}),"\xa0",v.Ji,"\xa0",(0,a.jsx)("i",{className:"material-icons",children:v._k})]}),(0,a.jsx)("div",{className:"pbTilerack",children:q&&q.map((function(e,n){return(0,a.jsx)(N,{participant:"P",tilevalue:e,tileindex:n},"ObserverPrisonersRackTile".concat(n))}))}),(0,a.jsxs)("div",{className:"pbPlayerTitle",children:[(0,a.jsx)("i",{className:"material-icons",children:v.g9}),"\xa0",v.jN,"\xa0",(0,a.jsx)("i",{className:"material-icons",children:v.g9})]}),(0,a.jsx)("div",{className:"pbTilerack",children:L&&L.map((function(e,n){return(0,a.jsx)(N,{participant:"G",tilevalue:e,tileindex:n},"ObserverGuardsRackTile".concat(n))}))})]})}),(0,a.jsx)("div",{className:"col",children:t===K?(0,a.jsx)("div",{className:"row",onKeyDownCapture:function(e){if(e.preventDefault(),t===K)if("Enter"!==e.key)if("Escape"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var n=e.key.toUpperCase(),r=K===v.kX?q:L,i=r.indexOf(n);if(-1===i&&(i=r.indexOf("?")),i>-1){var a=ae[0],s=ae[1],o=ae[2];if(a>-1&&s>-1&&o!==v.QY){var l=ae;if(o===v.oW){for(var u=-1,d=s+1;d<Z+1&&-1===u;d++)U[a][d].usedby===v.i4&&(u=d);return l=-1===u?[-1,-1,v.QY]:[a,u,v.oW],Ze(a,s,i,l),void Y(-1)}if(o===v.ik){for(var p=-1,f=2*C+1,m=a+1;m<f&&-1===p;m++)U[m][s].usedby===v.i4&&(p=m);return l=-1===p?[-1,-1,v.QY]:[p,s,v.ik],Ze(a,s,i,l),void Y(-1)}}}}else if("Backspace"===e.key&&$.length>0){var h=$[$.length-1],b=parseInt(h.split("-")[0]),x=parseInt(h.split("-")[1]),y=(0,c.Z)($),g=(0,c.Z)(q),w=(0,c.Z)(L),N=JSON.parse(JSON.stringify(U)),j=N[b],k=j[x],A=[-1,-1,v.QY],S=X;y.splice($.length-1,1);var O=U[b][x].letter;K===v.kX?(g.push(O),S=g.length-1):(w.push(O),S=w.length-1),k.usedby=v.i4,k.letter=v.GP,j[x]=k,N[b]=(0,c.Z)(j);var T=ae[2];T!==v.QY&&(A=[b,x,T],1===$.length&&(S=-1)),ee(y),F(w),D(g),W(N),se(A),Y(S)}}else We();else K===v.kX?Re():Me()},children:(0,a.jsx)(d.default,{squareArray:U,rcd:ae,onClick:function(e,n){return Ze(e,n,-1,null)}})}):(0,a.jsx)("div",{className:"row",children:(0,a.jsx)(d.default,{squareArray:U,rcd:ae,onClick:function(){}})})}),(0,a.jsxs)("div",{className:"col",children:[(0,a.jsx)(m.default,{rescues:te}),(0,a.jsx)(h.default,{gameid:r,client:A,nickname:j,msgs:je,setMsgs:ke,participant:t})]})]}),(0,a.jsx)("div",{className:"w3-display-container w3-teal topBarHeight",children:(0,a.jsx)("div",{className:"w3-display-middle commonFontFamily",children:K===v.Bd?(0,a.jsx)("h1",{children:"Game Over!"}):(0,a.jsx)("p",{children:v._W[me]})})})]})}},9477:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595);n.default=function(e){var n=e.moves,t=e.onmoveclick;return(0,r.jsxs)("div",{className:"pbMoves",children:[(0,r.jsx)("div",{className:"pbMovesTitle",children:"MOVES"}),(0,r.jsx)("div",{className:"pbMovesScrollable",id:"ScrollableMoves",children:n&&n.map((function(e,n){var a;return(0,r.jsxs)("div",{className:"pbMove",onClick:function(){return t(n)},children:[(0,r.jsx)("span",{className:"pbMove by",children:e.by}),":",(0,r.jsx)("span",{className:"pbMove ".concat(e.type),children:e.type===i.bS?(0,r.jsxs)(r.Fragment,{children:[e.pos," ",e.mainword.replace("Q","Qu"),null===(a=e.extrawords)||void 0===a?void 0:a.map((function(e,n){return(0,r.jsxs)("span",{children:[",\xa0",e.replace("Q","Qu")]},"extraword".concat(n))}))]}):(0,r.jsx)(r.Fragment,{})})]},"move".concat(n))}))})]})}},8451:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595),a=function(e){var n="pbTileOnRack "+(e.selection===e.tileindex?"Selected ":"Unselected ")+("Q"===e.tilevalue?"u ":"")+e.participant,t=e.tileindex;return(0,r.jsx)("div",{className:n,onClick:function(n){return e.onClick(n)},children:(0,r.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},t)},s=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"check"}),"\xa0Finish Turn"]})})},c=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"undo"}),"\xa0Recall Tiles"]})})},o=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"cached"}),"\xa0Swap Tiles"]})})},l=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"not_interested"}),"\xa0Pass Turn"]})})},u=function(e){return e.alreadyAllowed?(0,r.jsx)("div",{className:"pbActionButtonSevere",children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report"}),"\xa0ENABLED",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"\xa0Allow undo is now enabled"})]})}):(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report_problem"}),"\xa0Allow Undo Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Click to let opponent undo"})]})})},d=function(e){return(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"delete_forever"}),"\xa0Undo My Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Opponent has allowed undo"})]})})};function p(e){return(0,r.jsxs)("div",{className:"pbActionButtonDiv",children:[(0,r.jsx)("p",{children:(0,r.jsx)(s,{onClick:function(){return e.onClickFinishTurn()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(c,{onClick:function(){return e.onClickTileRecall()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(o,{onClick:function(){return e.onClickTileExchange()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(l,{onClick:function(){return e.onClickPassPlay()}})})]})}function f(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("div",{children:(0,r.jsx)(u,{onClick:function(){return e.onClickAllowUndo()},alreadyAllowed:e.allowRewind})})})}function m(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("p",{children:(0,r.jsx)(d,{onClick:function(){return e.onClickUndoLastPlay()}})})})}n.default=function(e){var n=e.participant===i.ap?i._k:i.g9,t=e.participant===i.ap?i.Ji:i.jN;return(0,r.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,r.jsxs)("div",{className:"pbPlayerTitle",children:[(0,r.jsx)("i",{className:"material-icons",children:n}),"\xa0",t,"\xa0",(0,r.jsx)("i",{className:"material-icons",children:n})]}),(0,r.jsx)("div",{className:"pbTilerack",children:e.racktiles&&e.racktiles.map((function(n,t){return(0,r.jsx)(a,{whoseturn:e.whoseturn,participant:e.participant,selection:e.selection,tileindex:t,tilevalue:n,onClick:function(){return e.onClick(t)}},"RackTile".concat(t))}))}),e.whoseturn===e.participant?p(e):e.allowRewind&&e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by===e.participant&&m(e),e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by!==e.participant&&f(e)]})}},798:function(e,n,t){"use strict";t.r(n);var r=t(5893);n.default=function(e){var n=e.rescues;return(0,r.jsxs)("div",{className:"pbRescuesMade",children:["Rescues made: ",n]})}},4620:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595);n.default=function(e){var n=e.usedby,t=e.type,a=e.letter,s=e.ri,c=e.ci,o=e.rcd,l=e.onClick,u=n!==i.i4?"pbSquareInner PlayerTile":o[0]===s&&o[1]===c&&o[2]===i.oW?"pbSquareInner RightArrow":o[0]===s&&o[1]===c&&o[2]===i.ik?"pbSquareInner DownArrow":"pbSquareInner "+t,d=n!==i.i4?a:u.indexOf("RightArrow")>-1?"\u27a1":u.indexOf("DownArrow")>-1?"\u2b07":u.indexOf("CenterSquare")>-1?(0,r.jsx)("i",{className:"material-icons",children:"stars"}):u.indexOf("EscapeHatch")>-1?(0,r.jsx)("i",{className:"material-icons",children:i._k}):".";return n===i.i4?(0,r.jsx)("button",{className:u,onClick:l,children:d}):(0,r.jsx)("button",{className:u,onClick:l,children:(0,r.jsx)("div",{className:"pbSquareTileText ".concat(n+("Q"===a?" u":"")),children:d})})}},8520:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(1385);n.default=function(e){var n=e.tiles,t=e.othertiles,a=[].concat((0,i.Z)(n||[]),(0,i.Z)(t||[]));return a.sort(),"?"===a[0]&&(a.splice(0,1),a.push("?")),"?"===a[0]&&(a.splice(0,1),a.push("?")),(0,r.jsxs)("div",{className:"pbTilepool",children:[(0,r.jsx)("div",{className:"pbTilepoolTitle",children:"TILES"}),a.map((function(e,n){return(0,r.jsxs)("span",{children:[n>0&&e!==a[n-1]?(0,r.jsx)("span",{className:"pbTilepoolDivider"}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("span",{className:"Q"===e?"pbTilepoolTile u":"pbTilepoolTile",children:e})]},"tile".concat(n))}))]})}}}]);