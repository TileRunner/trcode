(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return s},dK:function(){return r},oZ:function(){return a},e:function(){return i},hA:function(){return o},iS:function(){return c},$B:function(){return l}});var s="fyb",r="U",a="P",i="GAME_DATA",o="GAME_LIST",c="CHAT_DATA",l=2e4},1863:function(e,n,t){"use strict";t.r(n);var s=t(5893),r=t(1385),a=t(7294),i=t(9359),o=t(4339),c=t(2374),l=t(1827),d=t(7666),u=t(3939);function h(e,n){return n.map((function(n){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[n.nickname,(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsx)("td",{children:n.pass?(0,s.jsx)("span",{className:"trDanger",children:" passed"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.I3,{children:(0,s.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"),children:[n.word,n.earned&&(0,s.jsxs)("span",{children:[" (",n.earned," pts)"]})]})}),(0,s.jsx)(i.A_,{children:(0,s.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,s.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]})})]},"".concat(e).concat(n.nickname))}))}function m(e,n,t,r,a,i,c,l){return(0,s.jsxs)("div",{onKeyDownCapture:e,children:[(0,s.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,s.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,s.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,s.jsx)("button",{className:"trButton",onClick:function(){f(n,r,a,i,c,l,t)},children:"SUBMIT"},"submitWord"),(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,s,r,a){e("Sending PASS ... shouldn't take long."),n.send({type:o.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:s,nickname:r,timestamp:Date.now(),word:""}),a("")}(a,i,c,r.gameid,l,t)},children:"PASS"},"passButton")]})]})}function f(e,n,t,s,r,a,i){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var d=n.movesThisRound[l].word;if(d===c)return void t("You cannot reuse a previous word from this round (".concat(d,")."));if(d+"S"===c&&"S"!==d.substring(d.length-1)&&n.movesThisRound[l].valid)return void t("You cannot add S to a previous valid word (".concat(d,") from this round unless it ends with S."))}for(var u=0;u<n.fryLetters.length;u++){for(var h=0,m=0,f=0;f<n.fryLetters.length;f++)n.fryLetters[u]===n.fryLetters[f]&&(h+=1);for(var p=0;p<c.length;p++)n.fryLetters[u]===c[p]&&(m+=1);if(m<h)return void t("You need the letter ".concat(n.fryLetters[u]," at least ").concat(h," time").concat(1===h?".":"s."))}t("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),s.send({type:o.j6,func:"move",pass:!1,thisisme:r,gameid:n.gameid,nickname:a,timestamp:Date.now(),clientRound:n.round,clientMovesLength:n.movesThisRound.length,word:c}),i("")}n.default=function(e){var n=e.setWhereto,t=e.client,p=e.thisisme,g=e.wsmessage,v=e.nickname,x=e.gameid,j=(0,a.useState)([]),y=j[0],N=j[1],k=(0,a.useState)(""),S=k[0],w=k[1],C=(0,a.useState)(""),L=C[0],b=C[1],T=(0,a.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:[],fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),A=T[0],R=T[1],P=(0,a.useState)(""),B=P[0],D=P[1],M=(0,a.useState)(""),E=M[0],O=M[1],I=(0,a.useState)(-1),_=I[0],F=I[1],J=(0,c.D)(A);(0,a.useEffect)((function(){(0,u.O)("ScrollableChat")}),[y]),(0,a.useEffect)((function(){var e=setInterval((function(){A.whoseturn.length>0&&A.players.length>0&&t.send({type:o.j6,func:"interval",syncstamp:E,thisisme:p,nickname:v,gameid:A.gameid})}),o.$B);return function(){return clearInterval(e)}})),(0,a.useEffect)((function(){""!==g&&function(e){var n=JSON.parse(e);if(n.type===o.j6)if(n.func===o.iS){var s=n.msgs.filter((function(e){for(var n=0;n<A.players.length;n++){if(A.players[n].nickname===e.from)return!0}return!1}));N(s)}else n.func===o.e?n.game.gameindex===A.gameindex&&n.game.round===A.round&&n.goal===A.goal&&n.players.length===A.players.length&&n.game.movesThisRound.length===A.movesThisRound.length||(w(n.snat),F(-1),R(n.game),O(n.game.syncstamp),b("")):n.func===o.S2C_FUNC_GAMECREATED||t.send({type:o.j6,func:"rejoin",thisisme:p,gameid:A.gameid,nickname:v,timestamp:Date.now()})}(g)}),[g]),(0,a.useEffect)((function(){var e;if(J&&A.gameindex===J.gameindex&&A.round===J.round&&(A.freeforall&&!J.freeforall?e=A.movesThisRound[A.movesThisRound.length-1].pass?"https://tilerunner.github.io/Pass.m4a":"https://tilerunner.github.io/Oops.m4a":J.players.filter((function(e){return e.dropped})).length<A.players.filter((function(e){return e.dropped})).length?e="ByeBye":J.whoseturn.indexOf(v)<0&&A.whoseturn.indexOf(v)>-1&&(e="YourTurn"),e)){var n=document.createElement("audio");n.src="https://tilerunner.github.io/".concat(e,".m4a"),n.play()}}),[A]);var Z=function(){return A.whoseturn.indexOf(v)>-1},U=function(){return A.players.filter((function(e){return e.nickname===v&&e.dropped})).length>0},W=(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trSubtitle",children:[x,": ",v]}),(0,s.jsx)("table",{className:"trTable",children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:(0,s.jsxs)("th",{colSpan:"2",children:["First to ",A.goal," wins!"]})}),A.players.map((function(e,n){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)(i.I3,{children:[e.dropped&&(0,s.jsx)("span",{className:"trDanger"}),e.nickname,e.wins>0&&(0,s.jsxs)("span",{children:[" (Won ",e.wins,")"]}),(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsxs)(i.A_,{children:[e.nickname,e.wins>0&&(0,s.jsxs)("span",{children:[" (",e.wins,")"]}),(0,s.jsx)("span",{className:"floatright",children:":"})]})]}),(0,s.jsxs)("td",{children:[e.points<10?(0,s.jsx)("span",{children:"\xa0"}):"",e.points,"\xa0",e.points>=A.goal&&(0,s.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player.".concat(n,".").concat(e.nickname))})),A.movesPrevRound&&A.movesPrevRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Previous round:"})}),A.movesPrevRound&&A.movesPrevRound.length>0&&h("movesPrevRound",A.movesPrevRound),A.movesThisRound&&A.movesThisRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"This round:"})}),A.movesThisRound&&A.movesThisRound.length>0&&h("movesThisRound",A.movesThisRound),!A.freeforall&&A.freeforallMoves&&A.freeforallMoves.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!A.freeforall&&A.freeforallMoves&&A.freeforallMoves.length>0&&h("ffaMoves",A.freeforallMoves)]})}),A.whoseturn.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=A.fryLetters.length,n=(0,r.Z)(A.fryLetters),t=[];t.length<e;){var s=Math.floor(Math.random()*n.length);t.push(n[s]),n.splice(s,1)}var a=JSON.parse(JSON.stringify(A));a.fryLetters=[].concat(t),R(a)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=(0,r.Z)(A.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(A));n.fryLetters=(0,r.Z)(e),R(n)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,s.jsx)("div",{className:"fryLetterDiv",children:A.fryLetters.map((function(e,n){return(0,s.jsx)("span",{className:n===_?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=A.fryLetters[n],t=(0,r.Z)(A.fryLetters);t.splice(n,1),t.push(e);var s=JSON.parse(JSON.stringify(A));s.fryLetters=(0,r.Z)(t),R(s),F(-1)},onClick:function(){if(-1===_)F(n);else if(n===_)F(-1);else{for(var e=[],t=A.fryLetters[_],s=0;s<A.fryLetters.length;s++){var r=A.fryLetters[s];s===n&&e.push(t),s!==_&&e.push(r)}var a=JSON.parse(JSON.stringify(A));a.fryLetters=[].concat(e),R(a),F(-1)}},children:e},"FryLetter".concat(n))}))}),(0,s.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",A.numPossibleAnswers,")"]})]}),Z()&&m((function(e){if(Z())return"Enter"===e.key?(e.preventDefault(),void f(B,A,b,t,p,v,D)):void 0}),B,D,A,b,t,p,v),(0,s.jsxs)("div",{children:[A.gameOver&&(0,s.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",!U()&&A.players.filter((function(e){return!e.dropped})).length>1&&(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,s){e.send({type:o.j6,func:"replay",thisisme:n,game:t,gameid:t.gameid,nickname:s,timestamp:Date.now()})}(t,p,A,v)},children:"PLAY AGAIN"})]}),(0,s.jsx)("div",{className:"trParagraph",children:S}),L&&(0,s.jsx)("div",{className:"trParagraph trWarning",children:L})]}),!U()&&!A.gameOver&&(0,s.jsx)("div",{className:"trParagraph",children:(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,s,r){e("Sending DROP ... shouldn't take long."),n.send({type:o.j6,func:"drop",thisisme:t,gameid:s,nickname:r,timestamp:Date.now()})}(b,t,p,A.gameid,v)},children:"QUIT"},"dropButton")})]});return(0,s.jsxs)("div",{className:"trBackground",children:[(0,s.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,s.jsx)("button",{className:"trButton",onClick:function(){n("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,s.jsx)(i.A_,{children:(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-8",children:W}),(0,s.jsx)("div",{className:"col-4",children:(0,s.jsx)(l.default,{gameid:x,client:t,nickname:v,msgs:y,setMsgs:N})})]})})}),(0,s.jsx)(i.I3,{children:(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6",children:W}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(d.default,{gameid:x,client:t,nickname:v,msgs:y,setMsgs:N})})]})})})]})}},1827:function(e,n,t){"use strict";t.r(n);var s=t(5893),r=t(1385),a=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,i=e.client,o=e.nickname,c=e.msgs,l=void 0===c?[]:c,d=e.setMsgs,u=e.participant,h=void 0===u?"":u,m=(0,a.useState)(""),f=m[0],p=m[1];return(0,s.jsx)("div",{id:"ScrollableChat",className:"thinChat",children:(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[l.map((function(e,n){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"thinChatFrom",children:e.from})},"ChatMessageFrom".concat(n)),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"thinChatMsg",children:e.msg})},"ChatMessageMsg".concat(n))]})})),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"2",children:""===o?(0,s.jsx)("span",{children:"Please enter nickname to use chat"}):(0,s.jsx)("textarea",{className:""===f?"thinChatInputEmpty":"thinChatInput",name:"nextmsgInputArea",value:f,onChange:function(e){p(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&f.length>0){e.preventDefault();var n=[].concat((0,r.Z)(l),[{from:o,msg:f}]),s=f;return d(n),p(""),void i.send({gameid:t,nickname:o,type:i.clientType,func:"chat",sender:h,sendmsg:s})}if("Backspace"===e.key&&f.length>0){e.preventDefault();var a=f.slice(0,f.length-1);p(a)}},placeholder:"chat..."})})})]})})})}}}]);