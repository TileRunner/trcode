(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{6595:function(e,n,t){"use strict";t.d(n,{v8:function(){return r},RH:function(){return a},dK:function(){return s},ap:function(){return i},b6:function(){return o},kX:function(){return c},Ov:function(){return l},Bd:function(){return u},_k:function(){return d},g9:function(){return p},Ji:function(){return f},jN:function(){return m},bS:function(){return h},Ix:function(){return v},Am:function(){return y},oW:function(){return b},ik:function(){return x},QY:function(){return g},i4:function(){return w},_W:function(){return N},$B:function(){return j},fl:function(){return k},Cr:function(){return S},L8:function(){return A},Qt:function(){return C},fi:function(){return O},ix:function(){return T},me:function(){return B},WS:function(){return E},GP:function(){return Z}});var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],a=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],s="U",i="P",o="G",c=i,l=o,u="X",d="run_circle",p="security",f="PRISONERS",m="GUARDS",h="PLAY",v="SWAP",y="PASS",b="r",x="d",g="",w="",N=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],j=2e4,k=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],S=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],A=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],C=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],O="EscapeHatch",T="CenterSquare",B="style1",E="style2",Z=""},3939:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var r=function(e){var n=document.getElementById(e);n.scrollTop=n.scrollHeight}},3625:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(4620),s=t(6595);n.default=function(e){var n=e.onClick,t=e.squareArray,i=void 0===t?[]:t,o=e.rcd,c=function(e){return(0,r.jsxs)("tr",{className:"pbRow",children:[(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderLeft",children:s.RH[e]}),i[e].map((function(e){return function(e){return(0,r.jsx)("td",{className:"pbSquareOuter",children:(0,r.jsx)(a.default,{usedby:e.usedby,type:e.type,letter:e.letter,ri:e.row,ci:e.col,rcd:o,onClick:function(){return n(e.row,e.col)}})},"Square".concat(e.row,"-").concat(e.col))}(e)})),(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderRight",children:s.RH[e]})]},"BoardRow".concat(e))};return(0,r.jsx)("table",{className:"pbBoard",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",children:[(0,r.jsx)("td",{className:"pbBoardHeaderTopLeft",children:"\xa0"}),i.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:s.v8[n]},"TopColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderTopRight",children:"\xa0"})]}),i.map((function(e,n){return c(n)})),(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",id:"BoardHeaderBottom",children:[(0,r.jsx)("td",{className:"pbBoardHeaderBottomLeft",children:"\xa0"}),i.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:s.v8[n]},"BottomColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderBottomRight",children:"\xa0"})]})]})})}},7666:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(1385),s=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,i=e.client,o=e.nickname,c=e.msgs,l=void 0===c?[]:c,u=e.setMsgs,d=e.participant,p=void 0===d?"":d,f=(0,s.useState)(""),m=f[0],h=f[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,r.jsx)("table",{className:"pbChatTable",children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pbChatFrom",children:e.from}),(0,r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(n))})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===o?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){h(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=[].concat((0,a.Z)(l),[{from:o,msg:m}]),r=m;return u(n),h(""),void i.send({gameid:t,nickname:o,type:"pb",func:"chat",sender:p,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var s=m.slice(0,m.length-1);h(s)}},placeholder:"chat..."})})})]})})})}},1658:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(5893),a=t(1385),s=t(7294),i=t(1664),o=t(8451),c=t(3625),l=t(8520),u=t(9477),d=t(798),p=t(7666),f=t(6595);function m(e){for(var n=2*e+1,t=Array(n),r=0;r<n;++r){for(var a=Array(n),s=0;s<n;++s){var i={row:r,col:s,type:f.WS,usedby:f.i4,letter:f.GP};r===e&&s===e?i.type=f.ix:r%e===0&&s%e===0?i.type=f.fi:r%2===s%2&&(i.type=f.me),a[s]=i}t[r]=[].concat(a)}return t}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(e.length-1)/2,t=2*n,r=n,a=!0;return e[0][0].usedby!==f.i4&&e[0][r].usedby!==f.i4&&e[0][t].usedby!==f.i4&&e[r][0].usedby!==f.i4&&e[r][t].usedby!==f.i4&&e[t][0].usedby!==f.i4&&e[t][r].usedby!==f.i4&&e[t][t].usedby!==f.i4&&(a=!1),a}function v(e){return/[A-Z][0-9][0-9]/.test(e)?{row:Number(e.substr(1,2))-1,col:f.v8.indexOf(e[0]),dir:f.ik}:/[A-Z][0-9]/.test(e)?{row:Number(e[1])-1,col:f.v8.indexOf(e[0]),dir:f.ik}:/[0-9][0-9][A-Z]/.test(e)?{row:Number(e.substr(0,2))-1,col:f.v8.indexOf(e[2]),dir:f.oW}:/[0-9][A-Z]/.test(e)?{row:Number(e[0])-1,col:f.v8.indexOf(e[1]),dir:f.oW}:void 0}function y(e){var n=e.length-1,t=n-1;return t>-1&&e[t].type===f.Am&&e[n].type===f.Am}var b=t(3939);var x=function(e){var n=e.isrejoin,t=e.participant,x=e.gameid,g=e.nickname,w=e.wsmessage,N=e.client,j=e.racksize,k=void 0===j?4:j,S=(0,s.useState)(""),A=S[0],C=S[1],O=k,T=2*k,B=6===k?f.L8:7===k?f.Qt:5===k?f.Cr:f.fl,E=(0,s.useState)((0,a.Z)(B)),Z=E[0],I=E[1],R=(0,s.useState)([]),M=R[0],H=R[1],P=(0,s.useState)([]),q=P[0],D=P[1],J=(0,s.useState)([]),F=J[0],Q=J[1],L=(0,s.useState)(-1),W=L[0],U=L[1],X=(0,s.useState)(f.kX),G=X[0],Y=X[1],_=(0,s.useState)([]),K=_[0],z=_[1],V=(0,s.useState)(0),$=V[0],ee=V[1],ne=(0,s.useState)([-1,-1,f.QY]),te=ne[0],re=ne[1],ae=(0,s.useState)([]),se=ae[0],ie=ae[1],oe=(0,s.useState)({squareArray:[],ptiles:[],gtiles:[]}),ce=oe[0],le=oe[1],ue=(0,s.useState)(0),de=ue[0],pe=ue[1],fe=(0,s.useState)(!1),me=fe[0],he=fe[1],ve=(0,s.useState)(""),ye=ve[0],be=ve[1],xe=(0,s.useState)([]),ge=xe[0],we=xe[1],Ne=function(e){var n=(0,s.useRef)();return(0,s.useEffect)((function(){n.current=e})),n.current}($);(0,s.useEffect)((function(){je()}),[]),(0,s.useEffect)((function(){""!==w&&function(e){var n=JSON.parse(e);if(console.log("".concat(n.gameid," ").concat(n.func)),n.gameid===x&&"pb"===n.type){if("providegamedata"===n.func){var r=function(e){for(var n=e,t=n.events.length-1,r=n.events[t],a="",s="",i="",o=m(n.racksize),c=[],l=0,u=0;u<n.events.length;u++){var d=n.events[u];if(d.ptiles&&(a=d.ptiles),d.gtiles&&(s=d.gtiles),d.type===f.bS||d.type===f.Ix||d.type===f.Am){var p={by:d.by,type:d.type};if(d.type!==f.bS&&d.type!==f.Ix||(i=d.tiles),d.type===f.bS){p.mainword=d.mainword,p.extrawords=d.extrawords.split(","),p.pos=d.pos,d.by===f.ap&&(l=d.rescues);for(var h=v(d.pos),y=h.row,b=h.col,x=0;x<d.mainword.length;x++){var g=o[y][b];g.usedby===f.i4&&(g.usedby=d.by,g.letter=d.mainword[x]),h.dir===f.oW?b++:y++}}c.push(p)}}return{pname:n.pname,gname:n.gname,syncstamp:r.timestamp,tiles:i.split(""),squareArray:o,ptiles:a.split(""),gtiles:s.split(""),whoseturn:r.whoseturn,moves:c,rescues:l,racksize:n.racksize,allowRewind:!1}}(n.apidata);C(r.syncstamp),t===f.ap?be(r.gname):be(r.pname),I(r.tiles),Q(r.squareArray),H(r.ptiles),D(r.gtiles),Y(r.whoseturn);var s={squareArray:JSON.parse(JSON.stringify(r.squareArray)),ptiles:(0,a.Z)(r.ptiles),gtiles:(0,a.Z)(r.gtiles)};le(s),ie(r.moves),ee(r.rescues),he(r.allowRewind),Ce()}if("providegname"===n.func&&t===f.Ji&&be(n.gname),"allowundo"===n.func&&he(!0),"chat"===n.func&&n.sender!=t){var i=[].concat((0,a.Z)(ge),[{from:n.nickname,msg:n.sendmsg}]);we(i)}"providesyncdata"===n.func&&(console.log("providesyndata passed ".concat(n.syncstamp," and I have ").concat(A)),n.syncstamp!==A&&(console.log("Out of sync - requesting latest game data"),Pe()))}}(w)}),[w]),(0,s.useEffect)((function(){(0,b.O)("ScrollableMoves")}),[se]),(0,s.useEffect)((function(){(0,b.O)("ScrollableChat")}),[ge]),(0,s.useEffect)((function(){if($>Ne){var e=document.createElement("audio");e.src=t===f.b6?"https://tilerunner.github.io/OneGotAway.m4a":"https://tilerunner.github.io/yippee.m4a",e.play()}}),[$]),(0,s.useEffect)((function(){var e=de+1;e>=f._W.length&&(e=0),pe(e)}),[G]),(0,s.useEffect)((function(){var e=setInterval((function(){t!==G&&G!==f.Bd&&qe()}),f.$B);return function(){return clearInterval(e)}}));var je=function(){var e=m(k);Q(e),n?Ae():t===f.ap?ke(e):Se()},ke=function(e){for(var n=Date.now(),r=[],s=[],i=(0,a.Z)(B);r.length<k;){var o=Math.floor(Math.random()*i.length);r.push(i[o]),i.splice(o,1),o=Math.floor(Math.random()*i.length),s.push(i[o]),i.splice(o,1)}r.sort(),s.sort(),C(n),D(s),H(r),I(i),le({squareArray:e,ptiles:[].concat(r),gtiles:[].concat(s)}),N.send({type:"pb",func:"startgame",gameid:x,timestamp:n,racksize:k,sender:t,pname:g,tiles:i,ptiles:r,gtiles:s})},Se=function(){N.send({gameid:x,gname:g,type:"pb",func:"joingame",sender:t})},Ae=function(){N.send({gameid:x,type:"pb",func:"rejoingame",sender:t})};function Ce(){U(-1),he(!1),re(-1,-1,f.QY),z([])}var Oe=function(e,n,t,r){var s=JSON.parse(JSON.stringify(F)),i=(0,a.Z)(s[e]),o=i[n],c=(0,a.Z)(M),l=(0,a.Z)(q),u=(0,a.Z)(K),d=String(e)+"-"+String(n),p=K.indexOf(d);if(-1===t&&(t=W,r=te),t>-1&&o.usedby===f.i4){var m=G===f.kX?c[t]:l[t];return o.letter=m,o.usedby=G,i[n]=o,s[e]=(0,a.Z)(i),G===f.kX?c.splice(t,1):l.splice(t,1),G===f.kX&&t===c.length&&(t-=1),G===f.Ov&&t===l.length&&(t-=1),U(t),Q(s),H(c),D(l),z([].concat((0,a.Z)(K),[d])),void re(r)}if(p>-1)return G===f.kX?c.push(o.letter):l.push(o.letter),o.usedby=f.i4,o.letter=f.GP,i[n]=o,s[e]=(0,a.Z)(i),U(G===f.kX?c.length-1:l.length-1),u.splice(p,1),Q(s),H(c),D(l),z(u),void re(-1,-1,f.QY);if(o.usedby!==f.i4);else{var h=te[0]!==e||te[1]!==n?f.oW:te[2]===f.oW?f.ik:te[2]===f.ik?f.QY:f.oW;re(r=[e,n,h])}},Te=function(e){if(-1!==W)if(W!==e){var n=t===f.ap?(0,a.Z)(M):(0,a.Z)(q),r=W,s=n[r],i=e;n.splice(r,1),n.splice(i,0,s),t===f.ap?H(n):D(n),U(-1)}else U(-1);else U(e)},Be=function(){if(Ze()){for(var e=$,n=["0-0","0-"+O,"0-"+T,O+"-0",O+"-"+T,T+"-0",T+"-"+O,T+"-"+T],r=0;r<K.length;r++)n.indexOf(K[r])>-1&&(e+=1);for(var s=(0,a.Z)(M),i=(0,a.Z)(Z);s.length<k&&i.length>0;){var o=Math.floor(Math.random()*i.length);s.push(i[o]),i.splice(o,1)}s.sort();var c=s.length>0?f.Ov:f.Bd;h(F)||(c=f.Bd);var l=Ie(),u={by:f.ap,type:f.bS,mainword:l.mainword,extrawords:l.extrawords,pos:l.pos},d=[].concat((0,a.Z)(se),[u]),p=Date.now();Ce(),C(p),Y(c),H(s),I(i),ie(d),ee(e),le({squareArray:JSON.parse(JSON.stringify(F)),ptiles:(0,a.Z)(s),gtiles:(0,a.Z)(q)}),N.send({gameid:x,type:"pb",func:"ept",timestamp:p,sender:t,ptiles:s,tiles:i,whoseturn:c,move:u,rescues:e})}},Ee=function(){if(Ze()){for(var e=(0,a.Z)(q),n=(0,a.Z)(Z);e.length<k&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort();var s=JSON.parse(JSON.stringify(F)),i=(0,a.Z)(M),o=(0,a.Z)(q),c=e.length>0?f.kX:f.Bd;h(F)||(c=f.Bd);var l=Ie(),u={by:f.b6,type:f.bS,mainword:l.mainword,extrawords:l.extrawords,pos:l.pos},d=[].concat((0,a.Z)(se),[u]),p=Date.now();Ce(),C(p),Y(c),D(e),I(n),ie(d),le({squareArray:s,ptiles:i,gtiles:o}),N.send({gameid:x,type:"pb",func:"egt",timestamp:p,sender:t,gtiles:e,tiles:n,move:u,whoseturn:c,racksize:k})}};function Ze(){for(var e=!0,n=se.length,t=0;e&&t<n;++t)se[t].type===f.bS&&(e=!1);if(e&&F[O][O].usedby===f.i4)return window.alert("First play must hit center square"),!1;if(0===K.length)return window.alert("You didn't play any tiles"),!1;for(var r=K.length,a=T+1,s=-1,i=T+1,o=-1,c=0;c<r;++c){var l=parseInt(K[c].split("-")[0]),u=parseInt(K[c].split("-")[1]);if(l<a&&(a=l),l>s&&(s=l),u<i&&(i=u),u>o&&(o=u),!(l>0&&F[l-1][u].usedby!==f.i4)&&!(u>0&&F[l][u-1].usedby!==f.i4)&&!(l<T&&F[l+1][u].usedby!==f.i4)&&!(u<T&&F[l][u+1].usedby!==f.i4))return window.alert("Each played tile must be part of a word"),!1}if(a!==s&&i!==o)return window.alert("Tiles played must be in a straight line"),!1;for(var d=!1,p=!1,m=a;m<=s;++m)for(var h=i;h<=o;++h){if(F[m][h].usedby===f.i4)return window.alert("There is a gap in your word"),!1;if(!e){var v=m+"-"+h;K.indexOf(v)<0&&(d=!0),a===s&&m>0&&F[m-1][h].usedby!==f.i4&&(p=!0),a===s&&m<T&&F[m+1][h].usedby!==f.i4&&(p=!0),i===o&&h>0&&F[m][h-1].usedby!==f.i4&&(p=!0),i===o&&h<T&&F[m][h+1].usedby!==f.i4&&(p=!0)}}return!!(e||(a===s&&i>0&&F[a][i-1].usedby!==f.i4&&(d=!0),a===s&&o<T&&F[a][o+1].usedby!==f.i4&&(d=!0),i===o&&a>0&&F[a-1][i]!==f.i4&&(d=!0),i===o&&s<T&&F[s+1][i].usedby!==f.i4&&(d=!0),d||p))||(window.alert("New words must extend an existing word and/or hook existing words or tiles"),!1)}function Ie(){for(var e="",n=[],t="",r=T+1,s=-1,i=T+1,o=-1,c=K.length,l=0;l<c;++l){var u=parseInt(K[l].split("-")[0]),d=parseInt(K[l].split("-")[1]);u<r&&(r=u),u>s&&(s=u),d<i&&(i=d),d>o&&(o=d)}if(r<s||1===c){for(var p=i,m=r;m>0&&F[m-1][p].usedby!==f.i4;)m-=1;for(var h=s;h<T&&F[h+1][p].usedby!==f.i4;)h+=1;t=f.v8[p]+f.RH[m];for(var v=m;v<=h;++v){e+=F[v][p].letter;var y=v+"-"+p;if(K.indexOf(y)>-1){for(var b=p;b>0&&F[v][b-1].usedby!==f.i4;)b-=1;for(var x=p;x<T&&F[v][x+1].usedby!==f.i4;)x+=1;if(b<x){for(var g="",w=b;w<=x;++w)g+=F[v][w].letter;n=[].concat((0,a.Z)(n),[g])}}}}if(e.length<2){for(var N=r,j=i;j>0&&F[N][j-1].usedby!==f.i4;)j-=1;for(var k=o;k<T&&F[N][k+1].usedby!==f.i4;)k+=1;t=f.RH[N]+f.v8[j],e="",n=[];for(var S=j;S<=k;++S){e+=F[N][S].letter;var A=N+"-"+S;if(K.indexOf(A)>-1){for(var C=N;C>0&&F[C-1][S].usedby!==f.i4;)C-=1;for(var O=N;O<T&&F[O+1][S].usedby!==f.i4;)O+=1;if(C<O){for(var B="",E=C;E<=O;++E)B+=F[E][S].letter;n=[].concat((0,a.Z)(n),[B])}}}}return{mainword:e,extrawords:n,pos:t}}function Re(){me||(he(!0),N.send({gameid:x,type:"pb",func:"allowundo",sender:t}))}function Me(){N.send({gameid:x,type:"pb",func:"undoturn"})}var He=function(){Q(JSON.parse(JSON.stringify(ce.squareArray))),H((0,a.Z)(ce.ptiles)),D((0,a.Z)(ce.gtiles)),U(-1),z([]),re([-1,-1,f.QY])},Pe=function(){N.send({gameid:x,type:"pb",sender:t,func:"requestgamedata",syncstamp:A})},qe=function(){console.log("Send requestsyncdata ".concat(A)),N.send({gameid:x,type:"pb",sender:t,func:"requestsyncdata"})};return(0,r.jsxs)("div",{className:"prisonbreak",children:[(0,r.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,r.jsx)("div",{className:"w3-display-middle",children:(0,r.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,r.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",x]}),(0,r.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",t===f.ap?g:ye]}),(0,r.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,r.jsx)(i.default,{href:"../../",children:(0,r.jsx)("a",{children:(0,r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})}),(0,r.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",t===f.ap?ye:g]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,r.jsx)(l.default,{tiles:Z,othertiles:t===f.ap?q:M}),(0,r.jsx)(u.default,{moves:se})]}),(0,r.jsx)("div",{className:"col pbPlayerOuterSection",children:t===f.ap?(0,r.jsx)(o.default,{racktiles:M,whoseturn:G,selection:W,onClick:function(e){return Te(e)},onClickFinishTurn:function(){return Be()},onClickTileRecall:function(){return He()},onClickTileExchange:function(){return function(){if(Z.length<k)window.alert("Need "+k+" tiles in the bag to exchange");else{for(var e=[],n=(0,a.Z)(Z);e.length<k&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort(),(n=[].concat((0,a.Z)(n),(0,a.Z)(ce.ptiles))).sort();var s={by:f.ap,type:f.Ix},i=[].concat((0,a.Z)(se),[s]),o=Date.now();Ce(),C(o),Q(JSON.parse(JSON.stringify(ce.squareArray))),Y(f.Ov),H(e),I(n),ie(i),le({squareArray:JSON.parse(JSON.stringify(ce.squareArray)),ptiles:[].concat(e),gtiles:(0,a.Z)(q)}),N.send({gameid:x,type:"pb",func:"ept",timestamp:o,sender:t,whoseturn:f.Ov,ptiles:e,tiles:n,move:s})}}()},onClickPassPlay:function(){return function(){var e={by:f.ap,type:f.Am},n=[].concat((0,a.Z)(se),[e]),r=y(n)?f.Bd:f.Ov,s=Date.now();He(),Ce(),C(s),Y(r),ie(n),N.send({gameid:x,type:"pb",func:"ept",timestamp:s,sender:t,whoseturn:r,move:e})}()},onClickUndoLastPlay:function(){return Me()},onClickAllowUndo:function(){return Re()},participant:t,moves:se,allowRewind:me}):(0,r.jsx)(o.default,{racktiles:q,whoseturn:G,selection:W,onClick:function(e){return Te(e)},onClickFinishTurn:function(){return Ee()},onClickTileRecall:function(){return He()},onClickTileExchange:function(){return function(){if(Z.length<k)window.alert("Need "+k+" tiles in the bag to exchange");else{for(var e=[],n=(0,a.Z)(Z);e.length<k&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort(),(n=[].concat((0,a.Z)(n),(0,a.Z)(ce.gtiles))).sort();var s={by:f.b6,type:f.Ix},i=[].concat((0,a.Z)(se),[s]),o=Date.now();Ce(),C(o),Q(JSON.parse(JSON.stringify(ce.squareArray))),Y(f.kX),D(e),I(n),ie(i),le({squareArray:JSON.parse(JSON.stringify(ce.squareArray)),ptiles:(0,a.Z)(M),gtiles:[].concat(e)}),N.send({gameid:x,type:"pb",func:"egt",timestamp:o,sender:t,whoseturn:f.kX,gtiles:e,tiles:n,move:s})}}()},onClickPassPlay:function(){return function(){var e={by:f.b6,type:f.Am},n=[].concat((0,a.Z)(se),[e]),r=y(n)?f.Bd:f.kX,s=Date.now();He(),Ce(),C(s),Y(r),ie(n),N.send({gameid:x,type:"pb",func:"egt",timestamp:s,sender:t,whoseturn:r,move:e})}()},onClickUndoLastPlay:function(){return Me()},onClickAllowUndo:function(){return Re()},participant:t,moves:se,allowRewind:me})}),(0,r.jsx)("div",{className:"col",children:t===G?(0,r.jsx)("div",{className:"row",onKeyDownCapture:function(e){if(e.preventDefault(),t===G)if("Enter"!==e.key)if("Escape"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var n=e.key.toUpperCase(),r=G===f.kX?M:q,s=r.indexOf(n);if(-1===s&&(s=r.indexOf("?")),s>-1){var i=te[0],o=te[1],c=te[2];if(i>-1&&o>-1&&c!==f.QY){var l=te;if(c===f.oW){for(var u=-1,d=o+1;d<T+1&&-1===u;d++)F[i][d].usedby===f.i4&&(u=d);return l=-1===u?[-1,-1,f.QY]:[i,u,f.oW],Oe(i,o,s,l),void U(-1)}if(c===f.ik){for(var p=-1,m=2*k+1,h=i+1;h<m&&-1===p;h++)F[h][o].usedby===f.i4&&(p=h);return l=-1===p?[-1,-1,f.QY]:[p,o,f.ik],Oe(i,o,s,l),void U(-1)}}}}else if("Backspace"===e.key&&K.length>0){var v=K[K.length-1],y=parseInt(v.split("-")[0]),b=parseInt(v.split("-")[1]),x=(0,a.Z)(K),g=(0,a.Z)(M),w=(0,a.Z)(q),N=JSON.parse(JSON.stringify(F)),j=N[y],S=j[b],A=[-1,-1,f.QY],C=W;x.splice(K.length-1,1);var O=F[y][b].letter;G===f.kX?(g.push(O),C=g.length-1):(w.push(O),C=w.length-1),S.usedby=f.i4,S.letter=f.GP,j[b]=S,N[y]=(0,a.Z)(j);var B=te[2];B!==f.QY&&(A=[y,b,B],1===K.length&&(C=-1)),z(x),D(w),H(g),Q(N),re(A),U(C)}}else He();else G===f.kX?Be():Ee()},children:(0,r.jsx)(c.default,{squareArray:F,rcd:te,onClick:function(e,n){return Oe(e,n,-1,null)}})}):(0,r.jsx)("div",{className:"row",children:(0,r.jsx)(c.default,{squareArray:F,rcd:te,onClick:function(){}})})}),(0,r.jsxs)("div",{className:"col",children:[(0,r.jsx)(d.default,{rescues:$}),(0,r.jsx)(p.default,{gameid:x,client:N,nickname:g,msgs:ge,setMsgs:we,participant:t})]})]}),(0,r.jsx)("div",{className:"w3-display-container w3-teal topBarHeight",children:(0,r.jsx)("div",{className:"w3-display-middle commonFontFamily",children:G===f.Bd?(0,r.jsx)("h1",{children:"Game Over!"}):(0,r.jsx)("p",{children:f._W[de]})})})]})}},9477:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(6595);n.default=function(e){var n=e.moves;return(0,r.jsxs)("div",{className:"pbMoves",children:[(0,r.jsx)("div",{className:"pbMovesTitle",children:"MOVES"}),(0,r.jsx)("div",{className:"pbMovesScrollable",id:"ScrollableMoves",children:n&&n.map((function(e,n){var t;return(0,r.jsxs)("div",{className:"pbMove",children:[(0,r.jsx)("span",{className:"pbMove by",children:e.by}),":",(0,r.jsx)("span",{className:"pbMove ".concat(e.type),children:e.type===a.bS?(0,r.jsxs)(r.Fragment,{children:[e.pos," ",e.mainword.replace("Q","Qu"),null===(t=e.extrawords)||void 0===t?void 0:t.map((function(e,n){return(0,r.jsxs)("span",{children:[",\xa0",e.replace("Q","Qu")]},"extraword".concat(n))}))]}):(0,r.jsx)(r.Fragment,{})})]},"move".concat(n))}))})]})}},8451:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(6595),s=function(e){var n="pbTileOnRack "+(e.selection===e.tileindex?"Selected ":"Unselected ")+("Q"===e.tilevalue?"u ":"")+e.participant,t=e.tileindex;return(0,r.jsx)("div",{className:n,onClick:function(n){return e.onClick(n)},children:(0,r.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},t)},i=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"check"}),"\xa0Finish Turn"]})})},o=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"undo"}),"\xa0Recall Tiles"]})})},c=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"cached"}),"\xa0Swap Tiles"]})})},l=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"not_interested"}),"\xa0Pass Turn"]})})},u=function(e){return e.alreadyAllowed?(0,r.jsx)("div",{className:"pbActionButtonSevere",children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report"}),"\xa0ENABLED",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"\xa0Allow undo is now enabled"})]})}):(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report_problem"}),"\xa0Allow Undo Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Click to let opponent undo"})]})})},d=function(e){return(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"delete_forever"}),"\xa0Undo My Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Opponent has allowed undo"})]})})};function p(e){return(0,r.jsxs)("div",{className:"pbActionButtonDiv",children:[(0,r.jsx)("p",{children:(0,r.jsx)(i,{onClick:function(){return e.onClickFinishTurn()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(o,{onClick:function(){return e.onClickTileRecall()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(c,{onClick:function(){return e.onClickTileExchange()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(l,{onClick:function(){return e.onClickPassPlay()}})})]})}function f(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("div",{children:(0,r.jsx)(u,{onClick:function(){return e.onClickAllowUndo()},alreadyAllowed:e.allowRewind})})})}function m(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("p",{children:(0,r.jsx)(d,{onClick:function(){return e.onClickUndoLastPlay()}})})})}n.default=function(e){var n=e.participant===a.ap?a._k:a.g9,t=e.participant===a.ap?a.Ji:a.jN;return(0,r.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,r.jsxs)("div",{className:"pbPlayerTitle",children:[(0,r.jsx)("i",{className:"material-icons",children:n}),"\xa0",t,"\xa0",(0,r.jsx)("i",{className:"material-icons",children:n})]}),(0,r.jsx)("div",{className:"pbTilerack",children:e.racktiles&&e.racktiles.map((function(n,t){return(0,r.jsx)(s,{whoseturn:e.whoseturn,participant:e.participant,selection:e.selection,tileindex:t,tilevalue:n,onClick:function(){return e.onClick(t)}},"RackTile".concat(t))}))}),e.whoseturn===e.participant?p(e):e.allowRewind&&e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by===e.participant&&m(e),e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by!==e.participant&&f(e)]})}},798:function(e,n,t){"use strict";t.r(n);var r=t(5893);n.default=function(e){var n=e.rescues;return(0,r.jsxs)("div",{className:"pbRescuesMade",children:["Rescues made: ",n]})}},4620:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(6595);n.default=function(e){var n=e.usedby,t=e.type,s=e.letter,i=e.ri,o=e.ci,c=e.rcd,l=e.onClick,u=n!==a.i4?"pbSquareInner PlayerTile":c[0]===i&&c[1]===o&&c[2]===a.oW?"pbSquareInner RightArrow":c[0]===i&&c[1]===o&&c[2]===a.ik?"pbSquareInner DownArrow":"pbSquareInner "+t,d=n!==a.i4?s:u.indexOf("RightArrow")>-1?"\u27a1":u.indexOf("DownArrow")>-1?"\u2b07":u.indexOf("CenterSquare")>-1?(0,r.jsx)("i",{className:"material-icons",children:"stars"}):u.indexOf("EscapeHatch")>-1?(0,r.jsx)("i",{className:"material-icons",children:a._k}):".";return n===a.i4?(0,r.jsx)("button",{className:u,onClick:l,children:d}):(0,r.jsx)("button",{className:u,onClick:l,children:(0,r.jsx)("div",{className:"pbSquareTileText ".concat(n+("Q"===s?" u":"")),children:d})})}},8520:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(1385);n.default=function(e){var n=e.tiles,t=e.othertiles,s=[].concat((0,a.Z)(n||[]),(0,a.Z)(t||[]));return s.sort(),"?"===s[0]&&(s.splice(0,1),s.push("?")),"?"===s[0]&&(s.splice(0,1),s.push("?")),(0,r.jsxs)("div",{className:"pbTilepool",children:[(0,r.jsx)("div",{className:"pbTilepoolTitle",children:"TILES"}),s.map((function(e,n){return(0,r.jsxs)("span",{children:[n>0&&e!==s[n-1]?(0,r.jsx)("span",{className:"pbTilepoolDivider"}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("span",{className:"Q"===e?"pbTilepoolTile u":"pbTilepoolTile",children:e})]},"tile".concat(n))}))]})}}}]);