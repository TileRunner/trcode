(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{4339:function(e,t,n){"use strict";n.d(t,{j6:function(){return s},dK:function(){return r},oZ:function(){return i},e:function(){return a},hA:function(){return c},$B:function(){return o}});var s="fyb",r="U",i="P",a="GAME_DATA",c="GAME_LIST",o=2e4},8337:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(7294),i=n(4339);t.default=function(e){var t=e.client,n=e.thisisme,a=e.nickname,c=e.gameid,o=e.setGameid,l=(0,r.useState)(2),u=l[0],d=l[1],m=(0,r.useState)(11),h=m[0],f=m[1];return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"trSubtitle",children:"Create Game"}),(0,s.jsx)("table",{className:"trTable",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"Game ID:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",name:"gameid",value:c,onChange:function(e){o(e.target.value)}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"# Players:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",name:"numPlayers",value:u,onChange:function(e){d(e.target.value)}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"Pts to win:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",name:"goal",value:h,onChange:function(e){f(e.target.value)}})})]})]})}),c&&u>1&&u<7&&h>2&&h<22&&(0,s.jsx)("button",{className:"trButton",id:"requestCreateGame",type:"submit",onClick:function(){var e=c.trim();o(e),function(e,t,n,s,r,a){e.send({type:i.j6,func:"create",thisisme:t,gameid:n,numPlayers:s,goal:r,nickname:a,timestamp:Date.now()})}(t,n,c,u,h,a)},children:"SUBMIT"}),!c&&(0,s.jsx)("div",{className:"trWarning",children:"Game ID is required"}),!(u>1&&u<7)&&(0,s.jsx)("div",{className:"trWarning",children:"# Players is 2-6"}),!(h>2&&h<22)&&(0,s.jsx)("div",{className:"trWarning",children:"Pts to win is 3-21"})]})}},4891:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(7294),i=n(5518),a=n(5354),c=n(1863),o=n(4339),l=n(5877);t.default=function(e){var t=e.setWhereto,n=(0,r.useState)((0,l.v4)())[0],u=(0,r.useState)(o.dK),d=u[0],m=u[1],h=(0,r.useState)(""),f=h[0],v=h[1],g=(0,r.useState)(""),p=g[0],j=g[1],x=(0,r.useState)(""),y=x[0],k=x[1],N="wss://tilerunner.herokuapp.com/?clientType=fyb&thisisme="+n,b=(0,r.useState)(new i.Z(N,(function(e){v(e.data)}),o.j6,n))[0];return(0,r.useEffect)((function(){return b.connect()}),[]),(0,s.jsxs)(s.Fragment,{children:[d===o.dK&&(0,s.jsx)(a.default,{setWhereto:t,client:b,thisisme:n,setParticipant:m,wsmessage:f,nickname:p,setNickname:j,gameid:y,setGameid:k}),d===o.oZ&&(0,s.jsx)(c.default,{setWhereto:t,client:b,thisisme:n,wsmessage:f,nickname:p,gameid:y})]})}},1863:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(1385),i=n(7294),a=n(9359),c=n(4339),o=n(2374),l=n(7666),u=n(3939);function d(e,t){return t.map((function(t){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[t.nickname,(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsx)("td",{children:t.pass?(0,s.jsx)("span",{className:"trDanger",children:" passed"}):(0,s.jsxs)("span",{className:"".concat(t.valid?"":"trDanger"," ").concat(t.word.length>10&&t.earned||t.word.length>13?"long":""),children:[t.word,t.earned&&(0,s.jsxs)("span",{children:[" (",t.earned," pts)"]})]})})]},"".concat(e).concat(t.nickname))}))}function m(e,t,n,r,i,a,o,l){return(0,s.jsxs)("div",{onKeyDownCapture:e,children:[(0,s.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,s.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:t,onChange:function(e){n(e.target.value)}}),(0,s.jsxs)("div",{children:[t.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,s.jsx)("button",{className:"trButton",onClick:function(){h(t,r,i,a,o,l,n)},children:"SUBMIT"},"submitWord"),(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,t,n,s,r,i){e("Sending PASS ... shouldn't take long."),t.send({type:c.j6,func:"move",pass:!0,valid:!1,thisisme:n,gameid:s,nickname:r,timestamp:Date.now(),word:""}),i("")}(i,a,o,r.gameid,l,n)},children:"PASS"},"passButton")]})]})}function h(e,t,n,s,r,i,a){for(var o=e.toUpperCase().trim(),l=0;l<t.movesThisRound.length;l++){var u=t.movesThisRound[l].word;if(u===o)return void n("You cannot reuse a previous word from this round (".concat(u,")."));if(u+"S"===o&&"S"!==u.substring(u.length-1)&&t.movesThisRound[l].valid)return void n("You cannot add S to a previous valid word (".concat(u,") from this round unless it ends with S."))}for(var d=0;d<t.fryLetters.length;d++){for(var m=0,h=0,f=0;f<t.fryLetters.length;f++)t.fryLetters[d]===t.fryLetters[f]&&(m+=1);for(var v=0;v<o.length;v++)t.fryLetters[d]===o[v]&&(h+=1);if(h<m)return void n("You need the letter ".concat(t.fryLetters[d]," at least ").concat(m," time").concat(1===m?".":"s."))}n("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),s.send({type:c.j6,func:"move",pass:!1,thisisme:r,gameid:t.gameid,nickname:i,timestamp:Date.now(),clientRound:t.round,clientMovesLength:t.movesThisRound.length,word:o}),a("")}t.default=function(e){var t=e.setWhereto,n=e.client,f=e.thisisme,v=e.wsmessage,g=e.nickname,p=e.gameid,j=(0,i.useState)([]),x=j[0],y=j[1],k=(0,i.useState)(""),N=k[0],b=k[1],S=(0,i.useState)(""),w=S[0],T=S[1],C=(0,i.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:-1,fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),P=C[0],L=C[1],R=(0,i.useState)(""),A=R[0],B=R[1],E=(0,i.useState)(""),M=E[0],D=E[1],I=(0,i.useState)(-1),O=I[0],Z=I[1],G=(0,o.D)(P);(0,i.useEffect)((function(){(0,u.O)("ScrollableChat")}),[x]),(0,i.useEffect)((function(){var e=setInterval((function(){P.whoseturn>-1&&P.players.length>0&&n.send({type:c.j6,func:"interval",syncstamp:M,thisisme:f,nickname:g,gameid:P.gameid})}),c.$B);return function(){return clearInterval(e)}})),(0,i.useEffect)((function(){""!==v&&function(e){var t=JSON.parse(e);if(t.type===c.j6)if("chat"===t.func){var s=[].concat((0,r.Z)(x),[{from:t.nickname,msg:t.sendmsg}]);y(s)}else t.func===c.e?t.game.gameindex===P.gameindex&&t.game.round===P.round&&t.goal===P.goal&&t.players.length===P.players.length&&t.game.movesThisRound.length===P.movesThisRound.length||(b(t.snat),Z(-1),L(t.game),D(t.game.syncstamp),T("")):t.func===c.S2C_FUNC_GAMECREATED||n.send({type:c.j6,func:"rejoin",thisisme:f,gameid:P.gameid,nickname:g,timestamp:Date.now()})}(v)}),[v]),(0,i.useEffect)((function(){if(G&&P.gameindex===G.gameindex&&P.round===G.round&&P.freeforall&&!G.freeforall){var e=document.createElement("audio");e.src=P.movesThisRound[P.movesThisRound.length-1].pass?"https://tilerunner.github.io/Pass.m4a":"https://tilerunner.github.io/Oops.m4a",e.play()}}),[P]);var W=function(){if(P.whoseturn<0)return!1;if(P.freeforall){if(P.excludedPlayer===g)return!1;for(var e=0;e<P.freeforallMoves.length;e++)if(P.freeforallMoves[e].nickname===g)return!1;return!0}return g===P.players[P.whoseturn].nickname},J=(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trSubtitle",children:[p,", ",g]}),(0,s.jsx)("table",{className:"trTable",children:(0,s.jsxs)("tbody",{children:[(0,s.jsx)("tr",{children:(0,s.jsxs)("th",{colSpan:"2",children:["First to ",P.goal," wins!"]})}),P.players.map((function(e){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[e.nickname,e.wins>0&&(0,s.jsxs)("span",{children:[" (",e.wins,")"]}),(0,s.jsx)("span",{className:"floatright",children:":"})]}),(0,s.jsxs)("td",{children:[e.points<10?(0,s.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=P.goal&&(0,s.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player".concat(e.index))})),P.movesPrevRound&&P.movesPrevRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Previous round:"})}),P.movesPrevRound&&P.movesPrevRound.length>0&&d("movesPrevRound",P.movesPrevRound),P.movesThisRound&&P.movesThisRound.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"This round:"})}),P.movesThisRound&&P.movesThisRound.length>0&&d("movesThisRound",P.movesThisRound),!P.freeforall&&P.freeforallMoves&&P.freeforallMoves.length>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!P.freeforall&&P.freeforallMoves&&P.freeforallMoves.length>0&&d("ffaMoves",P.freeforallMoves)]})}),P.whoseturn>-1&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=P.fryLetters.length,t=(0,r.Z)(P.fryLetters),n=[];n.length<e;){var s=Math.floor(Math.random()*t.length);n.push(t[s]),t.splice(s,1)}var i=JSON.parse(JSON.stringify(P));i.fryLetters=[].concat(n),L(i)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,s.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=(0,r.Z)(P.fryLetters);e.sort();var t=JSON.parse(JSON.stringify(P));t.fryLetters=(0,r.Z)(e),L(t)},children:(0,s.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,s.jsx)("div",{className:"fryLetterDiv",children:P.fryLetters.map((function(e,t){return(0,s.jsx)("span",{className:t===O?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=P.fryLetters[t],n=(0,r.Z)(P.fryLetters);n.splice(t,1),n.push(e);var s=JSON.parse(JSON.stringify(P));s.fryLetters=(0,r.Z)(n),L(s),Z(-1)},onClick:function(){if(-1===O)Z(t);else if(t===O)Z(-1);else{for(var e=[],n=P.fryLetters[O],s=0;s<P.fryLetters.length;s++){var r=P.fryLetters[s];s===t&&e.push(n),s!==O&&e.push(r)}var i=JSON.parse(JSON.stringify(P));i.fryLetters=[].concat(e),L(i),Z(-1)}},children:e},"FryLetter".concat(t))}))}),(0,s.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",P.numPossibleAnswers,")"]})]}),W()&&m((function(e){if(W())return"Enter"===e.key?(e.preventDefault(),void h(A,P,T,n,f,g,B)):void 0}),A,B,P,T,n,f,g),(0,s.jsxs)("div",{children:[P.gameOver&&(0,s.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",(0,s.jsx)("button",{className:"trButton",onClick:function(){!function(e,t,n,s){e.send({type:c.j6,func:"replay",thisisme:t,game:n,nickname:s,timestamp:Date.now()})}(n,f,P,g)},children:"PLAY AGAIN"})]}),(0,s.jsx)("div",{className:"trParagraph",children:N}),w&&(0,s.jsx)("div",{className:"trParagraph trWarning",children:w})]})]});return(0,s.jsxs)("div",{className:"trBackground",children:[(0,s.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,s.jsx)("button",{className:"trButton",onClick:function(){t("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,s.jsx)(a.A_,{children:J}),(0,s.jsx)(a.I3,{children:(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6",children:J}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(l.default,{gameid:p,client:n,nickname:g,msgs:x,setMsgs:y})})]})})})]})}},5354:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(7294),i=n(4339),a=n(8337);function c(e,t,n,r){return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"trParagraph",children:"Game List:"}),(0,s.jsxs)("table",{className:"trTable",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Ppl"}),(0,s.jsx)("th",{children:"Pts"}),(0,s.jsx)("th",{children:"By"}),(0,s.jsx)("th",{children:"State"})]})}),(0,s.jsx)("tbody",{children:e.map((function(e,a){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.gameid}),(0,s.jsxs)("td",{children:[e.players.length,"/",e.numPlayers]}),(0,s.jsx)("td",{children:e.goal}),(0,s.jsx)("td",{children:e.players[0].nickname}),(0,s.jsx)("td",{children:u(e.players,r)?(0,s.jsx)("button",{className:"trButton",type:"submit",onClick:function(){!function(e,t,n,s){e.send({type:i.j6,func:"rejoin",thisisme:t,gameid:n,nickname:s,timestamp:Date.now()})}(t,n,e.gameid,r)},children:"REJOIN"},"rejoinButton".concat(a)):e.players.length<e.numPlayers?(0,s.jsx)("button",{className:"trButton",type:"submit",onClick:function(){!function(e,t,n,s){e.send({type:i.j6,func:"join",thisisme:t,gameid:n,nickname:s,timestamp:Date.now()})}(t,n,e.gameid,r)},children:"JOIN"},"joinButton".concat(a)):"In progress"})]})}))})]})]})}function o(e,t,n){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"trParagraph",children:[(0,s.jsx)("label",{children:"Nickname:"}),(0,s.jsx)("input",{type:"text",name:"nickname",value:e,onChange:function(e){t(e.target.value)}})]}),e&&(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"trButton",type:"submit",onClick:function(){var s=e.trim();t(s),n(!0)},children:"SUBMIT"})})]})}function l(e){return(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"trButton",type:"submit",id:"chooseCreateGame",onClick:function(){e("C")},children:"CREATE A GAME"})})}function u(e,t){for(var n=!1,s=0;s<e.length;s++)e[s].nickname===t&&(n=!0);return n}t.default=function(e){var t=e.setWhereto,n=e.client,u=e.thisisme,d=e.setParticipant,m=e.wsmessage,h=e.nickname,f=e.setNickname,v=e.gameid,g=e.setGameid,p=(0,r.useState)("Welcome!"),j=p[0],x=p[1],y=(0,r.useState)([]),k=y[0],N=y[1],b=(0,r.useState)(!1),S=b[0],w=b[1],T=(0,r.useState)(""),C=T[0],P=T[1];return(0,r.useEffect)((function(){""!==m&&function(e){var t=JSON.parse(e);t.type===i.j6&&(t.func===i.hA?N(t.gamelist):t.func===i.e?t.thisisme===u?(g(t.game.gameid),x(t.snat),d(i.oZ)):x("Why am I getting game data from ".concat(t.nickname," for game ").concat(t.gameid,"?")):"gameidtaken"===t.func?x("That game ID is already taken"):"gameidunknown"===t.func?x("That game ID is not being used"):"gamefull"===t.func?x("That game is full"):"notinthatgame"===t.func?x("You are not in that game"):"otherclientfound"===t.func?x("That nickname is already in that game"):x("Unhandled message: ".concat(e)))}(m)}),[m]),(0,s.jsxs)("div",{className:"trBackground",id:"fybLobby",children:[(0,s.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,s.jsx)("button",{className:"trButton",onClick:function(){t("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,s.jsx)("div",{className:"trParagraph",children:(0,s.jsx)("label",{children:j})}),!S&&o(h,f,w),S&&k&&k.length>0&&c(k,n,u,h),S&&!C&&l(P),S&&"C"===C&&(0,s.jsx)(a.default,{client:n,thisisme:u,nickname:h,gameid:v,setGameid:g}),(0,s.jsx)("div",{className:"fivepxdivider",children:"\xa0"})]})}},5518:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(4047),r=n(2700),i=function(){function e(t,n){(0,s.Z)(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return(0,r.Z)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),a=function(){function e(t,n,r,a){var c=this;(0,s.Z)(this,e),this.customSocket=null,this.socketUrl=t,this.clientType=r,this.thisisme=a,this.reconnectTimer=new i((function(){c.disconnect(),c.connect()}),this.reconnectAfterMs),this.messageFunction=n}return(0,r.Z)(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(t){e.send({type:e.clientType,func:"announce",thisisme:e.thisisme})},this.customSocket.onclose=function(t){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){e.thisisme=this.thisisme,e.clientType=this.clientType;var t=JSON.stringify(e);this.customSocket.send(t)}}]),e}()},4047:function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return s}})},2700:function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,{Z:function(){return r}})},5877:function(e,t,n){var s=n(3570),r=n(1171),i=r;i.v1=s,i.v4=r,e.exports=i},5327:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var s=n||0,r=t;return[r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]]].join("")}},5217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},3570:function(e,t,n){var s,r,i=n(5217),a=n(5327),c=0,o=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||s,m=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==m){var h=i();null==d&&(d=s=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==m&&(m=r=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:o+1,g=f-c+(v-o)/1e4;if(g<0&&void 0===e.clockseq&&(m=m+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,o=v,r=m;var p=(1e4*(268435455&(f+=122192928e5))+v)%4294967296;u[l++]=p>>>24&255,u[l++]=p>>>16&255,u[l++]=p>>>8&255,u[l++]=255&p;var j=f/4294967296*1e4&268435455;u[l++]=j>>>8&255,u[l++]=255&j,u[l++]=j>>>24&15|16,u[l++]=j>>>16&255,u[l++]=m>>>8|128,u[l++]=255&m;for(var x=0;x<6;++x)u[l+x]=d[x];return t||a(u)}},1171:function(e,t,n){var s=n(5217),r=n(5327);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||r(a)}}}]);