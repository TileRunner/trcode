(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return r},dK:function(){return s},oZ:function(){return a},e:function(){return i},hA:function(){return o},iS:function(){return c},$B:function(){return l}});var r="fyb",s="U",a="P",i="GAME_DATA",o="GAME_LIST",c="CHAT_DATA",l=2e4},2792:function(e,n,t){"use strict";t.d(n,{CU:function(){return c},G0:function(){return l},eo:function(){return u},cO:function(){return d},_r:function(){return f}});var r=t(809),s=t.n(r),a=t(2447),i="https://tilerunner.herokuapp.com";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Array.from(e.trim().toLowerCase());n.sort();var t=n.join("");return t}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=0,r=Array.from(e.toLowerCase()),s=Array.from(n.toLowerCase());if(r.length===s.length)for(var a=0;a<r.length;a++){r[a];r[a]!==s[a]&&t++}else t=-1;return t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=o(e),r=o(n);return t===r}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.length!==n.length+1)return!1;for(var t=e.toLowerCase(),r=n.toLowerCase(),s=0;s<t.length;s++){var a=Array.from(t);if(a.splice(s,1),a.join("")===r)return!0}return!1}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)(s().mark((function e(n){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/ENABLE2K?exists=").concat(n.toLowerCase()),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.exists);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(s().mark((function e(n){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/ENABLE2K?letters=").concat(n.toLowerCase(),"&tm=true"),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.to);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1863:function(e,n,t){"use strict";t.r(n);var r=t(809),s=t.n(r),a=t(2447),i=t(5893),o=t(1385),c=t(7294),l=t(9359),u=t(4339),d=t(2374),h=t(1827),f=t(7666),m=t(3939),p=t(2792);function g(e,n){return n.map((function(n){return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[n.nickname,(0,i.jsx)("span",{className:"floatright",children:":"})]}),(0,i.jsx)("td",{children:n.pass?(0,i.jsx)("span",{className:"trDanger",children:" passed"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.I3,{children:(0,i.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"),children:[n.word,n.earned&&(0,i.jsxs)("span",{children:[" (",n.earned," pts)"]})]})}),(0,i.jsx)(l.A_,{children:(0,i.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,i.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]})})]},"".concat(e).concat(n.nickname))}))}function v(e,n,t,r,s,a,o,c){return(0,i.jsxs)("div",{onKeyDownCapture:e,children:[(0,i.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,i.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,i.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,i.jsx)("button",{className:"trButton",onClick:function(){x(n,r,s,a,o,c,t)},children:"SUBMIT"},"submitWord"),(0,i.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s,a){e("Sending PASS ... shouldn't take long."),n.send({type:u.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:r,nickname:s,timestamp:Date.now(),word:""}),a("")}(s,a,o,r.gameid,c,t)},children:"PASS"},"passButton")]})]})}function x(e,n,t,r,s,a,i){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(s().mark((function e(n,t,r,a,i,o,c){var l,d,h,f,m,g,v,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n.toUpperCase().trim(),d=0;case 2:if(!(d<t.movesThisRound.length)){e.next=13;break}if((h=t.movesThisRound[d].word)!==l){e.next=7;break}return r("You cannot reuse a previous word from this round (".concat(h,").")),e.abrupt("return");case 7:if(h+"S"!==l||"S"===h.substring(h.length-1)||!t.movesThisRound[d].valid){e.next=10;break}return r("You cannot add S to a previous valid word (".concat(h,") from this round unless it ends with S.")),e.abrupt("return");case 10:d++,e.next=2;break;case 13:f=0;case 14:if(!(f<t.fryLetters.length)){e.next=25;break}for(m=0,g=0,v=0;v<t.fryLetters.length;v++)t.fryLetters[f]===t.fryLetters[v]&&(m+=1);for(x=0;x<l.length;x++)t.fryLetters[f]===l[x]&&(g+=1);if(!(g<m)){e.next=22;break}return r("You need the letter ".concat(t.fryLetters[f]," at least ").concat(m," time").concat(1===m?".":"s.")),e.abrupt("return");case 22:f++,e.next=14;break;case 25:if(!t.validOnly){e.next=32;break}return e.next=28,(0,p.cO)(l);case 28:if(e.sent){e.next=32;break}return alert("Sorry, ".concat(l," is not in my word list. You can try again.")),e.abrupt("return");case 32:r("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),a.send({type:u.j6,func:"move",pass:!1,thisisme:i,gameid:t.gameid,nickname:o,timestamp:Date.now(),clientRound:t.round,clientMovesLength:t.movesThisRound.length,word:l}),c("");case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e){var n=e.setWhereto,t=e.client,r=e.thisisme,s=e.wsmessage,a=e.nickname,p=e.gameid,j=(0,c.useState)(!0),y=j[0],N=j[1],k=(0,c.useState)([]),w=k[0],S=k[1],b=(0,c.useState)(""),L=b[0],C=b[1],A=(0,c.useState)(""),T=A[0],B=A[1],R=(0,c.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:[],fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),P=R[0],O=R[1],D=(0,c.useState)(""),E=D[0],M=D[1],I=(0,c.useState)(""),_=I[0],F=I[1],Z=(0,c.useState)(-1),J=Z[0],Y=Z[1],U=(0,d.D)(P);(0,c.useEffect)((function(){(0,m.O)("ScrollableChat")}),[w]),(0,c.useEffect)((function(){var e=setInterval((function(){P.whoseturn.length>0&&P.players.length>0&&t.send({type:u.j6,func:"interval",syncstamp:_,thisisme:r,nickname:a,gameid:P.gameid})}),u.$B);return function(){return clearInterval(e)}})),(0,c.useEffect)((function(){""!==s&&function(e){var n=JSON.parse(e);if(n.type===u.j6)if(n.func===u.iS){var s=n.msgs.filter((function(e){for(var n=0;n<P.players.length;n++){if(P.players[n].nickname===e.from)return!0}return!1}));S(s)}else n.func===u.e?n.game.gameindex===P.gameindex&&n.game.round===P.round&&n.goal===P.goal&&n.players.length===P.players.length&&n.game.movesThisRound.length===P.movesThisRound.length||(C(n.snat),Y(-1),O(n.game),F(n.game.syncstamp),B("")):t.send({type:u.j6,func:"rejoin",thisisme:r,gameid:P.gameid,nickname:a,timestamp:Date.now()})}(s)}),[s]),(0,c.useEffect)((function(){var e;if(y&&(U&&P.gameindex===U.gameindex&&P.round===U.round&&(P.freeforall&&!U.freeforall?e=P.movesThisRound[P.movesThisRound.length-1].pass?"Pass":"Oops":U.players.filter((function(e){return e.dropped})).length<P.players.filter((function(e){return e.dropped})).length?e="ByeBye":U.whoseturn.indexOf(a)<0&&P.whoseturn.indexOf(a)>-1&&(e="YourTurn"),e))){var n=document.createElement("audio");n.src="https://tilerunner.github.io/".concat(e,".m4a"),n.play()}}),[P]);var W=function(){return P.whoseturn.indexOf(a)>-1},G=function(){return P.players.filter((function(e){return e.nickname===a&&e.dropped})).length>0},K=(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"trSubtitle",children:[p,": ",a]}),(0,i.jsx)("table",{className:"trTable",children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)("tr",{children:(0,i.jsxs)("th",{colSpan:"2",children:["First to ",P.goal," wins!"]})}),P.players.map((function(e,n){return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsxs)(l.I3,{children:[e.dropped&&(0,i.jsx)("span",{className:"trDanger"}),e.nickname,e.wins>0&&(0,i.jsxs)("span",{children:[" (Won ",e.wins,")"]}),(0,i.jsx)("span",{className:"floatright",children:":"})]}),(0,i.jsxs)(l.A_,{children:[e.nickname,e.wins>0&&(0,i.jsxs)("span",{children:[" (",e.wins,")"]}),(0,i.jsx)("span",{className:"floatright",children:":"})]})]}),(0,i.jsxs)("td",{children:[e.points<10?(0,i.jsx)("span",{children:"\xa0"}):"",e.points,"\xa0",e.points>=P.goal&&(0,i.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player.".concat(n,".").concat(e.nickname))})),P.movesPrevRound&&P.movesPrevRound.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:"2",children:"Previous round:"})}),P.movesPrevRound&&P.movesPrevRound.length>0&&g("movesPrevRound",P.movesPrevRound),P.movesThisRound&&P.movesThisRound.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:"2",children:"This round:"})}),P.movesThisRound&&P.movesThisRound.length>0&&g("movesThisRound",P.movesThisRound),!P.freeforall&&P.freeforallMoves&&P.freeforallMoves.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!P.freeforall&&P.freeforallMoves&&P.freeforallMoves.length>0&&g("ffaMoves",P.freeforallMoves)]})}),P.whoseturn.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,i.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=P.fryLetters.length,n=(0,o.Z)(P.fryLetters),t=[];t.length<e;){var r=Math.floor(Math.random()*n.length);t.push(n[r]),n.splice(r,1)}var s=JSON.parse(JSON.stringify(P));s.fryLetters=[].concat(t),O(s)},children:(0,i.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,i.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=(0,o.Z)(P.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(P));n.fryLetters=(0,o.Z)(e),O(n)},children:(0,i.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,i.jsx)("div",{className:"fryLetterDiv",children:P.fryLetters.map((function(e,n){return(0,i.jsx)("span",{className:n===J?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=P.fryLetters[n],t=(0,o.Z)(P.fryLetters);t.splice(n,1),t.push(e);var r=JSON.parse(JSON.stringify(P));r.fryLetters=(0,o.Z)(t),O(r),Y(-1)},onClick:function(){if(-1===J)Y(n);else if(n===J)Y(-1);else{for(var e=[],t=P.fryLetters[J],r=0;r<P.fryLetters.length;r++){var s=P.fryLetters[r];r===n&&e.push(t),r!==J&&e.push(s)}var a=JSON.parse(JSON.stringify(P));a.fryLetters=[].concat(e),O(a),Y(-1)}},children:e},"FryLetter".concat(n))}))}),(0,i.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",P.numPossibleAnswers,")"]})]}),W()&&v((function(e){if(W())return"Enter"===e.key?(e.preventDefault(),void x(E,P,B,t,r,a,M)):void 0}),E,M,P,B,t,r,a),(0,i.jsxs)("div",{children:[P.gameOver&&(0,i.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",!G()&&P.players.filter((function(e){return!e.dropped})).length>1&&(0,i.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r){e.send({type:u.j6,func:"replay",thisisme:n,game:t,gameid:t.gameid,nickname:r,timestamp:Date.now()})}(t,r,P,a)},children:"PLAY AGAIN"})]}),(0,i.jsx)("div",{className:"trParagraph",children:L}),T&&(0,i.jsx)("div",{className:"trParagraph trWarning",children:T})]}),!G()&&!P.gameOver&&(0,i.jsx)("div",{className:"trParagraph",children:(0,i.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s){e("Sending DROP ... shouldn't take long."),n.send({type:u.j6,func:"drop",thisisme:t,gameid:r,nickname:s,timestamp:Date.now()})}(B,t,r,P.gameid,a)},children:"QUIT"},"dropButton")})]});return(0,i.jsxs)("div",{className:"trBackground",children:[(0,i.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,i.jsx)("button",{className:"trButton",onClick:function(){n("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})}),(0,i.jsx)("button",{className:"trButton",onClick:function(){N(!y)},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Sounds on/off",children:y?"volume_mute":"volume_off"})})]}),(0,i.jsx)(l.A_,{children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-8",children:K}),(0,i.jsx)("div",{className:"col-4",children:(0,i.jsx)(h.default,{gameid:p,client:t,nickname:a,msgs:w,setMsgs:S})})]})})}),(0,i.jsx)(l.I3,{children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-6",children:K}),(0,i.jsx)("div",{className:"col-6",children:(0,i.jsx)(f.default,{gameid:p,client:t,nickname:a,msgs:w,setMsgs:S})})]})})})]})}},1827:function(e,n,t){"use strict";t.r(n);var r=t(5893),s=t(1385),a=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,i=e.client,o=e.nickname,c=e.msgs,l=void 0===c?[]:c,u=e.setMsgs,d=e.participant,h=void 0===d?"":d,f=(0,a.useState)(""),m=f[0],p=f[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"thinChat",children:(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"thinChatFrom",children:e.from})},"ChatMessageFrom".concat(n)),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"thinChatMsg",children:e.msg})},"ChatMessageMsg".concat(n))]})})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===o?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"thinChatInputEmpty":"thinChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){p(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=[].concat((0,s.Z)(l),[{from:o,msg:m}]),r=m;return u(n),p(""),void i.send({gameid:t,nickname:o,type:i.clientType,func:"chat",sender:h,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var a=m.slice(0,m.length-1);p(a)}},placeholder:"chat..."})})})]})})})}}}]);