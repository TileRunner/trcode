"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{4328:function(e,n,t){t.d(n,{j6:function(){return r},dK:function(){return s},oZ:function(){return a},e:function(){return i},hA:function(){return o},iS:function(){return c},$B:function(){return l}});var r="fyb",s="U",a="P",i="GAME_DATA",o="GAME_LIST",c="CHAT_DATA",l=2e4},3524:function(e,n,t){t.d(n,{CU:function(){return l},G0:function(){return u},eo:function(){return d},cO:function(){return f},_r:function(){return m}});var r=t(4051),s=t.n(r);function a(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var i=e.apply(n,t);function o(e){a(i,r,s,o,c,"next",e)}function c(e){a(i,r,s,o,c,"throw",e)}o(void 0)}))}}var o="https://tilerunner.herokuapp.com";function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Array.from(e.trim().toLowerCase());n.sort();var t=n.join("");return t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=0,r=Array.from(e.toLowerCase()),s=Array.from(n.toLowerCase());if(r.length===s.length)for(var a=0;a<r.length;a++){r[a];r[a]!==s[a]&&t++}else t=-1;return t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=c(e),r=c(n);return t===r}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.length!==n.length+1)return!1;for(var t=e.toLowerCase(),r=n.toLowerCase(),s=0;s<t.length;s++){var a=Array.from(t);if(a.splice(s,1),a.join("")===r)return!0}return!1}function f(e){return h.apply(this,arguments)}function h(){return(h=i(s().mark((function e(n){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/ENABLE2K?exists=").concat(n.toLowerCase()),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.exists);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=i(s().mark((function e(n){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/ENABLE2K?letters=").concat(n.toLowerCase(),"&tm=true"),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a.to);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8490:function(e,n,t){t.r(n);var r=t(4051),s=t.n(r),a=t(5893),i=t(7294),o=t(9359),c=t(4328),l=t(6298),u=t(6832),d=t(5079),f=t(3836),h=t(3524);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){p(a,r,s,i,o,"next",e)}function o(e){p(a,r,s,i,o,"throw",e)}i(void 0)}))}}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,n){return n.map((function(n){return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:[n.nickname,(0,a.jsx)("span",{className:"floatright",children:":"})]}),(0,a.jsx)("td",{children:n.pass?(0,a.jsx)("span",{className:"trDanger",children:" passed"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.I3,{children:(0,a.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"),children:[n.word,n.earned&&(0,a.jsxs)("span",{children:[" (",n.earned," pts)"]})]})}),(0,a.jsx)(o.A_,{children:(0,a.jsxs)("span",{className:"".concat(n.valid?"":"trDanger"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,a.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]})})]},"".concat(e).concat(n.nickname))}))}function x(e,n,t,r,s,i,o,l){return(0,a.jsxs)("div",{onKeyDownCapture:e,children:[(0,a.jsx)("div",{className:"trEmphasis",children:"Enter Word:"}),(0,a.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,a.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,a.jsx)("button",{className:"trButton",onClick:function(){j(n,r,s,i,o,l,t)},children:"SUBMIT"},"submitWord"),(0,a.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s,a){e("Sending PASS ... shouldn't take long."),n.send({type:c.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:r,nickname:s,timestamp:Date.now(),word:""}),a("")}(s,i,o,r.gameid,l,t)},children:"PASS"},"passButton")]})]})}function j(e,n,t,r,s,a,i){return w.apply(this,arguments)}function w(){return(w=v(s().mark((function e(n,t,r,a,i,o,l){var u,d,f,m,p,v,g,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.toUpperCase().trim(),d=0;case 2:if(!(d<t.movesThisRound.length)){e.next=13;break}if((f=t.movesThisRound[d].word)!==u){e.next=7;break}return r("You cannot reuse a previous word from this round (".concat(f,").")),e.abrupt("return");case 7:if(f+"S"!==u||"S"===f.substring(f.length-1)||!t.movesThisRound[d].valid){e.next=10;break}return r("You cannot add S to a previous valid word (".concat(f,") from this round unless it ends with S.")),e.abrupt("return");case 10:d++,e.next=2;break;case 13:m=0;case 14:if(!(m<t.fryLetters.length)){e.next=25;break}for(p=0,v=0,g=0;g<t.fryLetters.length;g++)t.fryLetters[m]===t.fryLetters[g]&&(p+=1);for(y=0;y<u.length;y++)t.fryLetters[m]===u[y]&&(v+=1);if(!(v<p)){e.next=22;break}return r("You need the letter ".concat(t.fryLetters[m]," at least ").concat(p," time").concat(1===p?".":"s.")),e.abrupt("return");case 22:m++,e.next=14;break;case 25:if(!t.validOnly){e.next=32;break}return e.next=28,(0,h.cO)(u);case 28:if(e.sent){e.next=32;break}return alert("Sorry, ".concat(u," is not in my word list. You can try again.")),e.abrupt("return");case 32:r("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),a.send({type:c.j6,func:"move",pass:!1,thisisme:i,gameid:t.gameid,nickname:o,timestamp:Date.now(),clientRound:t.round,clientMovesLength:t.movesThisRound.length,word:u}),l("");case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e){var n=e.setWhereto,t=e.client,r=e.thisisme,s=e.wsmessage,h=e.nickname,m=e.gameid,p=(0,i.useState)(!0),v=p[0],w=p[1],b=(0,i.useState)([]),N=b[0],k=b[1],S=(0,i.useState)(""),A=S[0],L=S[1],C=(0,i.useState)(""),T=C[0],P=C[1],O=(0,i.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:[],fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),B=O[0],R=O[1],E=(0,i.useState)(""),I=E[0],M=E[1],D=(0,i.useState)(""),_=D[0],F=D[1],J=(0,i.useState)(-1),U=J[0],Y=J[1],W=(0,l.D)(B);(0,i.useEffect)((function(){(0,f.O)("ScrollableChat")}),[N]),(0,i.useEffect)((function(){var e=setInterval((function(){B.whoseturn.length>0&&B.players.length>0&&t.send({type:c.j6,func:"interval",syncstamp:_,thisisme:r,nickname:h,gameid:B.gameid})}),c.$B);return function(){return clearInterval(e)}})),(0,i.useEffect)((function(){""!==s&&function(e){var n=JSON.parse(e);if(n.type===c.j6)if(n.func===c.iS){var s=n.msgs.filter((function(e){for(var n=0;n<B.players.length;n++)if(B.players[n].nickname===e.from)return!0;return!1}));k(s)}else n.func===c.e?n.game.gameindex===B.gameindex&&n.game.round===B.round&&n.goal===B.goal&&n.players.length===B.players.length&&n.game.movesThisRound.length===B.movesThisRound.length||(L(n.snat),Y(-1),R(n.game),F(n.game.syncstamp),P("")):t.send({type:c.j6,func:"rejoin",thisisme:r,gameid:B.gameid,nickname:h,timestamp:Date.now()})}(s)}),[s]),(0,i.useEffect)((function(){var e;if(v&&(W&&B.gameindex===W.gameindex&&B.round===W.round&&(B.freeforall&&!W.freeforall?e=B.movesThisRound[B.movesThisRound.length-1].pass?"Pass":"Oops":W.players.filter((function(e){return e.dropped})).length<B.players.filter((function(e){return e.dropped})).length?e="ByeBye":W.whoseturn.indexOf(h)<0&&B.whoseturn.indexOf(h)>-1&&(e="YourTurn"),e))){var n=document.createElement("audio");n.src="https://tilerunner.github.io/".concat(e,".m4a"),n.play()}}),[B]);var G=function(){return B.whoseturn.indexOf(h)>-1},K=function(){return B.players.filter((function(e){return e.nickname===h&&e.dropped})).length>0},$=(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"trSubtitle",children:[m,": ",h]}),(0,a.jsx)("table",{className:"trTable",children:(0,a.jsxs)("tbody",{children:[(0,a.jsx)("tr",{children:(0,a.jsxs)("th",{colSpan:"2",children:["First to ",B.goal," wins!"]})}),B.players.map((function(e,n){return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:[(0,a.jsxs)(o.I3,{children:[e.dropped&&(0,a.jsx)("span",{className:"trDanger"}),e.nickname,e.wins>0&&(0,a.jsxs)("span",{children:[" (Won ",e.wins,")"]}),(0,a.jsx)("span",{className:"floatright",children:":"})]}),(0,a.jsxs)(o.A_,{children:[e.nickname,e.wins>0&&(0,a.jsxs)("span",{children:[" (",e.wins,")"]}),(0,a.jsx)("span",{className:"floatright",children:":"})]})]}),(0,a.jsxs)("td",{children:[e.points<10?(0,a.jsx)("span",{children:"\xa0"}):"",e.points,"\xa0",e.points>=B.goal&&(0,a.jsx)("span",{className:"trEmphasis",children:" Winner!\xa0"})]})]},"Player.".concat(n,".").concat(e.nickname))})),B.movesPrevRound&&B.movesPrevRound.length>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("th",{colSpan:"2",children:"Previous round:"})}),B.movesPrevRound&&B.movesPrevRound.length>0&&y("movesPrevRound",B.movesPrevRound),B.movesThisRound&&B.movesThisRound.length>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("th",{colSpan:"2",children:"This round:"})}),B.movesThisRound&&B.movesThisRound.length>0&&y("movesThisRound",B.movesThisRound),!B.freeforall&&B.freeforallMoves&&B.freeforallMoves.length>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("th",{colSpan:"2",children:"Free-for-all:"})}),!B.freeforall&&B.freeforallMoves&&B.freeforallMoves.length>0&&y("ffaMoves",B.freeforallMoves)]})}),B.whoseturn.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"trParagraph",children:["Fry Letters:",(0,a.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){for(var e=B.fryLetters.length,n=g(B.fryLetters),t=[];t.length<e;){var r=Math.floor(Math.random()*n.length);t.push(n[r]),n.splice(r,1)}var s=JSON.parse(JSON.stringify(B));s.fryLetters=g(t),R(s)},children:(0,a.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"cached"})}),(0,a.jsx)("button",{className:"trButton fryLetterActionButton",onClick:function(){var e=g(B.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(B));n.fryLetters=g(e),R(n)},children:(0,a.jsx)("i",{className:"material-icons fryLetterActionButtonIcon",children:"sort_by_alpha"})})]}),(0,a.jsx)("div",{className:"fryLetterDiv",children:B.fryLetters.map((function(e,n){return(0,a.jsx)("span",{className:n===U?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=B.fryLetters[n],t=g(B.fryLetters);t.splice(n,1),t.push(e);var r=JSON.parse(JSON.stringify(B));r.fryLetters=g(t),R(r),Y(-1)},onClick:function(){if(-1===U)Y(n);else if(n===U)Y(-1);else{for(var e=[],t=B.fryLetters[U],r=0;r<B.fryLetters.length;r++){var s=B.fryLetters[r];r===n&&e.push(t),r!==U&&e.push(s)}var a=JSON.parse(JSON.stringify(B));a.fryLetters=g(e),R(a),Y(-1)}},children:e},"FryLetter".concat(n))}))}),(0,a.jsxs)("div",{className:"trParagraph",children:["(#Answers: ",B.numPossibleAnswers,")"]})]}),G()&&x((function(e){if(G())return"Enter"===e.key?(e.preventDefault(),void j(I,B,P,t,r,h,M)):void 0}),I,M,B,P,t,r,h),(0,a.jsxs)("div",{children:[B.gameOver&&(0,a.jsxs)("div",{className:"trParagraph",children:["Game Over\xa0",!K()&&B.players.filter((function(e){return!e.dropped})).length>1&&(0,a.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r){e.send({type:c.j6,func:"replay",thisisme:n,game:t,gameid:t.gameid,nickname:r,timestamp:Date.now()})}(t,r,B,h)},children:"PLAY AGAIN"})]}),(0,a.jsx)("div",{className:"trParagraph",children:A}),T&&(0,a.jsx)("div",{className:"trParagraph trWarning",children:T})]}),!K()&&!B.gameOver&&(0,a.jsx)("div",{className:"trParagraph",children:(0,a.jsx)("button",{className:"trButton",onClick:function(){!function(e,n,t,r,s){e("Sending DROP ... shouldn't take long."),n.send({type:c.j6,func:"drop",thisisme:t,gameid:r,nickname:s,timestamp:Date.now()})}(P,t,r,B.gameid,h)},children:"QUIT"},"dropButton")})]});return(0,a.jsxs)("div",{className:"trBackground",children:[(0,a.jsxs)("div",{className:"trTitle",children:["Fry Your Brain",(0,a.jsx)("button",{className:"trButton",onClick:function(){n("menu")},children:(0,a.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})}),(0,a.jsx)("button",{className:"trButton",onClick:function(){w(!v)},children:(0,a.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Sounds on/off",children:v?"volume_mute":"volume_off"})})]}),(0,a.jsx)(o.A_,{children:(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-8",children:$}),(0,a.jsx)("div",{className:"col-4",children:(0,a.jsx)(u.default,{gameid:m,client:t,nickname:h,msgs:N,setMsgs:k})})]})})}),(0,a.jsx)(o.I3,{children:(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-6",children:$}),(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(d.default,{gameid:m,client:t,nickname:h,msgs:N,setMsgs:k})})]})})})]})}},6832:function(e,n,t){t.r(n);var r=t(5893),s=t(7294);function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(e){var n=e.gameid,t=void 0===n?"":n,a=e.client,o=e.nickname,c=e.msgs,l=void 0===c?[]:c,u=e.setMsgs,d=e.participant,f=void 0===d?"":d,h=(0,s.useState)(""),m=h[0],p=h[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"thinChat",children:(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[l.map((function(e,n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"thinChatFrom",children:e.from})},"ChatMessageFrom".concat(n)),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"thinChatMsg",children:e.msg})},"ChatMessageMsg".concat(n))]})})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===o?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"thinChatInputEmpty":"thinChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){p(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=i(l).concat([{from:o,msg:m}]),r=m;return u(n),p(""),void a.send({gameid:t,nickname:o,type:a.clientType,func:"chat",sender:f,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var s=m.slice(0,m.length-1);p(s)}},placeholder:"chat..."})})})]})})})}}}]);