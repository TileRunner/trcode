(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return s},dK:function(){return i},oZ:function(){return r},e:function(){return a},hA:function(){return o},$B:function(){return c}});var s="fyb",i="U",r="P",a="GAME_DATA",o="GAME_LIST",c=2e4},8337:function(e,n,t){"use strict";t.r(n);var s=t(5893),i=t(7294),r=t(4339);n.default=function(e){var n=e.client,t=e.thisisme,a=e.nickname,o=e.gameid,c=e.setGameid,l=(0,i.useState)(2),u=l[0],d=l[1],m=(0,i.useState)(11),f=m[0],h=m[1];return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"fybHeaderDiv",children:(0,s.jsx)("span",{className:"h2",children:"Create Game"})}),(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"Game ID:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",name:"gameid",value:o,onChange:function(e){c(e.target.value)}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"# Players:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",name:"numPlayers",value:u,onChange:function(e){d(e.target.value)}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("label",{children:"Pts to win:"})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"number",name:"goal",value:f,onChange:function(e){h(e.target.value)}})})]})]})}),o&&u>1&&u<7&&f>2&&f<22&&(0,s.jsx)("button",{className:"fybLobbyButton",id:"requestCreateGame",type:"submit",onClick:function(){var e=o.trim();c(e),function(e,n,t,s,i,a){e.send({type:r.j6,func:"create",thisisme:n,gameid:t,numPlayers:s,goal:i,nickname:a,timestamp:Date.now()})}(n,t,o,u,f,a)},children:"SUBMIT"}),(0,s.jsxs)("div",{className:"fybInputWarning",children:[!o&&(0,s.jsx)("p",{children:"Game ID is required"}),!(u>1&&u<7)&&(0,s.jsx)("p",{children:"# Players is 2-6"}),!(f>2&&f<22)&&(0,s.jsx)("p",{children:"Pts to win is 3-21"})]})]})}},4891:function(e,n,t){"use strict";t.r(n);var s=t(5893),i=t(7294),r=t(5518),a=t(5354),o=t(1863),c=t(4339),l=t(5877);n.default=function(e){var n=e.ismobile,t=e.setWhereto,u=(0,i.useState)((0,l.v4)())[0],d=(0,i.useState)(c.dK),m=d[0],f=d[1],h=(0,i.useState)(""),v=h[0],y=h[1],p=(0,i.useState)(""),g=p[0],j=p[1],x=(0,i.useState)(""),b=x[0],k=x[1],S="wss://tilerunner.herokuapp.com/?clientType=fyb&thisisme="+u,N=(0,i.useState)(new r.Z(S,(function(e){y(e.data)}),c.j6,u))[0];return(0,i.useEffect)((function(){return N.connect()}),[]),(0,s.jsxs)(s.Fragment,{children:[m===c.dK&&(0,s.jsx)(a.default,{ismobile:n,setWhereto:t,client:N,thisisme:u,setParticipant:f,wsmessage:v,nickname:g,setNickname:j,gameid:b,setGameid:k}),m===c.oZ&&(0,s.jsx)(o.default,{ismobile:n,setWhereto:t,client:N,thisisme:u,wsmessage:v,nickname:g,gameid:b})]})}},1863:function(e,n,t){"use strict";t.r(n);var s=t(1385),i=t(5893),r=t(7294),a=t(4339),o=t(2374);function c(e,n){return n.map((function(n){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"fybGamePlayer",children:n.nickname}),(0,i.jsx)("td",{className:"fybGameWord",children:n.pass?(0,i.jsx)("span",{className:"fybGameWord pass",children:" passed"}):(0,i.jsxs)("span",{className:"fybGameWord ".concat(n.valid?"valid":"invalid"," ").concat(n.word.length>10&&n.earned||n.word.length>13?"long":""),children:[n.word,n.earned&&(0,i.jsxs)("span",{children:[" (",n.earned," pts)"]})]})})]},"".concat(e).concat(n.nickname))}))}function l(e,n,t,s,r,o,c,l){return(0,i.jsxs)("div",{onKeyDownCapture:e,children:[(0,i.jsx)("div",{className:"fybGameEnterWordLabel",children:"Enter Word:"}),(0,i.jsx)("input",{type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),(0,i.jsxs)("div",{children:[n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,i.jsx)("button",{className:"fybGameWordSubmitButton",onClick:function(){u(n,s,r,o,c,l,t)},children:"SUBMIT"},"submitWord"),(0,i.jsx)("button",{className:"fybGameWordPassButton",onClick:function(){!function(e,n,t,s,i,r){e("Sending PASS ... shouldn't take long."),n.send({type:a.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:s,nickname:i,timestamp:Date.now(),word:""}),r("")}(r,o,c,s.gameid,l,t)},children:"PASS"},"passButton")]})]})}function u(e,n,t,s,i,r,o){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var u=n.movesThisRound[l].word;if(u===c)return void t("You cannot reuse a previous word from this round (".concat(u,")."));if(u+"S"===c&&"S"!==u.substring(u.length-1)&&n.movesThisRound[l].valid)return void t("You cannot add S to a previous valid word (".concat(u,") from this round unless it ends with S."))}for(var d=0;d<n.fryLetters.length;d++){for(var m=0,f=0,h=0;h<n.fryLetters.length;h++)n.fryLetters[d]===n.fryLetters[h]&&(m+=1);for(var v=0;v<c.length;v++)n.fryLetters[d]===c[v]&&(f+=1);if(f<m)return void t("You need the letter ".concat(n.fryLetters[d]," at least ").concat(m," time").concat(1===m?".":"s."))}t("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),s.send({type:a.j6,func:"move",pass:!1,thisisme:i,gameid:n.gameid,nickname:r,timestamp:Date.now(),clientRound:n.round,clientMovesLength:n.movesThisRound.length,word:c}),o("")}n.default=function(e){var n=e.ismobile,t=e.setWhereto,d=e.client,m=e.thisisme,f=e.wsmessage,h=e.nickname,v=e.gameid,y=(0,r.useState)(""),p=y[0],g=y[1],j=(0,r.useState)({goal:99,gameindex:0,round:0,freeforall:!1,movesThisRound:[],movesPrevRound:[],whoseturn:-1,fryLetters:[],players:[{index:0,nickname:"Loading...",wins:0}]}),x=j[0],b=j[1],k=(0,r.useState)(""),S=k[0],N=k[1],w=(0,r.useState)(""),C=w[0],T=w[1],G=(0,r.useState)(-1),L=G[0],P=G[1],R=(0,o.D)(x);(0,r.useEffect)((function(){var e=setInterval((function(){x.whoseturn>-1&&x.players.length>0&&d.send({type:a.j6,func:"interval",syncstamp:C,thisisme:m,nickname:h,gameid:x.gameid})}),a.$B);return function(){return clearInterval(e)}})),(0,r.useEffect)((function(){""!==f&&function(e){var n=JSON.parse(e);n.type===a.j6&&(n.func===a.e?n.game.gameindex===x.gameindex&&n.game.round===x.round&&n.goal===x.goal&&n.players.length===x.players.length&&n.game.movesThisRound.length===x.movesThisRound.length||(g(n.snat),P(-1),b(n.game),T(n.game.syncstamp)):n.func===a.S2C_FUNC_GAMECREATED||d.send({type:a.j6,func:"rejoin",thisisme:m,gameid:x.gameid,nickname:h,timestamp:Date.now()}))}(f)}),[f]),(0,r.useEffect)((function(){if(R&&x.gameindex===R.gameindex&&x.round===R.round&&x.freeforall&&!R.freeforall){var e=document.createElement("audio");e.src=x.movesThisRound[x.movesThisRound.length-1].pass?"https://tilerunner.github.io/Pass.m4a":"https://tilerunner.github.io/Oops.m4a",e.play()}}),[x]);var A=function(){if(x.whoseturn<0)return!1;if(x.freeforall){if(x.excludedPlayer===h)return!1;for(var e=0;e<x.freeforallMoves.length;e++)if(x.freeforallMoves[e].nickname===h)return!1;return!0}return h===x.players[x.whoseturn].nickname};return(0,i.jsxs)("div",{className:"container fybGame ".concat("Y"===n?"mobile":"notmobile"),children:[(0,i.jsxs)("div",{className:"fybHeaderDiv",children:[(0,i.jsx)("span",{className:"h2",children:"Fry Your Brain"}),(0,i.jsx)("button",{className:"fybHomeButton",onClick:function(){t("menu")},children:(0,i.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,i.jsx)("div",{className:"fybHeaderDiv",children:(0,i.jsxs)("span",{className:"h4",children:["Game id: ",v]})}),(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{colSpan:"2",className:"fybGameSectionHeader",children:["First to ",x.goal," wins!"]})}),x.players.map((function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"fybGamePlayer",children:[e.nickname,e.wins>0&&(0,i.jsxs)("span",{children:[" (",e.wins,")"]})]}),(0,i.jsxs)("td",{className:"fybGameScore",children:[e.points<10?(0,i.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=x.goal&&(0,i.jsx)("span",{className:"fybWinner",children:"Winner!"})]})]},"Player".concat(e.index))})),x.movesPrevRound&&x.movesPrevRound.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"Previous round:"})}),x.movesPrevRound&&x.movesPrevRound.length>0&&c("movesPrevRound",x.movesPrevRound),x.movesThisRound&&x.movesThisRound.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"This round:"})}),x.movesThisRound&&x.movesThisRound.length>0&&c("movesThisRound",x.movesThisRound),!x.freeforall&&x.freeforallMoves&&x.freeforallMoves.length>0&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{className:"fybGameSectionHeader",colSpan:"2",children:"Free-for-all:"})}),!x.freeforall&&x.freeforallMoves&&x.freeforallMoves.length>0&&c("ffaMoves",x.freeforallMoves)]})}),x.whoseturn>-1&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"fybGameFryLettersLabel",children:["Fry Letters:",(0,i.jsx)("button",{className:"fybGameShuffleButton",onClick:function(){for(var e=x.fryLetters.length,n=(0,s.Z)(x.fryLetters),t=[];t.length<e;){var i=Math.floor(Math.random()*n.length);t.push(n[i]),n.splice(i,1)}var r=JSON.parse(JSON.stringify(x));r.fryLetters=[].concat(t),b(r)},children:(0,i.jsx)("i",{className:"material-icons fybGameShuffleButtonIcon",children:"cached"})}),(0,i.jsx)("button",{className:"fybGameShuffleButton",onClick:function(){var e=(0,s.Z)(x.fryLetters);e.sort();var n=JSON.parse(JSON.stringify(x));n.fryLetters=(0,s.Z)(e),b(n)},children:(0,i.jsx)("i",{className:"material-icons fybGameShuffleButtonIcon",children:"sort_by_alpha"})})]}),(0,i.jsx)("div",{className:"fryLetterDiv",children:x.fryLetters.map((function(e,n){return(0,i.jsx)("span",{className:n===L?"fybFryLetter Selected":"fybFryLetter",onDoubleClick:function(){var e=x.fryLetters[n],t=(0,s.Z)(x.fryLetters);t.splice(n,1),t.push(e);var i=JSON.parse(JSON.stringify(x));i.fryLetters=(0,s.Z)(t),b(i),P(-1)},onClick:function(){if(-1===L)P(n);else if(n===L)P(-1);else{for(var e=[],t=x.fryLetters[L],s=0;s<x.fryLetters.length;s++){var i=x.fryLetters[s];s===n&&e.push(t),s!==L&&e.push(i)}var r=JSON.parse(JSON.stringify(x));r.fryLetters=[].concat(e),b(r),P(-1)}},children:e},"FryLetter".concat(n))}))}),(0,i.jsx)("div",{className:"fryAnswerCountDiv",children:(0,i.jsx)("div",{className:"fryAnswerCount",children:x.numPossibleAnswers})})]}),A()&&l((function(e){if(A())return"Enter"===e.key?(e.preventDefault(),void u(S,x,g,d,m,h,N)):void 0}),S,N,x,g,d,m,h),(0,i.jsxs)("div",{children:[x.gameOver&&(0,i.jsxs)("div",{className:"fybGameOver",children:[(0,i.jsx)("span",{className:"fybGameSectionHeader",children:"Game Over"}),(0,i.jsx)("button",{className:"fybGameWordSubmitButton",onClick:function(){!function(e,n,t,s){e.send({type:a.j6,func:"replay",thisisme:n,game:t,nickname:s,timestamp:Date.now()})}(d,m,x,h)},children:"PLAY AGAIN"})]}),(0,i.jsx)("p",{className:"fybSnat",children:p})]})]})}},5354:function(e,n,t){"use strict";t.r(n);var s=t(5893),i=t(7294),r=t(4339),a=t(8337);function o(e,n,t,i){return(0,s.jsxs)("div",{className:"fybGamelist",children:[(0,s.jsx)("p",{children:"Game List:"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Ppl"}),(0,s.jsx)("th",{children:"Pts"}),(0,s.jsx)("th",{children:"By"}),(0,s.jsx)("th",{children:"State"})]})}),(0,s.jsx)("tbody",{children:e.map((function(e,a){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.gameid}),(0,s.jsxs)("td",{children:[e.players.length,"/",e.numPlayers]}),(0,s.jsx)("td",{children:e.goal}),(0,s.jsx)("td",{children:e.players[0].nickname}),(0,s.jsx)("td",{children:u(e.players,i)?(0,s.jsx)("button",{type:"submit",onClick:function(){!function(e,n,t,s){e.send({type:r.j6,func:"rejoin",thisisme:n,gameid:t,nickname:s,timestamp:Date.now()})}(n,t,e.gameid,i)},children:"REJOIN"},"rejoinButton".concat(a)):e.players.length<e.numPlayers?(0,s.jsx)("button",{type:"submit",onClick:function(){!function(e,n,t,s){e.send({type:r.j6,func:"join",thisisme:n,gameid:t,nickname:s,timestamp:Date.now()})}(n,t,e.gameid,i)},children:"JOIN"},"joinButton".concat(a)):"In progress"})]})}))})]})]})}function c(e,n,t){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Nickname:"}),(0,s.jsx)("input",{type:"text",name:"nickname",value:e,onChange:function(e){n(e.target.value)}})]}),e&&(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"fybLobbyButton",type:"submit",onClick:function(){var s=e.trim();n(s),t(!0)},children:"SUBMIT"})})]})}function l(e){return(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"fybLobbyButton",type:"submit",id:"chooseCreateGame",onClick:function(){e("C")},children:"CREATE A GAME"})})}function u(e,n){for(var t=!1,s=0;s<e.length;s++)e[s].nickname===n&&(t=!0);return t}n.default=function(e){var n=e.ismobile,t=e.setWhereto,u=e.client,d=e.thisisme,m=e.setParticipant,f=e.wsmessage,h=e.nickname,v=e.setNickname,y=e.gameid,p=e.setGameid,g=(0,i.useState)("Welcome!"),j=g[0],x=g[1],b=(0,i.useState)([]),k=b[0],S=b[1],N=(0,i.useState)(!1),w=N[0],C=N[1],T=(0,i.useState)(""),G=T[0],L=T[1];return(0,i.useEffect)((function(){""!==f&&function(e){var n=JSON.parse(e);n.type===r.j6&&(n.func===r.hA?S(n.gamelist):n.func===r.e?n.thisisme===d?(p(n.game.gameid),x(n.snat),m(r.oZ)):x("Why am I getting game data from ".concat(n.nickname," for game ").concat(n.gameid,"?")):"gameidtaken"===n.func?x("That game ID is already taken"):"gameidunknown"===n.func?x("That game ID is not being used"):"gamefull"===n.func?x("That game is full"):"notinthatgame"===n.func?x("You are not in that game"):"otherclientfound"===n.func?x("That nickname is already in that game"):x("Unhandled message: ".concat(e)))}(f)}),[f]),(0,s.jsxs)("div",{className:"fybLobby ".concat("Y"===n?"mobile":"notmobile"),id:"fybLobby",children:[(0,s.jsxs)("div",{className:"fybHeaderDiv",children:[(0,s.jsx)("span",{className:"h2",children:"Fry Your Brain"}),(0,s.jsx)("button",{className:"fybHomeButton",onClick:function(){t("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})]}),(0,s.jsx)("p",{children:j}),!w&&c(h,v,C),w&&o(k,u,d,h),w&&!G&&l(L),w&&"C"===G&&(0,s.jsx)(a.default,{client:u,thisisme:d,nickname:h,gameid:y,setGameid:p}),(0,s.jsx)("div",{className:"fivepxdivider",children:"\xa0"})]})}},5518:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var s=t(4047),i=t(2700),r=function(){function e(n,t){(0,s.Z)(this,e),this.callback=n,this.timerCalc=t,this.timer=null,this.tries=0}return(0,i.Z)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),a=function(){function e(n,t,i,a){var o=this;(0,s.Z)(this,e),this.customSocket=null,this.socketUrl=n,this.clientType=i,this.thisisme=a,this.reconnectTimer=new r((function(){o.disconnect(),o.connect()}),this.reconnectAfterMs),this.messageFunction=t}return(0,i.Z)(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(n){e.send({type:e.clientType,func:"announce",thisisme:e.thisisme})},this.customSocket.onclose=function(n){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){e.thisisme=this.thisisme,e.clientType=this.clientType;var n=JSON.stringify(e);this.customSocket.send(n)}}]),e}()},4047:function(e,n,t){"use strict";function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return s}})},2700:function(e,n,t){"use strict";function s(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),e}t.d(n,{Z:function(){return i}})},5877:function(e,n,t){var s=t(3570),i=t(1171),r=i;r.v1=s,r.v4=i,e.exports=r},5327:function(e){for(var n=[],t=0;t<256;++t)n[t]=(t+256).toString(16).substr(1);e.exports=function(e,t){var s=t||0,i=n;return[i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]]].join("")}},5217:function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var s=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),s[n]=e>>>((3&n)<<3)&255;return s}}},3570:function(e,n,t){var s,i,r=t(5217),a=t(5327),o=0,c=0;e.exports=function(e,n,t){var l=n&&t||0,u=n||[],d=(e=e||{}).node||s,m=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==m){var f=r();null==d&&(d=s=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==m&&(m=i=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,y=h-o+(v-c)/1e4;if(y<0&&void 0===e.clockseq&&(m=m+1&16383),(y<0||h>o)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,c=v,i=m;var p=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;u[l++]=p>>>24&255,u[l++]=p>>>16&255,u[l++]=p>>>8&255,u[l++]=255&p;var g=h/4294967296*1e4&268435455;u[l++]=g>>>8&255,u[l++]=255&g,u[l++]=g>>>24&15|16,u[l++]=g>>>16&255,u[l++]=m>>>8|128,u[l++]=255&m;for(var j=0;j<6;++j)u[l+j]=d[j];return n||a(u)}},1171:function(e,n,t){var s=t(5217),i=t(5327);e.exports=function(e,n,t){var r=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var o=0;o<16;++o)n[r+o]=a[o];return n||i(a)}}}]);