(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{4339:function(e,n,t){"use strict";t.d(n,{j6:function(){return s},dK:function(){return a},oZ:function(){return i},e:function(){return r},dY:function(){return o},$B:function(){return c}});var s="fyb",a="U",i="P",r="GAME_DATA",o="GAME_CREATED",c=2e4},4891:function(e,n,t){"use strict";t.r(n);var s=t(5893),a=t(7294),i=t(5518),r=t(5354),o=t(1863),c=t(4339),l=t(5877);n.default=function(e){var n=e.setWhereto,t=(0,a.useState)((0,l.v4)())[0],u=(0,a.useState)(c.dK),m=u[0],d=u[1],h=(0,a.useState)(""),f=h[0],w=h[1],v=(0,a.useState)(""),g=v[0],p=v[1],y=(0,a.useState)(""),x=y[0],j=y[1],b=(0,a.useState)(2),k=b[0],N=b[1],C="wss://tilerunner.herokuapp.com/?clientType=fyb&thisisme="+t,S=(0,a.useState)(new i.Z(C,(function(e){w(e.data)}),c.j6,t))[0];return(0,a.useEffect)((function(){return S.connect()}),[]),(0,s.jsxs)(s.Fragment,{children:[m===c.dK&&(0,s.jsx)(r.default,{setWhereto:n,client:S,thisisme:t,setParticipant:d,wsmessage:f,nickname:g,setNickname:p,gameid:x,setGameid:j,numPlayers:k,setNumPlayers:N}),m===c.oZ&&(0,s.jsx)(o.default,{setWhereto:n,client:S,thisisme:t,wsmessage:f,nickname:g,gameid:x,numPlayers:k})]})}},1863:function(e,n,t){"use strict";t.r(n);var s=t(5893),a=t(7294),i=t(4339);function r(e,n){return(0,s.jsxs)("div",{className:"w3-panel",children:[(0,s.jsxs)("h2",{className:"w3-black w3-padding-small w3-cell",children:[e,":"]}),(0,s.jsx)("table",{children:n.map((function(n){return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"w3-green",children:["\xa0",n.nickname,":"]}),(0,s.jsxs)("td",{children:["\xa0",n.pass?(0,s.jsx)("span",{className:"w3-black",children:" passed"}):(0,s.jsx)("span",{className:"w3-monospace ".concat(n.valid?"":"w3-red"),children:n.word})]})]},"".concat(e).concat(n.nickname))}))})]})}function o(e,n,t,a,r,o,l,u){return(0,s.jsxs)("div",{className:"w3-quarter w3-margin",onKeyDownCapture:e,children:[(0,s.jsx)("label",{children:"Enter Word:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",autoComplete:"off",spellCheck:"false",name:"word",value:n,onChange:function(e){t(e.target.value)}}),n.toUpperCase().trim().match("^[a-zA-Z]*$")&&(0,s.jsx)("button",{className:"w3-button w3-green w3-margin",onClick:function(){c(n,a,r,o,l,u,t)},children:"SUBMIT"},"submitWord"),(0,s.jsx)("button",{className:"w3-button w3-red w3-margin",onClick:function(){!function(e,n,t,s,a,r){e("Sending PASS ... shouldn't take long."),n.send({type:i.j6,func:"move",pass:!0,valid:!1,thisisme:t,gameid:s,nickname:a,timestamp:Date.now(),word:""}),r("")}(r,o,l,a.gameid,u,t)},children:"PASS"},"passButton")]})}function c(e,n,t,s,a,r,o){for(var c=e.toUpperCase().trim(),l=0;l<n.movesThisRound.length;l++){var u=n.movesThisRound[l].word;if(u===c)return void t("You cannot reuse a previous word from this round (".concat(u,")."));if(u+"S"===c&&"S"!==u.substring(u.length-1)&&n.movesThisRound[l].valid)return void t("You cannot add S to a previous valid word (".concat(u,") from this round unless it ends with S."))}for(var m=0;m<n.fryLetters.length;m++){for(var d=0,h=0,f=0;f<n.fryLetters.length;f++)n.fryLetters[m]===n.fryLetters[f]&&(d+=1);for(var w=0;w<c.length;w++)n.fryLetters[m]===c[w]&&(h+=1);if(h<d)return void t("You need the letter ".concat(n.fryLetters[m]," at least ").concat(d," time").concat(1===d?".":"s."))}t("Checking your word ... shouldn't take long. If it does, please try rejoining the game."),s.send({type:i.j6,func:"move",pass:!1,thisisme:a,gameid:n.gameid,nickname:r,timestamp:Date.now(),word:c}),o("")}n.default=function(e){var n=e.setWhereto,t=e.client,l=e.thisisme,u=e.wsmessage,m=e.nickname,d=e.gameid,h=(0,a.useState)(""),f=h[0],w=h[1],v=(0,a.useState)({goal:99,whoseturn:-1,players:[{index:0,nickname:"Loading..."}]}),g=v[0],p=v[1],y=(0,a.useState)(""),x=y[0],j=y[1],b=(0,a.useState)(""),k=b[0],N=b[1];(0,a.useEffect)((function(){var e=setInterval((function(){g.whoseturn>-1&&g.players.length>0&&t.send({type:i.j6,func:"interval",syncstamp:k,thisisme:l,nickname:m,gameid:g.gameid})}),i.$B);return function(){return clearInterval(e)}})),(0,a.useEffect)((function(){""!==u&&function(e){var n=JSON.parse(e);n.type===i.j6&&(n.func===i.e?(w(n.snat),p(n.game),N(n.game.syncstamp)):(n.func=i.dY)||w("Unhandled message: ".concat(e)))}(u)}),[u]);var C=function(){if(g.whoseturn<0)return!1;if(g.freeforall){if(g.excludedPlayer===m)return!1;for(var e=0;e<g.freeforallMoves.length;e++)if(g.freeforallMoves[e].nickname===m)return!1;return!0}return m===g.players[g.whoseturn].nickname};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"w3-teal w3-cell-row",children:[(0,s.jsx)("div",{className:"w3-container w3-cell w3-cell-middle w3-padding w3-mobile",children:(0,s.jsx)("h1",{className:"myHeadingFont",children:"Fry Your Brain"})}),(0,s.jsxs)("div",{className:"w3-container w3-cell w3-mobile",children:[(0,s.jsxs)("h4",{className:"myCommonFont",children:["Game id: ",d]}),(0,s.jsxs)("h4",{className:"myCommonFont",children:["First to ",g.goal]})]}),(0,s.jsx)("div",{className:"w3-container w3-cell w3-padding w3-mobile",children:(0,s.jsx)("button",{className:"w3-button",onClick:function(){n("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]}),(0,s.jsxs)("div",{className:"w3-panel w3-responsive",children:[(0,s.jsx)("h2",{className:"w3-black w3-padding-small w3-cell",children:"Player totals:"}),(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:g.players.map((function(e){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"w3-green",children:e.nickname}),(0,s.jsxs)("td",{class:"w3-monospace",children:["\xa0\xa0",e.points<10?(0,s.jsx)("span",{children:"\xa0"}):"",e.points,e.points>=g.goal&&(0,s.jsx)("span",{class:"w3-purple w3-cursive w3-margin w3-wide",children:"Winner!"})]})]},"Player".concat(e.index))}))})})]}),g.movesPrevRound&&g.movesPrevRound.length>0&&r("Moves previous round",g.movesPrevRound),g.movesThisRound&&g.movesThisRound.length>0&&r("Moves this round",g.movesThisRound),!g.freeforall&&g.freeforallMoves&&g.freeforallMoves.length>0&&r("Free-for-all results",g.freeforallMoves),g.whoseturn>-1&&(0,s.jsx)("div",{className:"w3-panel w3-row",children:(0,s.jsxs)("h2",{className:"w3-black w3-cell w3-padding-small",children:["Fry Letters: ",g.fryLetters.map((function(e,n){return(0,s.jsx)("span",{className:"FryLetter",children:e},"FryLetter".concat(n))}))]})}),C()&&o((function(e){if(C())return"Enter"===e.key?(e.preventDefault(),void c(x,g,w,t,l,m,j)):void 0}),x,j,g,w,t,l,m),(0,s.jsxs)("div",{className:"w3-container",children:[(0,s.jsx)("p",{children:f}),g.gameOver&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"w3-black w3-cell w3-padding-small",children:"Game Over"}),(0,s.jsx)("button",{className:"w3-button w3-green w3-margin",onClick:function(){!function(e,n,t,s){e.send({type:i.j6,func:"replay",thisisme:n,game:t,nickname:s,timestamp:Date.now()})}(t,l,g,m)},children:"PLAY AGAIN"})]})]})]})}},5354:function(e,n,t){"use strict";t.r(n);var s=t(5893),a=t(7294),i=t(4339);function r(e,n,t){return(0,s.jsxs)("div",{className:"w3-row-padding h4",children:[(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Nickname:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"nickname",value:e,onChange:function(e){n(e.target.value.trim())}})]}),e&&(0,s.jsx)("div",{className:"w3-quarter",children:(0,s.jsx)("button",{className:"w3-button w3-border w3-green w3-round-xxlarge myCommonFont",type:"submit",onClick:function(){t(!0)},children:"SUBMIT"})})]})}function o(e){return(0,s.jsxs)("div",{className:"w3-container h4 w3-responsive",children:[(0,s.jsx)("div",{className:"w3-row w3-padding",children:(0,s.jsx)("button",{className:"w3-button w3-border w3-green w3-hover-black w3-round-xxlarge myCommonFont",type:"submit",id:"chooseCreateGame",onClick:function(){e("C")},children:"CREATE A GAME"})}),(0,s.jsx)("div",{className:"w3-row w3-padding",children:(0,s.jsx)("button",{className:"w3-button w3-border w3-green w3-hover-black w3-round-xxlarge myCommonFont",type:"submit",id:"chooseJoinGame",onClick:function(){e("J")},children:"JOIN A GAME"})}),(0,s.jsx)("div",{className:"w3-row w3-padding",children:(0,s.jsx)("button",{className:"w3-button w3-border w3-green w3-hover-black w3-round-xxlarge myCommonFont",type:"submit",id:"chooseRejoinGame",onClick:function(){e("R")},children:"REJOIN A GAME"})})]})}function c(e,n,t,a,r,o,c,l,u){return(0,s.jsxs)("div",{className:"w3-row-padding h4",children:[(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Game ID:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:t,onChange:function(e){a(e.target.value.trim())}})]}),(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Number of Players:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"number",name:"numPlayers",value:r,onChange:function(e){o(e.target.value)}})]}),(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Points needed to win (3 to 21):"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"number",name:"goal",value:c,onChange:function(e){l(e.target.value)}})]}),t&&r>1&&r<7&&c>2&&c<22&&(0,s.jsx)("div",{className:"w3-quarter",children:(0,s.jsx)("button",{id:"requestCreateGame",className:"w3-button w3-border w3-green w3-round-xxlarge myCommonFont",type:"submit",onClick:function(){!function(e,n,t,s,a,r){e.send({type:i.j6,func:"create",thisisme:n,gameid:t,numPlayers:s,goal:a,nickname:r,timestamp:Date.now()})}(e,n,t,r,c,u)},children:"SUBMIT"})})]})}function l(e,n,t,a,r){return(0,s.jsxs)("div",{className:"w3-row-padding h4",children:[(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Game ID to join:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:t,onChange:function(e){a(e.target.value.trim())}})]}),t&&(0,s.jsx)("div",{className:"w3-quarter",children:(0,s.jsx)("button",{id:"requestJoinGame",className:"w3-button w3-border w3-green w3-round-xxlarge myCommonFont",type:"submit",onClick:function(){!function(e,n,t,s){e.send({type:i.j6,func:"join",thisisme:n,gameid:t,nickname:s,timestamp:Date.now()})}(e,n,t,r)},children:"SUBMIT"})})]})}function u(e,n,t,a,r){return(0,s.jsxs)("div",{className:"w3-row-padding h4",children:[(0,s.jsxs)("div",{className:"w3-quarter",children:[(0,s.jsx)("label",{children:"Game ID to rejoin:"}),(0,s.jsx)("input",{className:"w3-input w3-border w3-blue myCommonFont",type:"text",name:"gameid",value:t,onChange:function(e){a(e.target.value.trim())}})]}),t&&(0,s.jsx)("div",{className:"w3-quarter",children:(0,s.jsx)("button",{id:"requestRejoinGame",className:"w3-button w3-border w3-green w3-round-xxlarge myCommonFont",type:"submit",onClick:function(){!function(e,n,t,s){e.send({type:i.j6,func:"rejoin",thisisme:n,gameid:t,nickname:s,timestamp:Date.now()})}(e,n,t,r)},children:"SUBMIT"})})]})}n.default=function(e){var n=e.setWhereto,t=e.client,m=e.thisisme,d=e.setParticipant,h=e.wsmessage,f=e.nickname,w=e.setNickname,v=e.gameid,g=e.setGameid,p=e.numPlayers,y=e.setNumPlayers,x=(0,a.useState)(""),j=x[0],b=x[1],k=(0,a.useState)(!1),N=k[0],C=k[1],S=(0,a.useState)(""),T=S[0],F=S[1],P=(0,a.useState)(11),A=P[0],M=P[1];return(0,a.useEffect)((function(){""!==h&&function(e){var n=JSON.parse(e);n.type===i.j6&&(n.func===i.e?n.thisisme===m?(g(n.game.gameid),y(n.game.numPlayers),d(i.oZ)):b("".concat(n.nickname," just created game ").concat(n.gameid,".")):"gameidtaken"===n.func?b("That game ID is already taken"):"gamejoined"===n.func?n.thisisme===m?(g(n.game.gameid),y(n.game.numPlayers),d(i.oZ)):b("".concat(n.nickname," just joined game ").concat(n.game.gameid,".")):"gameidunknown"===n.func?b("That game ID is not being used"):"gamefull"===n.func?b("That game is full"):"notinthatgame"===n.func?b("You are not in that game"):"otherclientfound"===n.func?b("That nickname is already in that game"):n.func===i.dY?b("".concat(n.nickname," created game ").concat(n.gameid)):"gamelist"===n.func?b(n.gamelist):b("Unhandled message: ".concat(e)))}(h)}),[h]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"w3-container w3-teal w3-bar",children:[(0,s.jsx)("h1",{className:"w3-bar-item w3-left myHeadingFont",children:"Fry Your Brain Lobby"}),(0,s.jsx)("div",{className:"w3-bar-item w3-left",children:(0,s.jsx)("button",{className:"w3-button",onClick:function(){n("menu")},children:(0,s.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})]}),(0,s.jsx)("p",{children:j}),!N&&r(f,w,C),N&&!T&&o(F),N&&"C"===T&&c(t,m,v,g,p,y,A,M,f),N&&"J"===T&&l(t,m,v,g,f),N&&"R"===T&&u(t,m,v,g,f)]})}},5518:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var s=t(4047),a=t(2700),i=function(){function e(n,t){(0,s.Z)(this,e),this.callback=n,this.timerCalc=t,this.timer=null,this.tries=0}return(0,a.Z)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),r=function(){function e(n,t,a,r){var o=this;(0,s.Z)(this,e),this.customSocket=null,this.socketUrl=n,this.clientType=a,this.thisisme=r,this.reconnectTimer=new i((function(){o.disconnect(),o.connect()}),this.reconnectAfterMs),this.messageFunction=t}return(0,a.Z)(e,[{key:"reconnectAfterMs",value:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4}},{key:"connect",value:function(){var e=this;this.customSocket=new WebSocket(this.socketUrl),this.customSocket.onopen=function(n){e.send({type:e.clientType,func:"announce",thisisme:e.thisisme})},this.customSocket.onclose=function(n){e.reconnectTimer.scheduleTimeout()},this.customSocket.onerror=function(e){},this.customSocket.onmessage=this.messageFunction}},{key:"disconnect",value:function(){this.customSocket.onclose=function(){},this.customSocket.close()}},{key:"send",value:function(e){e.thisisme=this.thisisme,e.clientType=this.clientType;var n=JSON.stringify(e);this.customSocket.send(n)}}]),e}()},4047:function(e,n,t){"use strict";function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return s}})},2700:function(e,n,t){"use strict";function s(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),e}t.d(n,{Z:function(){return a}})},5877:function(e,n,t){var s=t(3570),a=t(1171),i=a;i.v1=s,i.v4=a,e.exports=i},5327:function(e){for(var n=[],t=0;t<256;++t)n[t]=(t+256).toString(16).substr(1);e.exports=function(e,t){var s=t||0,a=n;return[a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],"-",a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]],a[e[s++]]].join("")}},5217:function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var s=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),s[n]=e>>>((3&n)<<3)&255;return s}}},3570:function(e,n,t){var s,a,i=t(5217),r=t(5327),o=0,c=0;e.exports=function(e,n,t){var l=n&&t||0,u=n||[],m=(e=e||{}).node||s,d=void 0!==e.clockseq?e.clockseq:a;if(null==m||null==d){var h=i();null==m&&(m=s=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=a=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),w=void 0!==e.nsecs?e.nsecs:c+1,v=f-o+(w-c)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||f>o)&&void 0===e.nsecs&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=f,c=w,a=d;var g=(1e4*(268435455&(f+=122192928e5))+w)%4294967296;u[l++]=g>>>24&255,u[l++]=g>>>16&255,u[l++]=g>>>8&255,u[l++]=255&g;var p=f/4294967296*1e4&268435455;u[l++]=p>>>8&255,u[l++]=255&p,u[l++]=p>>>24&15|16,u[l++]=p>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=m[y];return n||r(u)}},1171:function(e,n,t){var s=t(5217),a=t(5327);e.exports=function(e,n,t){var i=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n)for(var o=0;o<16;++o)n[i+o]=r[o];return n||a(r)}}}]);