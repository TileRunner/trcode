"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1963],{1963:function(e,s,a){a.r(s),a.d(s,{default:function(){return x}});var n=a(5893),t=a(7294),i=a(6300),r=a(149),l=a(4471),o=a(6260),c=a(5079),d=a(7554),m=a(1130),p=a(7908);var u=a(3836);function h(e,s){(null==s||s>e.length)&&(s=e.length);for(var a=0,n=new Array(s);a<s;a++)n[a]=e[a];return n}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,s){if(!e)return;if("string"===typeof e)return h(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,s)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e){var s="pbTileOnRack Unselected "+("Q"===e.tilevalue?"u ":"")+e.participant;return(0,n.jsx)("div",{className:s,children:(0,n.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},e.tileindex)},x=function(e){var s=e.setWhereto,a=e.client,h=e.wsmessage,x=e.gameid,y=e.nickname,j=e.participant,b=function(e){var s=JSON.parse(e);if(s.gameid===x&&"pb"===s.type){if("providegamedata"===s.func){var a=function(e){for(var s=[],a="",n="",t="",i=(0,m.$)(e.racksize),r=[],l=0,o=0;o<e.events.length;o++){var c=e.events[o];if(c.ptiles&&(a=c.ptiles),c.gtiles&&(n=c.gtiles),"STARTGAME"!==c.type&&c.type!==d.bS&&c.type!==d.Ix||(t=c.tiles),c.type===d.bS||c.type===d.Ix||c.type===d.Am){var u={by:c.by,type:c.type};if(c.type===d.bS){u.mainword=c.mainword,u.extrawords=c.extrawords.split(","),u.pos=c.pos,c.by===d.ap&&(l=c.rescues);for(var h=(0,p.F)(c.pos),f=h.row,v=h.col,x=0;x<c.mainword.length;x++){var y=i[f][v];y.usedby===d.i4&&(y.usedby=c.by,y.letter=c.mainword[x]),h.dir===d.oW?v++:f++}}r.push(u)}s.push({tiles:t.split(""),squareArray:JSON.parse(JSON.stringify(i)),ptiles:a.split(""),gtiles:n.split(""),rescues:l,whoseturn:c.whoseturn})}return{pname:e.pname,gname:e.gname,moves:r,racksize:e.racksize,snapshots:s}}(s.apidata);C(a)}if("chat"===s.func){var n=f(S).concat([{from:s.nickname,msg:s.sendmsg}]);T(n)}}},w=(0,t.useState)(0),g=w[0],N=w[1],k=(0,t.useState)({pname:"loading...",gname:"loading...",moves:[],snapshots:[{tiles:[],ptiles:[],gtiles:[],rescues:0,whoseturn:"P"}]}),F=k[0],C=k[1],A=(0,t.useState)([]),S=A[0],T=A[1];(0,t.useEffect)((function(){a.send({gameid:x,type:"pb",sender:d.Vj,func:"startExamining"})}),[]),(0,t.useEffect)((function(){""!==h&&b(h)}),[h]),(0,t.useEffect)((function(){(0,u.O)("ScrollableChat")}),[S]);var O=function(){g+1<F.snapshots.length&&N(g+1)},_=function(){return F.snapshots[g].whoseturn===d.kX},E=function(){return F.snapshots[g].whoseturn===d.Ov};return(0,n.jsxs)("div",{className:"prisonbreak",children:[(0,n.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,n.jsx)("div",{className:"w3-display-middle",children:(0,n.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,n.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",x]}),(0,n.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",F.pname]}),(0,n.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,n.jsx)("button",{className:"w3-button",onClick:function(){s("menu")},children:(0,n.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})}),(0,n.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",F.gname]})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,n.jsx)(r.default,{tiles:F.snapshots[g].tiles,othertiles:_()?F.snapshots[g].gtiles:E()?F.snapshots[g].ptiles:[]}),(0,n.jsx)(l.default,{moves:F.moves.slice(0,g),onmoveclick:function(e){return function(e){var s=e;e+1<F.snapshots.length&&N(s)}(e)}})]}),(0,n.jsx)("div",{className:"col pbPlayerOuterSection",children:(0,n.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,n.jsxs)("div",{className:"pbPlayerTitle",children:[(0,n.jsx)("i",{className:"material-icons",children:d._k}),"\xa0",d.Ji,"\xa0",(0,n.jsx)("i",{className:"material-icons",children:d._k})]}),(0,n.jsxs)("div",{className:"pbTilerack",children:[F.snapshots[g].whoseturn===d.ap&&(0,n.jsx)("div",{className:"pbTilerackArrow",onClick:O}),F.snapshots[g].ptiles.map((function(e,s){return(0,n.jsx)(v,{participant:d.ap,tilevalue:E()?"*":e,tileindex:s},"ObserverPrisonersRackTile".concat(s))}))]}),(0,n.jsxs)("div",{className:"pbPlayerTitle",children:[(0,n.jsx)("i",{className:"material-icons",children:d.g9}),"\xa0",d.jN,"\xa0",(0,n.jsx)("i",{className:"material-icons",children:d.g9})]}),(0,n.jsxs)("div",{className:"pbTilerack",children:[F.snapshots[g].whoseturn===d.b6&&(0,n.jsx)("div",{className:"pbTilerackArrow",onClick:O}),F.snapshots[g].gtiles.map((function(e,s){return(0,n.jsx)(v,{participant:d.b6,tilevalue:_()?"*":e,tileindex:s},"ObserverGuardsRackTile".concat(s))}))]})]})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsx)(i.default,{squareArray:F.snapshots[g].squareArray,rcd:[-1,-1,d.QY],onClick:function(e,s){return function(e,s){for(var a=-1,n=0;n<F.snapshots.length;n++){var t=F.snapshots[n];-1===a&&t.squareArray[e][s].usedby!==d.i4&&(a=n)}a>0&&N(a-1)}(e,s)}})})}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)(o.default,{rescues:F.snapshots[g].rescues}),(0,n.jsx)(c.default,{gameid:x,client:a,nickname:y,msgs:S,setMsgs:T,participant:j})]})]}),(0,n.jsxs)("div",{className:"w3-display-container w3-teal examineFooterHeight",children:[(0,n.jsx)("div",{className:"w3-display-middle commonFontFamily",children:(0,n.jsxs)("div",{children:[g>0&&(0,n.jsx)("button",{className:"w3-black w3-round",onClick:function(){N(0)},children:(0,n.jsx)("i",{className:"material-icons",children:"fast_rewind"})}),g>0&&(0,n.jsx)("button",{className:"w3-black w3-round",onClick:function(){g-1>-1&&N(g-1)},children:(0,n.jsx)("i",{className:"material-icons",children:"arrow_left"})}),g<F.snapshots.length-1&&(0,n.jsx)("button",{className:"w3-black w3-round",onClick:O,children:(0,n.jsx)("i",{className:"material-icons",children:"arrow_right"})}),g<F.snapshots.length-1&&(0,n.jsx)("button",{className:"w3-black w3-round",onClick:function(){var e=F.snapshots.length-1;N(e)},children:(0,n.jsx)("i",{className:"material-icons",children:"fast_forward"})})]})}),(0,n.jsx)("div",{className:"w3-display-topleft commonFontFamily",children:(0,n.jsx)("p",{children:"\xa0Click on a move in the move list to jump to where it was played"})}),(0,n.jsx)("div",{className:"w3-display-bottomleft commonFontFamily",children:(0,n.jsx)("p",{children:"\xa0Click on a tile on the board to jump to where it was played"})}),(0,n.jsx)("div",{className:"w3-display-topright commonFontFamily",children:(0,n.jsxs)("div",{className:"pbTilerack",children:["Click on the ",(0,n.jsx)("span",{className:"pbTilerackArrowInFooter",children:" "})," by the rack to advance one move\xa0"]})})]})]})}}}]);