(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{4946:function(e,n,t){"use strict";t.d(n,{F:function(){return i}});var r=t(6595);function i(e){return/[A-Z][0-9][0-9]/.test(e)?{row:Number(e.substr(1,2))-1,col:r.v8.indexOf(e[0]),dir:r.ik}:/[A-Z][0-9]/.test(e)?{row:Number(e[1])-1,col:r.v8.indexOf(e[0]),dir:r.ik}:/[0-9][0-9][A-Z]/.test(e)?{row:Number(e.substr(0,2))-1,col:r.v8.indexOf(e[2]),dir:r.oW}:/[0-9][A-Z]/.test(e)?{row:Number(e[0])-1,col:r.v8.indexOf(e[1]),dir:r.oW}:void 0}},1489:function(e,n,t){"use strict";t.d(n,{$:function(){return i}});var r=t(6595);function i(e){for(var n=2*e+1,t=Array(n),i=0;i<n;++i){for(var a=Array(n),s=0;s<n;++s){var c={row:i,col:s,type:r.WS,usedby:r.i4,letter:r.GP};i===e&&s===e?c.type=r.ix:i%e===0&&s%e===0?c.type=r.fi:i%2===s%2&&(c.type=r.me),a[s]=c}t[i]=[].concat(a)}return t}},6595:function(e,n,t){"use strict";t.d(n,{v8:function(){return r},RH:function(){return i},dK:function(){return a},ap:function(){return s},b6:function(){return c},qg:function(){return l},Vj:function(){return o},kX:function(){return u},Ov:function(){return d},Bd:function(){return p},_k:function(){return f},g9:function(){return m},Ji:function(){return h},jN:function(){return v},bS:function(){return b},Ix:function(){return x},Am:function(){return y},oW:function(){return g},ik:function(){return N},QY:function(){return j},i4:function(){return w},_W:function(){return k},$B:function(){return S},fl:function(){return A},Cr:function(){return C},L8:function(){return O},Qt:function(){return T},fi:function(){return B},ix:function(){return E},me:function(){return Z},WS:function(){return I},GP:function(){return R}});var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],i=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],a="U",s="P",c="G",l="O",o="E",u=s,d=c,p="X",f="run_circle",m="security",h="PRISONERS",v="GUARDS",b="PLAY",x="SWAP",y="PASS",g="r",N="d",j="",w="",k=["Escapee: \"I'm free! I'm free!\". Little kid: \"I'm four! I'm four!\"","Two peanuts were walking down a back alley. One was a salted.","The psychic dwarf escaped! There's a small medium at large!","What do you call a vegetable who has escaped prison? An escapea!","The prisoners fave punctuation is a period. It marks the end of a sentence!","Prison is only one word, but to robbers it's a whole sentence."],S=2e4,A=["A","A","A","B","C","D","E","E","E","E","F","G","H","I","I","I","J","K","L","M","N","N","O","O","O","P","Q","R","R","S","T","T","U","V","W","X","Y","Z","?","?"],C=["A","A","A","A","A","B","C","D","D","E","E","E","E","E","E","F","G","H","I","I","I","I","I","J","K","L","L","M","N","N","N","O","O","O","O","P","Q","R","R","R","S","S","T","T","T","U","V","W","X","Y","Z","?","?"],O=["A","A","A","A","A","A","A","B","B","C","C","D","D","D","E","E","E","E","E","E","E","E","E","F","G","G","H","H","I","I","I","I","I","I","I","J","K","L","L","L","M","M","N","N","N","N","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","S","S","S","T","T","T","T","U","U","U","V","W","X","Y","Z","?","?"],T=["A","A","A","A","A","A","A","A","A","B","B","C","C","D","D","D","D","E","E","E","E","E","E","E","E","E","E","E","E","F","F","G","G","G","H","H","I","I","I","I","I","I","I","I","I","J","K","L","L","L","L","M","M","N","N","N","N","N","N","O","O","O","O","O","O","O","O","P","P","Q","R","R","R","R","R","R","S","S","S","S","T","T","T","T","T","T","U","U","U","U","V","V","W","W","X","Y","Y","Z","?","?"],B="EscapeHatch",E="CenterSquare",Z="style1",I="style2",R=""},3939:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var r=function(e){var n=document.getElementById(e);n.scrollTop=n.scrollHeight}},3625:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(4620),a=t(6595);n.default=function(e){var n=e.onClick,t=e.squareArray,s=void 0===t?[]:t,c=e.rcd,l=function(e){return(0,r.jsxs)("tr",{className:"pbRow",children:[(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderLeft",children:a.RH[e]}),s[e].map((function(e){return function(e){return(0,r.jsx)("td",{className:"pbSquareOuter",children:(0,r.jsx)(i.default,{usedby:e.usedby,type:e.type,letter:e.letter,ri:e.row,ci:e.col,rcd:c,onClick:function(){return n(e.row,e.col)}})},"Square".concat(e.row,"-").concat(e.col))}(e)})),(0,r.jsx)("td",{className:"pbBoardRowHeader",id:"BoardHeaderRight",children:a.RH[e]})]},"BoardRow".concat(e))};return(0,r.jsx)("table",{className:"pbBoard",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",children:[(0,r.jsx)("td",{className:"pbBoardHeaderTopLeft",children:"\xa0"}),s.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:a.v8[n]},"TopColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderTopRight",children:"\xa0"})]}),s.map((function(e,n){return l(n)})),(0,r.jsxs)("tr",{className:"pbBoardColumnHeaderRow",id:"BoardHeaderBottom",children:[(0,r.jsx)("td",{className:"pbBoardHeaderBottomLeft",children:"\xa0"}),s.map((function(e,n){return(0,r.jsx)("td",{className:"pbBoardColumnHeader",children:a.v8[n]},"BottomColumnHeader".concat(n))})),(0,r.jsx)("td",{className:"pbBoardHeaderBottomRight",children:"\xa0"})]})]})})}},7666:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(1385),a=t(7294);n.default=function(e){var n=e.gameid,t=void 0===n?"":n,s=e.client,c=e.nickname,l=e.msgs,o=void 0===l?[]:l,u=e.setMsgs,d=e.participant,p=void 0===d?"":d,f=(0,a.useState)(""),m=f[0],h=f[1];return(0,r.jsx)("div",{id:"ScrollableChat",className:"pbChat",children:(0,r.jsx)("table",{className:"pbChatTable",children:(0,r.jsxs)("tbody",{children:[o.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pbChatFrom",children:e.from}),(0,r.jsx)("td",{className:"pbChatMsg",children:e.msg})]},"ChatMessage".concat(n))})),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"2",children:""===c?(0,r.jsx)("span",{children:"Please enter nickname to use chat"}):(0,r.jsx)("textarea",{className:""===m?"pbChatInputEmpty":"pbChatInput",name:"nextmsgInputArea",value:m,onChange:function(e){h(e.target.value)},onKeyDownCapture:function(e){if("Enter"===e.key&&m.length>0){e.preventDefault();var n=[].concat((0,i.Z)(o),[{from:c,msg:m}]),r=m;return u(n),h(""),void s.send({gameid:t,nickname:c,type:"pb",func:"chat",sender:p,sendmsg:r})}if("Backspace"===e.key&&m.length>0){e.preventDefault();var a=m.slice(0,m.length-1);h(a)}},placeholder:"chat..."})})})]})})})}},78:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var r=t(5893),i=t(1385),a=t(7294),s=t(1664),c=t(8451),l=t(3625),o=t(8520),u=t(9477),d=t(798),p=t(7666),f=t(6595),m=t(1489);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(e.length-1)/2,t=2*n,r=n,i=!0;return e[0][0].usedby!==f.i4&&e[0][r].usedby!==f.i4&&e[0][t].usedby!==f.i4&&e[r][0].usedby!==f.i4&&e[r][t].usedby!==f.i4&&e[t][0].usedby!==f.i4&&e[t][r].usedby!==f.i4&&e[t][t].usedby!==f.i4&&(i=!1),i}var v=t(4946);function b(e){var n=e.length-1,t=n-1;return t>-1&&e[t].type===f.Am&&e[n].type===f.Am}var x=t(3939);var y=function(e){var n="pbTileOnRack Unselected "+("Q"===e.tilevalue?"u ":"")+e.participant;return(0,r.jsx)("div",{className:n,children:(0,r.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},e.tileindex)},g=function(e){var n=e.isrejoin,t=e.participant,g=e.gameid,N=e.nickname,j=e.wsmessage,w=e.client,k=e.racksize,S=void 0===k?4:k,A=(0,a.useState)(""),C=A[0],O=A[1],T=S,B=2*S,E=6===S?f.L8:7===S?f.Qt:5===S?f.Cr:f.fl,Z=(0,a.useState)((0,i.Z)(E)),I=Z[0],R=Z[1],P=(0,a.useState)([]),M=P[0],H=P[1],q=(0,a.useState)([]),D=q[0],J=q[1],F=(0,a.useState)([]),Q=F[0],L=F[1],U=(0,a.useState)(-1),W=U[0],G=U[1],X=(0,a.useState)(f.kX),Y=X[0],_=X[1],K=(0,a.useState)([]),z=K[0],V=K[1],$=(0,a.useState)(0),ee=$[0],ne=$[1],te=(0,a.useState)([-1,-1,f.QY]),re=te[0],ie=te[1],ae=(0,a.useState)([]),se=ae[0],ce=ae[1],le=(0,a.useState)({squareArray:[],ptiles:[],gtiles:[]}),oe=le[0],ue=le[1],de=(0,a.useState)(0),pe=de[0],fe=de[1],me=(0,a.useState)(!1),he=me[0],ve=me[1],be=(0,a.useState)(""),xe=be[0],ye=be[1],ge=(0,a.useState)([]),Ne=ge[0],je=ge[1],we=function(e){var n=(0,a.useRef)();return(0,a.useEffect)((function(){n.current=e})),n.current}(ee);(0,a.useEffect)((function(){ke()}),[]),(0,a.useEffect)((function(){""!==j&&function(e){var n=JSON.parse(e);if(n.gameid===g&&"pb"===n.type){if("providegamedata"===n.func){var r=function(e){for(var n=e,t=n.events.length-1,r=n.events[t],i="",a="",s="",c=(0,m.$)(n.racksize),l=[],o=0,u=0;u<n.events.length;u++){var d=n.events[u];if(d.ptiles&&(i=d.ptiles),d.gtiles&&(a=d.gtiles),d.type===f.bS||d.type===f.Ix||d.type===f.Am){var p={by:d.by,type:d.type};if(d.type!==f.bS&&d.type!==f.Ix||(s=d.tiles),d.type===f.bS){p.mainword=d.mainword,p.extrawords=d.extrawords.split(","),p.pos=d.pos,d.by===f.ap&&(o=d.rescues);for(var h=(0,v.F)(d.pos),b=h.row,x=h.col,y=0;y<d.mainword.length;y++){var g=c[b][x];g.usedby===f.i4&&(g.usedby=d.by,g.letter=d.mainword[y]),h.dir===f.oW?x++:b++}}l.push(p)}}return{pname:n.pname,gname:n.gname,syncstamp:r.timestamp,tiles:s.split(""),squareArray:c,ptiles:i.split(""),gtiles:a.split(""),whoseturn:r.whoseturn,moves:l,rescues:o,racksize:n.racksize,allowRewind:!1}}(n.apidata);O(r.syncstamp),t===f.ap?ye(r.gname):t===f.b6&&ye(r.pname),R(r.tiles),L(r.squareArray),H(r.ptiles),J(r.gtiles),_(r.whoseturn);var a={squareArray:JSON.parse(JSON.stringify(r.squareArray)),ptiles:(0,i.Z)(r.ptiles),gtiles:(0,i.Z)(r.gtiles)};ue(a),ce(r.moves),ne(r.rescues),ve(r.allowRewind),Te()}if("providegname"===n.func&&t===f.Ji&&ye(n.gname),"allowundo"===n.func&&ve(!0),"chat"===n.func){var s=[].concat((0,i.Z)(Ne),[{from:n.nickname,msg:n.sendmsg}]);je(s)}"providesyncdata"===n.func&&n.syncstamp!==C&&(console.log("Out of sync - requesting latest game data"),De())}}(j)}),[j]),(0,a.useEffect)((function(){(0,x.O)("ScrollableMoves")}),[se]),(0,a.useEffect)((function(){(0,x.O)("ScrollableChat")}),[Ne]),(0,a.useEffect)((function(){if(ee>we){var e=document.createElement("audio");e.src=t===f.b6?"https://tilerunner.github.io/OneGotAway.m4a":"https://tilerunner.github.io/yippee.m4a",e.play()}}),[ee]),(0,a.useEffect)((function(){var e=pe+1;e>=f._W.length&&(e=0),fe(e)}),[Y]),(0,a.useEffect)((function(){var e=setInterval((function(){t!==Y&&Y!==f.Bd&&Je()}),f.$B);return function(){return clearInterval(e)}}));var ke=function(){var e=(0,m.$)(S);L(e),n?Ce():t===f.ap?Se(e):t===f.b6?Ae():Oe()},Se=function(e){for(var n=Date.now(),r=[],a=[],s=(0,i.Z)(E);r.length<S;){var c=Math.floor(Math.random()*s.length);r.push(s[c]),s.splice(c,1),c=Math.floor(Math.random()*s.length),a.push(s[c]),s.splice(c,1)}r.sort(),a.sort(),O(n),J(a),H(r),R(s),ue({squareArray:e,ptiles:[].concat(r),gtiles:[].concat(a)}),w.send({type:"pb",func:"startgame",gameid:g,timestamp:n,racksize:S,sender:t,pname:N,tiles:s,ptiles:r,gtiles:a})},Ae=function(){w.send({gameid:g,gname:N,type:"pb",func:"joingame",sender:t})},Ce=function(){w.send({gameid:g,type:"pb",func:"rejoingame",sender:t})},Oe=function(){w.send({gameid:g,type:"pb",func:"startObserving"})};function Te(){G(-1),ve(!1),ie(-1,-1,f.QY),V([])}var Be=function(e,n,t,r){var a=JSON.parse(JSON.stringify(Q)),s=(0,i.Z)(a[e]),c=s[n],l=(0,i.Z)(M),o=(0,i.Z)(D),u=(0,i.Z)(z),d=String(e)+"-"+String(n),p=z.indexOf(d);if(-1===t&&(t=W,r=re),t>-1&&c.usedby===f.i4){var m=Y===f.kX?l[t]:o[t];return c.letter=m,c.usedby=Y,s[n]=c,a[e]=(0,i.Z)(s),Y===f.kX?l.splice(t,1):o.splice(t,1),Y===f.kX&&t===l.length&&(t-=1),Y===f.Ov&&t===o.length&&(t-=1),G(t),L(a),H(l),J(o),V([].concat((0,i.Z)(z),[d])),void ie(r)}if(p>-1)return Y===f.kX?l.push(c.letter):o.push(c.letter),c.usedby=f.i4,c.letter=f.GP,s[n]=c,a[e]=(0,i.Z)(s),G(Y===f.kX?l.length-1:o.length-1),u.splice(p,1),L(a),H(l),J(o),V(u),void ie(-1,-1,f.QY);if(c.usedby!==f.i4);else{var h=re[0]!==e||re[1]!==n?f.oW:re[2]===f.oW?f.ik:re[2]===f.ik?f.QY:f.oW;ie(r=[e,n,h])}},Ee=function(e){if(t!==f.qg)if(-1!==W)if(W!==e){var n=t===f.ap?(0,i.Z)(M):(0,i.Z)(D),r=W,a=n[r],s=e;n.splice(r,1),n.splice(s,0,a),t===f.ap?H(n):J(n),G(-1)}else G(-1);else G(e)},Ze=function(){if(Re()){for(var e=ee,n=["0-0","0-"+T,"0-"+B,T+"-0",T+"-"+B,B+"-0",B+"-"+T,B+"-"+B],r=0;r<z.length;r++)n.indexOf(z[r])>-1&&(e+=1);for(var a=(0,i.Z)(M),s=(0,i.Z)(I);a.length<S&&s.length>0;){var c=Math.floor(Math.random()*s.length);a.push(s[c]),s.splice(c,1)}a.sort();var l=a.length>0?f.Ov:f.Bd;h(Q)||(l=f.Bd);var o=Pe(),u={by:f.ap,type:f.bS,mainword:o.mainword,extrawords:o.extrawords,pos:o.pos},d=[].concat((0,i.Z)(se),[u]),p=Date.now();Te(),O(p),_(l),H(a),R(s),ce(d),ne(e),ue({squareArray:JSON.parse(JSON.stringify(Q)),ptiles:(0,i.Z)(a),gtiles:(0,i.Z)(D)}),w.send({gameid:g,type:"pb",func:"ept",timestamp:p,sender:t,ptiles:a,tiles:s,whoseturn:l,move:u,rescues:e})}},Ie=function(){if(Re()){for(var e=(0,i.Z)(D),n=(0,i.Z)(I);e.length<S&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort();var a=JSON.parse(JSON.stringify(Q)),s=(0,i.Z)(M),c=(0,i.Z)(D),l=e.length>0?f.kX:f.Bd;h(Q)||(l=f.Bd);var o=Pe(),u={by:f.b6,type:f.bS,mainword:o.mainword,extrawords:o.extrawords,pos:o.pos},d=[].concat((0,i.Z)(se),[u]),p=Date.now();Te(),O(p),_(l),J(e),R(n),ce(d),ue({squareArray:a,ptiles:s,gtiles:c}),w.send({gameid:g,type:"pb",func:"egt",timestamp:p,sender:t,gtiles:e,tiles:n,move:u,whoseturn:l,racksize:S})}};function Re(){for(var e=!0,n=se.length,t=0;e&&t<n;++t)se[t].type===f.bS&&(e=!1);if(e&&Q[T][T].usedby===f.i4)return window.alert("First play must hit center square"),!1;if(0===z.length)return window.alert("You didn't play any tiles"),!1;for(var r=z.length,i=B+1,a=-1,s=B+1,c=-1,l=0;l<r;++l){var o=parseInt(z[l].split("-")[0]),u=parseInt(z[l].split("-")[1]);if(o<i&&(i=o),o>a&&(a=o),u<s&&(s=u),u>c&&(c=u),!(o>0&&Q[o-1][u].usedby!==f.i4)&&!(u>0&&Q[o][u-1].usedby!==f.i4)&&!(o<B&&Q[o+1][u].usedby!==f.i4)&&!(u<B&&Q[o][u+1].usedby!==f.i4))return window.alert("Each played tile must be part of a word"),!1}if(i!==a&&s!==c)return window.alert("Tiles played must be in a straight line"),!1;for(var d=!1,p=!1,m=i;m<=a;++m)for(var h=s;h<=c;++h){if(Q[m][h].usedby===f.i4)return window.alert("There is a gap in your word"),!1;if(!e){var v=m+"-"+h;z.indexOf(v)<0&&(d=!0),i===a&&m>0&&Q[m-1][h].usedby!==f.i4&&(p=!0),i===a&&m<B&&Q[m+1][h].usedby!==f.i4&&(p=!0),s===c&&h>0&&Q[m][h-1].usedby!==f.i4&&(p=!0),s===c&&h<B&&Q[m][h+1].usedby!==f.i4&&(p=!0)}}return!!(e||(i===a&&s>0&&Q[i][s-1].usedby!==f.i4&&(d=!0),i===a&&c<B&&Q[i][c+1].usedby!==f.i4&&(d=!0),s===c&&i>0&&Q[i-1][s]!==f.i4&&(d=!0),s===c&&a<B&&Q[a+1][s].usedby!==f.i4&&(d=!0),d||p))||(window.alert("New words must extend an existing word and/or hook existing words or tiles"),!1)}function Pe(){for(var e="",n=[],t="",r=B+1,a=-1,s=B+1,c=-1,l=z.length,o=0;o<l;++o){var u=parseInt(z[o].split("-")[0]),d=parseInt(z[o].split("-")[1]);u<r&&(r=u),u>a&&(a=u),d<s&&(s=d),d>c&&(c=d)}if(r<a||1===l){for(var p=s,m=r;m>0&&Q[m-1][p].usedby!==f.i4;)m-=1;for(var h=a;h<B&&Q[h+1][p].usedby!==f.i4;)h+=1;t=f.v8[p]+f.RH[m];for(var v=m;v<=h;++v){e+=Q[v][p].letter;var b=v+"-"+p;if(z.indexOf(b)>-1){for(var x=p;x>0&&Q[v][x-1].usedby!==f.i4;)x-=1;for(var y=p;y<B&&Q[v][y+1].usedby!==f.i4;)y+=1;if(x<y){for(var g="",N=x;N<=y;++N)g+=Q[v][N].letter;n=[].concat((0,i.Z)(n),[g])}}}}if(e.length<2){for(var j=r,w=s;w>0&&Q[j][w-1].usedby!==f.i4;)w-=1;for(var k=c;k<B&&Q[j][k+1].usedby!==f.i4;)k+=1;t=f.RH[j]+f.v8[w],e="",n=[];for(var S=w;S<=k;++S){e+=Q[j][S].letter;var A=j+"-"+S;if(z.indexOf(A)>-1){for(var C=j;C>0&&Q[C-1][S].usedby!==f.i4;)C-=1;for(var O=j;O<B&&Q[O+1][S].usedby!==f.i4;)O+=1;if(C<O){for(var T="",E=C;E<=O;++E)T+=Q[E][S].letter;n=[].concat((0,i.Z)(n),[T])}}}}return{mainword:e,extrawords:n,pos:t}}function Me(){he||(ve(!0),w.send({gameid:g,type:"pb",func:"allowundo",sender:t}))}function He(){w.send({gameid:g,type:"pb",func:"undoturn"})}var qe=function(){L(JSON.parse(JSON.stringify(oe.squareArray))),H((0,i.Z)(oe.ptiles)),J((0,i.Z)(oe.gtiles)),G(-1),V([]),ie([-1,-1,f.QY])},De=function(){w.send({gameid:g,type:"pb",sender:t,func:"requestgamedata",syncstamp:C})},Je=function(){w.send({gameid:g,type:"pb",sender:t,func:"requestsyncdata"})};return(0,r.jsxs)("div",{className:"prisonbreak",children:[(0,r.jsxs)("div",{className:"w3-display-container w3-teal topBarHeight",children:[(0,r.jsx)("div",{className:"w3-display-middle",children:(0,r.jsx)("h1",{className:"myHeadingFont",children:"Prison Break"})}),(0,r.jsxs)("div",{className:"w3-display-topleft w3-black topBarCorner commonFontFamily",children:["Game id: ",g]}),(0,r.jsxs)("div",{className:"w3-display-bottomleft w3-orange topBarCorner commonFontFamily",children:["Prisoners: ",t===f.ap?N:t===f.b6?xe:"Secret"]}),(0,r.jsx)("div",{className:"w3-display-topright w3-black topBarCorner commonFontFamily",children:(0,r.jsx)(s.default,{href:"../../",children:(0,r.jsx)("a",{children:(0,r.jsx)("i",{className:"material-icons","data-toggle":"tooltip",title:"Home",children:"home"})})})}),(0,r.jsxs)("div",{className:"w3-display-bottomright w3-orange topBarCorner commonFontFamily",children:["Guards: ",t===f.ap?xe:t===f.b6?N:"Secret"]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col pbTileAndMovesOuter",children:[(0,r.jsx)(o.default,{tiles:I,othertiles:t===f.ap?D:t===f.b6?M:[]}),(0,r.jsx)(u.default,{moves:se})]}),(0,r.jsx)("div",{className:"col pbPlayerOuterSection",children:t===f.ap?(0,r.jsx)(c.default,{racktiles:M,whoseturn:Y,selection:W,onClick:function(e){return Ee(e)},onClickFinishTurn:function(){return Ze()},onClickTileRecall:function(){return qe()},onClickTileExchange:function(){return function(){if(I.length<S)window.alert("Need "+S+" tiles in the bag to exchange");else{for(var e=[],n=(0,i.Z)(I);e.length<S&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort(),(n=[].concat((0,i.Z)(n),(0,i.Z)(oe.ptiles))).sort();var a={by:f.ap,type:f.Ix},s=[].concat((0,i.Z)(se),[a]),c=Date.now();Te(),O(c),L(JSON.parse(JSON.stringify(oe.squareArray))),_(f.Ov),H(e),R(n),ce(s),ue({squareArray:JSON.parse(JSON.stringify(oe.squareArray)),ptiles:[].concat(e),gtiles:(0,i.Z)(D)}),w.send({gameid:g,type:"pb",func:"ept",timestamp:c,sender:t,whoseturn:f.Ov,ptiles:e,tiles:n,move:a})}}()},onClickPassPlay:function(){return function(){var e={by:f.ap,type:f.Am},n=[].concat((0,i.Z)(se),[e]),r=b(n)?f.Bd:f.Ov,a=Date.now();qe(),Te(),O(a),_(r),ce(n),w.send({gameid:g,type:"pb",func:"ept",timestamp:a,sender:t,whoseturn:r,move:e})}()},onClickUndoLastPlay:function(){return He()},onClickAllowUndo:function(){return Me()},participant:t,moves:se,allowRewind:he}):t===f.b6?(0,r.jsx)(c.default,{racktiles:D,whoseturn:Y,selection:W,onClick:function(e){return Ee(e)},onClickFinishTurn:function(){return Ie()},onClickTileRecall:function(){return qe()},onClickTileExchange:function(){return function(){if(I.length<S)window.alert("Need "+S+" tiles in the bag to exchange");else{for(var e=[],n=(0,i.Z)(I);e.length<S&&n.length>0;){var r=Math.floor(Math.random()*n.length);e.push(n[r]),n.splice(r,1)}e.sort(),(n=[].concat((0,i.Z)(n),(0,i.Z)(oe.gtiles))).sort();var a={by:f.b6,type:f.Ix},s=[].concat((0,i.Z)(se),[a]),c=Date.now();Te(),O(c),L(JSON.parse(JSON.stringify(oe.squareArray))),_(f.kX),J(e),R(n),ce(s),ue({squareArray:JSON.parse(JSON.stringify(oe.squareArray)),ptiles:(0,i.Z)(M),gtiles:[].concat(e)}),w.send({gameid:g,type:"pb",func:"egt",timestamp:c,sender:t,whoseturn:f.kX,gtiles:e,tiles:n,move:a})}}()},onClickPassPlay:function(){return function(){var e={by:f.b6,type:f.Am},n=[].concat((0,i.Z)(se),[e]),r=b(n)?f.Bd:f.kX,a=Date.now();qe(),Te(),O(a),_(r),ce(n),w.send({gameid:g,type:"pb",func:"egt",timestamp:a,sender:t,whoseturn:r,move:e})}()},onClickUndoLastPlay:function(){return He()},onClickAllowUndo:function(){return Me()},participant:t,moves:se,allowRewind:he}):(0,r.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,r.jsxs)("div",{className:"pbPlayerTitle",children:[(0,r.jsx)("i",{className:"material-icons",children:f._k}),"\xa0",f.Ji,"\xa0",(0,r.jsx)("i",{className:"material-icons",children:f._k})]}),(0,r.jsx)("div",{className:"pbTilerack",children:M&&M.map((function(e,n){return(0,r.jsx)(y,{participant:"P",tilevalue:e,tileindex:n},"ObserverPrisonersRackTile".concat(n))}))}),(0,r.jsxs)("div",{className:"pbPlayerTitle",children:[(0,r.jsx)("i",{className:"material-icons",children:f.g9}),"\xa0",f.jN,"\xa0",(0,r.jsx)("i",{className:"material-icons",children:f.g9})]}),(0,r.jsx)("div",{className:"pbTilerack",children:D&&D.map((function(e,n){return(0,r.jsx)(y,{participant:"G",tilevalue:e,tileindex:n},"ObserverGuardsRackTile".concat(n))}))})]})}),(0,r.jsx)("div",{className:"col",children:t===Y?(0,r.jsx)("div",{className:"row",onKeyDownCapture:function(e){if(e.preventDefault(),t===Y)if("Enter"!==e.key)if("Escape"!==e.key){if(e.key.match(/^[A-Za-z\?]$/)){var n=e.key.toUpperCase(),r=Y===f.kX?M:D,a=r.indexOf(n);if(-1===a&&(a=r.indexOf("?")),a>-1){var s=re[0],c=re[1],l=re[2];if(s>-1&&c>-1&&l!==f.QY){var o=re;if(l===f.oW){for(var u=-1,d=c+1;d<B+1&&-1===u;d++)Q[s][d].usedby===f.i4&&(u=d);return o=-1===u?[-1,-1,f.QY]:[s,u,f.oW],Be(s,c,a,o),void G(-1)}if(l===f.ik){for(var p=-1,m=2*S+1,h=s+1;h<m&&-1===p;h++)Q[h][c].usedby===f.i4&&(p=h);return o=-1===p?[-1,-1,f.QY]:[p,c,f.ik],Be(s,c,a,o),void G(-1)}}}}else if("Backspace"===e.key&&z.length>0){var v=z[z.length-1],b=parseInt(v.split("-")[0]),x=parseInt(v.split("-")[1]),y=(0,i.Z)(z),g=(0,i.Z)(M),N=(0,i.Z)(D),j=JSON.parse(JSON.stringify(Q)),w=j[b],k=w[x],A=[-1,-1,f.QY],C=W;y.splice(z.length-1,1);var O=Q[b][x].letter;Y===f.kX?(g.push(O),C=g.length-1):(N.push(O),C=N.length-1),k.usedby=f.i4,k.letter=f.GP,w[x]=k,j[b]=(0,i.Z)(w);var T=re[2];T!==f.QY&&(A=[b,x,T],1===z.length&&(C=-1)),V(y),J(N),H(g),L(j),ie(A),G(C)}}else qe();else Y===f.kX?Ze():Ie()},children:(0,r.jsx)(l.default,{squareArray:Q,rcd:re,onClick:function(e,n){return Be(e,n,-1,null)}})}):(0,r.jsx)("div",{className:"row",children:(0,r.jsx)(l.default,{squareArray:Q,rcd:re,onClick:function(){}})})}),(0,r.jsxs)("div",{className:"col",children:[(0,r.jsx)(d.default,{rescues:ee}),(0,r.jsx)(p.default,{gameid:g,client:w,nickname:N,msgs:Ne,setMsgs:je,participant:t})]})]}),(0,r.jsx)("div",{className:"w3-display-container w3-teal topBarHeight",children:(0,r.jsx)("div",{className:"w3-display-middle commonFontFamily",children:Y===f.Bd?(0,r.jsx)("h1",{children:"Game Over!"}):(0,r.jsx)("p",{children:f._W[pe]})})})]})}},9477:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595);n.default=function(e){var n=e.moves;return(0,r.jsxs)("div",{className:"pbMoves",children:[(0,r.jsx)("div",{className:"pbMovesTitle",children:"MOVES"}),(0,r.jsx)("div",{className:"pbMovesScrollable",id:"ScrollableMoves",children:n&&n.map((function(e,n){var t;return(0,r.jsxs)("div",{className:"pbMove",children:[(0,r.jsx)("span",{className:"pbMove by",children:e.by}),":",(0,r.jsx)("span",{className:"pbMove ".concat(e.type),children:e.type===i.bS?(0,r.jsxs)(r.Fragment,{children:[e.pos," ",e.mainword.replace("Q","Qu"),null===(t=e.extrawords)||void 0===t?void 0:t.map((function(e,n){return(0,r.jsxs)("span",{children:[",\xa0",e.replace("Q","Qu")]},"extraword".concat(n))}))]}):(0,r.jsx)(r.Fragment,{})})]},"move".concat(n))}))})]})}},8451:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595),a=function(e){var n="pbTileOnRack "+(e.selection===e.tileindex?"Selected ":"Unselected ")+("Q"===e.tilevalue?"u ":"")+e.participant,t=e.tileindex;return(0,r.jsx)("div",{className:n,onClick:function(n){return e.onClick(n)},children:(0,r.jsx)("div",{className:"pbTileOnRackText",children:e.tilevalue})},t)},s=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"check"}),"\xa0Finish Turn"]})})},c=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"undo"}),"\xa0Recall Tiles"]})})},l=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"cached"}),"\xa0Swap Tiles"]})})},o=function(e){return(0,r.jsx)("button",{className:"pbActionButton",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonText",children:[(0,r.jsx)("i",{className:"material-icons",children:"not_interested"}),"\xa0Pass Turn"]})})},u=function(e){return e.alreadyAllowed?(0,r.jsx)("div",{className:"pbActionButtonSevere",children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report"}),"\xa0ENABLED",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"\xa0Allow undo is now enabled"})]})}):(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"report_problem"}),"\xa0Allow Undo Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Click to let opponent undo"})]})})},d=function(e){return(0,r.jsx)("button",{className:"pbActionButtonSevere",onClick:e.onClick,children:(0,r.jsxs)("span",{className:"pbActionButtonSevereText",children:[(0,r.jsx)("i",{className:"material-icons",children:"delete_forever"}),"\xa0Undo My Turn",(0,r.jsx)("span",{className:"pbActionButtonSevereText2",children:"Opponent has allowed undo"})]})})};function p(e){return(0,r.jsxs)("div",{className:"pbActionButtonDiv",children:[(0,r.jsx)("p",{children:(0,r.jsx)(s,{onClick:function(){return e.onClickFinishTurn()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(c,{onClick:function(){return e.onClickTileRecall()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(l,{onClick:function(){return e.onClickTileExchange()}})}),(0,r.jsx)("p",{children:(0,r.jsx)(o,{onClick:function(){return e.onClickPassPlay()}})})]})}function f(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("div",{children:(0,r.jsx)(u,{onClick:function(){return e.onClickAllowUndo()},alreadyAllowed:e.allowRewind})})})}function m(e){return(0,r.jsx)("div",{className:"pbActionButtonDiv",children:(0,r.jsx)("p",{children:(0,r.jsx)(d,{onClick:function(){return e.onClickUndoLastPlay()}})})})}n.default=function(e){var n=e.participant===i.ap?i._k:i.g9,t=e.participant===i.ap?i.Ji:i.jN;return(0,r.jsxs)("div",{className:"pbPlayerInnerSection",children:[(0,r.jsxs)("div",{className:"pbPlayerTitle",children:[(0,r.jsx)("i",{className:"material-icons",children:n}),"\xa0",t,"\xa0",(0,r.jsx)("i",{className:"material-icons",children:n})]}),(0,r.jsx)("div",{className:"pbTilerack",children:e.racktiles&&e.racktiles.map((function(n,t){return(0,r.jsx)(a,{whoseturn:e.whoseturn,participant:e.participant,selection:e.selection,tileindex:t,tilevalue:n,onClick:function(){return e.onClick(t)}},"RackTile".concat(t))}))}),e.whoseturn===e.participant?p(e):e.allowRewind&&e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by===e.participant&&m(e),e.moves&&e.moves.length>0&&e.moves[e.moves.length-1].by!==e.participant&&f(e)]})}},798:function(e,n,t){"use strict";t.r(n);var r=t(5893);n.default=function(e){var n=e.rescues;return(0,r.jsxs)("div",{className:"pbRescuesMade",children:["Rescues made: ",n]})}},4620:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(6595);n.default=function(e){var n=e.usedby,t=e.type,a=e.letter,s=e.ri,c=e.ci,l=e.rcd,o=e.onClick,u=n!==i.i4?"pbSquareInner PlayerTile":l[0]===s&&l[1]===c&&l[2]===i.oW?"pbSquareInner RightArrow":l[0]===s&&l[1]===c&&l[2]===i.ik?"pbSquareInner DownArrow":"pbSquareInner "+t,d=n!==i.i4?a:u.indexOf("RightArrow")>-1?"\u27a1":u.indexOf("DownArrow")>-1?"\u2b07":u.indexOf("CenterSquare")>-1?(0,r.jsx)("i",{className:"material-icons",children:"stars"}):u.indexOf("EscapeHatch")>-1?(0,r.jsx)("i",{className:"material-icons",children:i._k}):".";return n===i.i4?(0,r.jsx)("button",{className:u,onClick:o,children:d}):(0,r.jsx)("button",{className:u,onClick:o,children:(0,r.jsx)("div",{className:"pbSquareTileText ".concat(n+("Q"===a?" u":"")),children:d})})}},8520:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(1385);n.default=function(e){var n=e.tiles,t=e.othertiles,a=[].concat((0,i.Z)(n||[]),(0,i.Z)(t||[]));return a.sort(),"?"===a[0]&&(a.splice(0,1),a.push("?")),"?"===a[0]&&(a.splice(0,1),a.push("?")),(0,r.jsxs)("div",{className:"pbTilepool",children:[(0,r.jsx)("div",{className:"pbTilepoolTitle",children:"TILES"}),a.map((function(e,n){return(0,r.jsxs)("span",{children:[n>0&&e!==a[n-1]?(0,r.jsx)("span",{className:"pbTilepoolDivider"}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("span",{className:"Q"===e?"pbTilepoolTile u":"pbTilepoolTile",children:e})]},"tile".concat(n))}))]})}}}]);